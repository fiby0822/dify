# Difyé–‹ç™ºç”¨ å…¨ä½“ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ«ãƒ¼ãƒ« - åŸºæœ¬æ§‹é€ ã¨ã‚¨ãƒ©ãƒ¼é˜²æ­¢

é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«:
- [ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹](./00_index.md)
- [ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­è¨ˆ](./02_ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­è¨ˆ.md)
- [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](./05_ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°.md)

## 0. ã‚ˆãã‚ã‚‹å¤±æ•—ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆå¿…èª­ï¼‰

### 0.1 ã‚¤ãƒ³ãƒãƒ¼ãƒˆå¤±æ•—ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å…·ä½“ä¾‹

#### åŸºæœ¬æ§‹é€ ã®èª¤ã‚Š
```yaml
# âŒ é–“é•ã„ï¼šappãƒ–ãƒ­ãƒƒã‚¯ãŒãªã„
description: "ã‚¢ãƒ—ãƒªã®èª¬æ˜"
icon: "ğŸ¤–"
mode: advanced-chat
name: "ã‚¢ãƒ—ãƒªå"
dependencies: []
kind: app
version: 0.3.0

# âœ… æ­£è§£ï¼šappãƒ–ãƒ­ãƒƒã‚¯ã§å›²ã‚€
app:
  description: "ã‚¢ãƒ—ãƒªã®èª¬æ˜"
  icon: "ğŸ¤–"
  icon_background: "#FFEAD5"
  mode: advanced-chat
  name: "ã‚¢ãƒ—ãƒªå"
  use_icon_as_answer_icon: false
dependencies: []
kind: app
version: 0.3.0
```

#### æ¡ä»¶å¼ã®è¨˜è¿°ãƒŸã‚¹
```yaml
# âŒ é–“é•ã„ï¼šå­˜åœ¨ã—ãªã„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
conditions:
  - variable_selector: [start_node, user_input]
    comparison_operator: "â‰¥"
    value: "100"
    if: true  # å­˜åœ¨ã—ãªã„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

# âœ… æ­£è§£ï¼šæ­£ã—ã„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ§‹æˆ
conditions:
  - variable_selector: [start_node, user_input]
    comparison_operator: "â‰¥"
    value: "100"
```

### 0.2 advanced-chatãƒ¢ãƒ¼ãƒ‰ã§ã®startãƒãƒ¼ãƒ‰å¤‰æ•°å®šç¾©ã‚¨ãƒ©ãƒ¼

#### ç—‡çŠ¶
- `sys.query is required in input form`ã‚¨ãƒ©ãƒ¼
- ã‚¤ãƒ³ãƒãƒ¼ãƒˆå¾Œã€ãƒãƒ£ãƒƒãƒˆé–‹å§‹æ™‚ã«ã‚¨ãƒ©ãƒ¼

#### é–“é•ã£ãŸå®Ÿè£…
```yaml
# âŒ é–“é•ã„ï¼šadvanced-chatãƒ¢ãƒ¼ãƒ‰ã§startãƒãƒ¼ãƒ‰ã«å¤‰æ•°å®šç¾©
app:
  mode: advanced-chat
workflow:
  graph:
    nodes:
      - data:
          type: start
          variables:
            - label: ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›
              variable: sys.query  # ã‚¨ãƒ©ãƒ¼ã®åŸå› 
```

#### æ­£ã—ã„å®Ÿè£…
```yaml
# âœ… æ­£è§£ï¼šadvanced-chatãƒ¢ãƒ¼ãƒ‰ã§ã¯variablesã¯ç©ºé…åˆ—
app:
  mode: advanced-chat
workflow:
  graph:
    nodes:
      - data:
          type: start
          variables: []  # å¿…ãšç©ºé…åˆ—
```

#### é‡è¦ãƒã‚¤ãƒ³ãƒˆ
- **advanced-chatãƒ¢ãƒ¼ãƒ‰**ï¼šsys.queryã¯è‡ªå‹•æä¾›ã•ã‚Œã‚‹ãŸã‚ã€startãƒãƒ¼ãƒ‰ã§ã®å®šç¾©ã¯ä¸è¦
- **workflowãƒ¢ãƒ¼ãƒ‰**ï¼šå¿…è¦ã«å¿œã˜ã¦å¤‰æ•°å®šç¾©å¯èƒ½
- ãƒ¢ãƒ¼ãƒ‰ã«ã‚ˆã£ã¦ç•°ãªã‚‹å®Ÿè£…ãŒå¿…è¦ãªã“ã¨ã«æ³¨æ„

### 0.3 JSONå½¢å¼ã®è¨˜è¿°ã‚¨ãƒ©ãƒ¼

#### ã‚ˆãã‚ã‚‹é…åˆ—è¨˜è¿°ãƒŸã‚¹
```yaml
# âŒ é–“é•ã„ï¼šé–‰ã˜æ‹¬å¼§ãŒæ¬ ã‘ã¦ã„ã‚‹
ranges:
  type: mixed
  value: '['INPUT!A1:C10']'  # é–‰ã˜æ‹¬å¼§å¿˜ã‚Œ

# âœ… æ­£è§£ï¼šæ­£ã—ãé–‰ã˜ã‚‰ã‚ŒãŸJSONé…åˆ—
ranges:
  type: mixed
  value: '["INPUT!A1:C10"]'  # å¿…ãšé–‰ã˜æ‹¬å¼§ã‚’ç¢ºèª
```

#### tool_parametersã®JSONå€¤ãƒã‚§ãƒƒã‚¯
- JSONé…åˆ—ã¯å¿…ãš`[`ã§å§‹ã¾ã‚Š`]`ã§çµ‚ã‚ã‚‹
- JSONæ–‡å­—åˆ—ã¯å¿…ãš`"`ã§å›²ã‚€
- å€¤ã®å‰å¾Œã®å¼•ç”¨ç¬¦`'`ã‚’å¿˜ã‚Œãªã„

### 0.3.2 tool_parametersã®JSONå€¤ãƒã‚§ãƒƒã‚¯ï¼ˆæœ€é‡è¦ï¼‰

#### ã‚ˆãã‚ã‚‹JSONè¨˜æ³•ã‚¨ãƒ©ãƒ¼

1. **é…åˆ—ã®é–‰ã˜æ‹¬å¼§å¿˜ã‚Œï¼ˆæœ€é »å‡ºã‚¨ãƒ©ãƒ¼ï¼‰**
```yaml
# âŒ è‡´å‘½çš„ã‚¨ãƒ©ãƒ¼ï¼šé–‰ã˜æ‹¬å¼§ãŒæ¬ ã‘ã¦ã„ã‚‹
ranges:
  type: mixed
  value: '["INPUT!A1:C10"'  # ] ãŒæ¬ ã‘ã¦ã„ã‚‹ï¼

# âœ… æ­£è§£ï¼šæ­£ã—ãé–‰ã˜ã‚‰ã‚ŒãŸJSONé…åˆ—
ranges:
  type: mixed
  value: '["INPUT!A1:C10"]'
```

2. **ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—å‡¦ç†ã®èª¤ã‚Š**
```yaml
# âŒ ã‚¨ãƒ©ãƒ¼ï¼šãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã®ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—å¿˜ã‚Œ
data:
  type: mixed
  value: '[{"range": "A1", "values": [["test"]]}]'

# âœ… æ­£è§£ï¼šã¾ãŸã¯ã€YAMLã®ãƒ–ãƒ­ãƒƒã‚¯ã‚¹ã‚«ãƒ©ãƒ¼ã‚’ä½¿ç”¨
data:
  type: mixed
  value: |
    [{
      "range": "A1",
      "values": [["test"]]
    }]
```

3. **ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**
- [ ] é–‹ãæ‹¬å¼§ [ ãŒã‚ã‚Œã°å¿…ãšé–‰ã˜æ‹¬å¼§ ] ãŒã‚ã‚‹
- [ ] é–‹ãæ‹¬å¼§ { ãŒã‚ã‚Œã°å¿…ãšé–‰ã˜æ‹¬å¼§ } ãŒã‚ã‚‹
- [ ] æ–‡å­—åˆ—ã¯å¿…ãš " ã§å›²ã¾ã‚Œã¦ã„ã‚‹
- [ ] JSONå…¨ä½“ãŒ ' ã§å›²ã¾ã‚Œã¦ã„ã‚‹ï¼ˆYAMLã®æ–‡å­—åˆ—ã¨ã—ã¦ï¼‰

### 0.3.1 è¨±å¯ã•ã‚ŒãŸãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹ãƒ„ãƒ¼ãƒ«
ä»¥ä¸‹ã®ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹ãƒ„ãƒ¼ãƒ«ã«ã¤ã„ã¦ã¯ä½¿ç”¨ã‚’è¨±å¯ã™ã‚‹ï¼š

#### Google Sheetsæ“ä½œ
- omluc/google_sheets:0.0.2
  ```yaml
  dependencies:
  - current_identifier: null
    type: marketplace
    value:
      marketplace_plugin_unique_identifier: omluc/google_sheets:0.0.2@17f06eaa1d905595e1a76460e7249707a722142353d551cf14aed3d8517c134f
  ```

ã€æ³¨æ„ã€‘ä¸Šè¨˜ä»¥å¤–ã®marketplaceãƒ„ãƒ¼ãƒ«ã®ä½¿ç”¨ã¯å¼•ãç¶šãç¦æ­¢ã¨ã™ã‚‹ã€‚

### 0.4 toolãƒãƒ¼ãƒ‰ã®provider_typeã‚¨ãƒ©ãƒ¼ï¼ˆGoogle Sheetsä½¿ç”¨æ™‚ã®æ³¨æ„ï¼‰

#### Google Sheetsãƒ„ãƒ¼ãƒ«ä½¿ç”¨æ™‚ã®æ­£ã—ã„è¨­å®š

1. **dependenciesï¼ˆæœ€ä¸Šä½ï¼‰ã®è¨­å®š**ï¼š
```yaml
dependencies:
- current_identifier: null
  type: marketplace  # â† ã“ã“ã§ã¯marketplaceã‚’ä½¿ç”¨ï¼ˆæ­£ã—ã„ï¼‰
  value:
    marketplace_plugin_unique_identifier: omluc/google_sheets:0.0.2@...
```

2. **toolãƒãƒ¼ãƒ‰ã®è¨­å®š**ï¼š
```yaml
- data:
    type: tool
    provider_type: builtin  # â† å¿…ãšbuiltinã‚’ä½¿ç”¨ï¼ˆmarketplaceã¯ç„¡åŠ¹ï¼‰
    provider_id: omluc/google_sheets/google_sheets
    provider_name: omluc/google_sheets/google_sheets
```

**é‡è¦ãªåŒºåˆ¥**ï¼š
- dependencieså†…ã®type: marketplace â†’ æ­£ã—ã„ï¼ˆä¾å­˜é–¢ä¿‚ã®å®šç¾©ï¼‰
- toolãƒãƒ¼ãƒ‰ã®provider_type: marketplace â†’ ã‚¨ãƒ©ãƒ¼ï¼ˆç„¡åŠ¹ãªå€¤ï¼‰
- toolãƒãƒ¼ãƒ‰ã§ã¯å¿…ãšprovider_type: builtinã‚’ä½¿ç”¨

#### ç—‡çŠ¶
- "Input should be 'plugin', 'builtin', 'workflow', 'api', 'app' or 'dataset-retrieval'"ã‚¨ãƒ©ãƒ¼
- ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ™‚ã®å³åº§ã®å¤±æ•—

#### æœ‰åŠ¹ãªprovider_typeå€¤ä¸€è¦§
- `builtin`: Difyå†…è”µãƒ„ãƒ¼ãƒ«ï¼ˆGoogle Sheetsç­‰ï¼‰
- `plugin`: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«
- `workflow`: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ„ãƒ¼ãƒ«
- `api`: APIãƒ„ãƒ¼ãƒ«
- `app`: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ„ãƒ¼ãƒ«
- `dataset-retrieval`: ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆæ¤œç´¢ãƒ„ãƒ¼ãƒ«

### 0.5 tool_configurationsãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ¬ è½

#### ç—‡çŠ¶
- "tool_configurations Field required"ã‚¨ãƒ©ãƒ¼
- ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ãƒ‰ã®åˆæœŸåŒ–å¤±æ•—

#### é–“é•ã£ãŸå®Ÿè£…
```yaml
# âŒ é–“é•ã„ï¼štool_configurationsãŒæ¬ è½
- data:
    type: tool
    provider_id: omluc/google_sheets
    tool_name: batch_get
    tool_parameters:
      ranges:
        type: mixed
        value: '["A1:B10"]'
```

#### æ­£ã—ã„å®Ÿè£…
```yaml
# âœ… æ­£è§£ï¼šå¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å«ã‚ã‚‹
- data:
    type: tool
    provider_id: omluc/google_sheets/google_sheets
    provider_name: omluc/google_sheets/google_sheets
    provider_type: builtin
    tool_label: Batch Get
    tool_name: batch_get
    tool_configurations:  # å¿…é ˆï¼ˆç©ºã§ã‚‚è¨˜è¼‰ï¼‰
      date_time_render_option: FORMATTED_STRING
    tool_parameters:
      ranges:
        type: mixed
        value: '["A1:B10"]'
```

### 0.6 å¤‰æ•°å‚ç…§ã‚¨ãƒ©ãƒ¼ï¼ˆ.dataä½¿ç”¨ï¼‰

#### ç—‡çŠ¶
- "Variable #node_id.data# not found"ã‚¨ãƒ©ãƒ¼
- ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ãƒ‰ã®å‡ºåŠ›ã‚’æ­£ã—ãå‚ç…§ã§ããªã„

#### é–“é•ã£ãŸå®Ÿè£…
```yaml
# âŒ é–“é•ã„ï¼šå­˜åœ¨ã—ãªã„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
- variable: sheet_data
  value_selector: [google_sheets_read, data]  # dataã¯ç„¡åŠ¹
```

#### æ­£ã—ã„å®Ÿè£…
```yaml
# âœ… æ­£è§£ï¼šæ­£ã—ã„å‚ç…§æ–¹æ³•
- variable: sheet_data
  value_selector: [google_sheets_read, json]  # ã¾ãŸã¯ output
  value_type: array[object]
```

#### toolãƒãƒ¼ãƒ‰ã®å‡ºåŠ›å‚ç…§å½¢å¼
- ãƒ†ã‚­ã‚¹ãƒˆå‡ºåŠ›: {{#node_id.text#}}
- JSONå‡ºåŠ›: {{#node_id.json#}}
- ä¸€èˆ¬çš„ãªå‡ºåŠ›: {{#node_id.output#}}

### 0.7 ã‚·ã‚¹ãƒ†ãƒ äºˆç´„å¤‰æ•°ï¼ˆsys.queryï¼‰ã‚¨ãƒ©ãƒ¼ã®é˜²æ­¢

#### ç—‡çŠ¶
- codeãƒãƒ¼ãƒ‰ã§"sys.query is not defined"ã‚¨ãƒ©ãƒ¼
- LLMãƒãƒ¼ãƒ‰ã§ã®å¤‰æ•°å‚ç…§ã‚¨ãƒ©ãƒ¼
- question-classifierãƒãƒ¼ãƒ‰ã§ã®sys.queryé–¢é€£ã‚¨ãƒ©ãƒ¼

#### é–“é•ã£ãŸå®Ÿè£…
```yaml
# âŒ é–“é•ã„ï¼šcodeãƒãƒ¼ãƒ‰ã§import sysãŒæ¬ è½
- data:
    type: code
    code: |
      user_input = sys.query  # ã‚¨ãƒ©ãƒ¼ï¼šsysãŒæœªå®šç¾©
      return {"result": user_input}

# âŒ é–“é•ã„ï¼šãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå†…ã§sys.queryã‚’ç›´æ¥ä½¿ç”¨
prompt_template:
  - text: |
      ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•ï¼š{{sys.query}}  # ã‚¨ãƒ©ãƒ¼ï¼šèª¤ã£ãŸå‚ç…§å½¢å¼

# âŒ é–“é•ã„ï¼šquestion-classifierã§sys.queryã‚’æ¡ä»¶ã«ä½¿ç”¨
conditions:
  - variable_selector: [sys, query]  # ã‚¨ãƒ©ãƒ¼ï¼šç›´æ¥å‚ç…§ã¯ä¸å¯
    comparison_operator: contains
    value: "test"
```

#### æ­£ã—ã„å®Ÿè£…
```yaml
# âœ… æ­£è§£ï¼šcodeãƒãƒ¼ãƒ‰ã§import sys
- data:
    type: code
    code: |
      import sys  # å¿…é ˆ
      user_input = sys.query
      return {"result": user_input}

# âœ… æ­£è§£ï¼šãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå†…ã§ã®æ­£ã—ã„å‚ç…§
prompt_template:
  - text: |
      ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•ï¼š{{#sys.query#}}  # æ­£ã—ã„å‚ç…§å½¢å¼

# âœ… æ­£è§£ï¼šquestion-classifierã§ã¯å‰æ®µã®LLMå‡ºåŠ›ã‚’ä½¿ç”¨
conditions:
  - variable_selector: [llm_node, text]  # LLMãƒãƒ¼ãƒ‰ã®å‡ºåŠ›ã‚’å‚ç…§
    comparison_operator: contains
    value: "test"
```

#### ãƒã‚§ãƒƒã‚¯é …ç›®
- [ ] advanced-chatãƒ¢ãƒ¼ãƒ‰ã§startãƒãƒ¼ãƒ‰ã®variablesã«ã‚·ã‚¹ãƒ†ãƒ äºˆç´„å¤‰æ•°ã‚’å®šç¾©ã—ã¦ã„ãªã„
- [ ] sys.queryã€sys.filesã€sys.conversation_idã€sys.user_idã‚’å¤‰æ•°åã¨ã—ã¦ä½¿ç”¨ã—ã¦ã„ãªã„
- [ ] workflowãƒ¢ãƒ¼ãƒ‰ã®å ´åˆã€sys.queryã‚’å‚ç…§ã—ã¦ã„ãªã„ï¼ˆä½¿ç”¨ä¸å¯ï¼‰
- [ ] codeãƒãƒ¼ãƒ‰ã§sys.queryã‚’ä½¿ç”¨ã™ã‚‹éš›ã¯å¿…ãšimport sysã‚’è¨˜è¿°
- [ ] ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå†…ã§ã¯{{#sys.query#}}å½¢å¼ã§å‚ç…§

## 0.8 å»ƒæ­¢ã•ã‚ŒãŸãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆä½¿ç”¨å³ç¦ï¼‰

ä»¥ä¸‹ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯å»ƒæ­¢ã•ã‚Œã¦ãŠã‚Šã€ä½¿ç”¨ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ã®åŸå› ã¨ãªã‚Šã¾ã™ï¼š

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å | é…ç½®å ´æ‰€ | å‚™è€ƒ |
|------------|---------|------|
| mode | æœ€ä¸Šä½ãƒ¬ãƒ™ãƒ« | appã‚»ã‚¯ã‚·ãƒ§ãƒ³å†…ã«é…ç½®ã™ã‚‹ã“ã¨ |
| fiby_version | å…¨ä½“ | versionãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ä½¿ç”¨ |
| system_prompt | å…¨ä½“ | prompt_templateã‚’ä½¿ç”¨ |
| graph | æœ€ä¸Šä½ãƒ¬ãƒ™ãƒ« | workflowå†…ã«é…ç½®ã™ã‚‹ã“ã¨ |
| variables | æœ€ä¸Šä½ãƒ¬ãƒ™ãƒ« | å„ãƒãƒ¼ãƒ‰å†…ã§å®šç¾©ã™ã‚‹ã“ã¨ |

```yaml
# âŒ é–“é•ã„ï¼šå»ƒæ­¢ã•ã‚ŒãŸãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
fiby_version: "1.0"  # ä½¿ç”¨ç¦æ­¢
mode: advanced-chat  # æœ€ä¸Šä½ã§ã¯ä½¿ç”¨ç¦æ­¢
graph:              # æœ€ä¸Šä½ã§ã¯ä½¿ç”¨ç¦æ­¢
  nodes: []

# âœ… æ­£è§£ï¼šç¾åœ¨ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
version: 0.3.0
app:
  mode: advanced-chat
workflow:
  graph:
    nodes: []
```

### 0.9 ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹ãƒ„ãƒ¼ãƒ«ã®ä¾å­˜é–¢ä¿‚æœªå®šç¾©
- ç—‡çŠ¶: Tool not foundã‚¨ãƒ©ãƒ¼
- åŸå› : dependenciesã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®è¨˜è¿°æ¼ã‚Œ
- å¯¾ç­–: ä½¿ç”¨ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã®dependencieså®šç¾©ã‚’å¿…ãšè¿½åŠ 

#### è¨±å¯ã•ã‚Œã¦ã„ã‚‹ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹ãƒ„ãƒ¼ãƒ«
ä»¥ä¸‹ã®ãƒ„ãƒ¼ãƒ«ã«é™ã‚Šã€dependenciesã§type: marketplaceã®ä½¿ç”¨ãŒè¨±å¯ã•ã‚Œã¦ã„ã¾ã™ï¼š
- Google Sheetsæ“ä½œ: omluc/google_sheets:0.0.2@17f06eaa1d905595e1a76460e7249707a722142353d551cf14aed3d8517c134f
- éŸ³å£°èªè­˜ï¼ˆOpenAI Audioï¼‰: lysonober/openai_audio:0.0.4@2a7bc1307f6d4337b597cafe1c75f20e0fabf0dd8132a0a4e04496b3c949c86c

æ³¨æ„ï¼š
- ä¸Šè¨˜ä»¥å¤–ã®marketplaceãƒ„ãƒ¼ãƒ«ã®ä½¿ç”¨ã¯ç¦æ­¢ã•ã‚Œã¦ã„ã¾ã™
- éŸ³å£°èªè­˜ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€provider_typeã¯"builtin"ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ï¼ˆ"marketplace"ã§ã¯ãªã„ï¼‰
- ç”»åƒèªè­˜ï¼ˆVisionï¼‰æ©Ÿèƒ½ã¯OpenAI APIã®æ¨™æº–æ©Ÿèƒ½ã®ãŸã‚ã€ç‰¹åˆ¥ãªä¾å­˜é–¢ä¿‚ã¯ä¸è¦ã§ã™

### 0.10 tool_parametersã¨tool_configurationsã®ä¸æ•´åˆ
- ç—‡çŠ¶: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒåæ˜ ã•ã‚Œãªã„
- åŸå› : ä¸¡æ–¹ã«è¨­å®šãŒå¿…è¦ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ç‰‡æ–¹ã®ã¿è¨­å®š
- å¯¾ç­–: ä¸¡ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®å€¤ã‚’åŒæœŸã•ã›ã‚‹

### 0.11 Visionæ©Ÿèƒ½ï¼ˆç”»åƒèªè­˜ï¼‰ã®variable_selectoræœªè¨­å®š
- ç—‡çŠ¶: ç”»åƒãŒèªè­˜ã•ã‚Œãªã„ã€Visionæ©Ÿèƒ½ãŒå‹•ä½œã—ãªã„
- åŸå› : vision.enabled: trueã«ã—ãŸãŒã€vision.variable_selectorãŒç©ºé…åˆ—[]ã®ã¾ã¾
- å¯¾ç­–: ç”»åƒå…¥åŠ›å¤‰æ•°ã¸ã®å‚ç…§ãƒ‘ã‚¹ã‚’æ­£ã—ãè¨­å®š

```yaml
# âŒ é–“é•ã„ï¼švariable_selectorãŒç©ºé…åˆ—
vision:
  enabled: true
  variable_selector: []  # ç”»åƒã‚’å—ã‘å–ã‚Œãªã„ï¼

# âœ… æ­£è§£ï¼šç”»åƒå…¥åŠ›å¤‰æ•°ã‚’æŒ‡å®š
vision:
  enabled: true
  variable_selector:
    - sys        # ã‚·ã‚¹ãƒ†ãƒ å¤‰æ•°ã‹ã‚‰
    - files      # ãƒ•ã‚¡ã‚¤ãƒ«å…¥åŠ›ã‚’å‚ç…§
    - 0          # æœ€åˆã®ãƒ•ã‚¡ã‚¤ãƒ«
    - transfer_method
    - remote_url # URLã‹ã‚‰ç”»åƒã‚’å–å¾—

# ã¾ãŸã¯ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®å ´åˆï¼‰
vision:
  enabled: true
  variable_selector:
    - sys
    - files
    - 0
    - transfer_method
    - local_file
```

**é‡è¦ãªæ³¨æ„ç‚¹ï¼š**
- vision.enabled: trueã®å ´åˆã€vision.variable_selectorã¯å¿…é ˆ
- ç©ºé…åˆ—[]ã®ã¾ã¾ã§ã¯ç”»åƒã‚’å—ã‘å–ã‚Œãªã„
- sys.filesã‚’å‚ç…§ã™ã‚‹å ´åˆã¯ã€features.file_uploadã‚‚é©åˆ‡ã«è¨­å®šã™ã‚‹ã“ã¨

## 2. YAMLãƒ•ã‚¡ã‚¤ãƒ«åŸºæœ¬æ§‹é€ 

### 2.1 å¿…é ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³æ§‹æˆï¼ˆæœ€é‡è¦ï¼‰

**è‡´å‘½çš„ã‚¨ãƒ©ãƒ¼é˜²æ­¢ã®ãŸã‚ã®çµ¶å¯¾ãƒ«ãƒ¼ãƒ«ï¼š**
ä»¥ä¸‹ã®æ§‹é€ ã‚’å³å¯†ã«å®ˆã£ã¦ãã ã•ã„ã€‚ä¸€ã¤ã§ã‚‚æ¬ ã‘ã‚‹ã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã—ã¾ã™ã€‚

```yaml
# æœ€ä¸Šä½ãƒ¬ãƒ™ãƒ«ï¼ˆé †åºã‚‚é‡è¦ï¼‰
app:                          # 1. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åŸºæœ¬æƒ…å ±
  name: string                # å¿…é ˆ
  description: string         # å¿…é ˆ  
  icon: string                # å¿…é ˆï¼ˆçµµæ–‡å­—ï¼‰
  icon_background: string     # å¿…é ˆï¼ˆ#XXXXXXå½¢å¼ï¼‰
  mode: "advanced-chat"       # å¿…é ˆï¼ˆ"advanced-chat"ã‚’å¼·ãæ¨å¥¨ï¼‰
  use_icon_as_answer_icon: boolean  # å¿…é ˆï¼ˆé€šå¸¸trueï¼‰

dependencies: []              # 2. å¿…é ˆï¼ˆæ¬ è½ã™ã‚‹ã¨ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã€ç©ºé…åˆ—ã§OKï¼‰

kind: "app"                   # 3. å¿…é ˆï¼ˆæ¬ è½ã™ã‚‹ã¨ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã€å›ºå®šå€¤ï¼‰

version: "0.3.0"              # 4. å¿…é ˆï¼ˆå¿…ãš0.3.0ã‚’ä½¿ç”¨ã€ä»–ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ä½¿ç”¨ç¦æ­¢ï¼‰

workflow:                     # 5. ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®šç¾©
  conversation_variables: []  # å¿…é ˆï¼ˆç©ºã§ã‚‚é…åˆ—ã¨ã—ã¦è¨˜è¼‰ï¼‰
  environment_variables: []   # å¿…é ˆï¼ˆç©ºã§ã‚‚é…åˆ—ã¨ã—ã¦è¨˜è¼‰ï¼‰
  features:                   # å¿…é ˆï¼ˆã“ã“ã«é…ç½®ã€æœ€ä¸Šä½ã§ã¯ãªã„ï¼ï¼‰
    # featuresã®å†…å®¹
  graph:                      # å¿…é ˆï¼ˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚°ãƒ©ãƒ•ï¼‰
    nodes: []                 # å¿…é ˆï¼ˆãƒãƒ¼ãƒ‰å®šç¾©ã€é…åˆ—ï¼‰
    edges: []                 # å¿…é ˆï¼ˆãƒãƒ¼ãƒ‰é–“æ¥ç¶šã€é…åˆ—ï¼‰
    viewport:                 # æ¨å¥¨ï¼ˆãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆè¨­å®šï¼‰
      x: 0
      y: 0
      zoom: 0.8
```

**çµ¶å¯¾ã«ã‚„ã£ã¦ã¯ã„ã‘ãªã„ã“ã¨ï¼š**
- âŒ featuresã‚’æœ€ä¸Šä½ã«é…ç½®ã™ã‚‹
- âŒ dependenciesã€kindã€versionã®ã„ãšã‚Œã‹ã‚’çœç•¥ã™ã‚‹
- âŒ app.use_icon_as_answer_iconã‚’çœç•¥ã™ã‚‹

#### 2.1.0 è¨±å¯ã•ã‚Œã‚‹ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆå³æ ¼ç®¡ç†ï¼‰

**å¿…é ˆã®ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼š**
- `app`: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
- `dependencies`: ä¾å­˜é–¢ä¿‚ï¼ˆç©ºé…åˆ—ã§ã‚‚å¿…é ˆï¼‰
- `kind`: "app"å›ºå®š
- `version`: "0.3.0"å›ºå®š
- `workflow`: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®šç¾©

**ç¦æ­¢ã•ã‚Œã‚‹ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼š**
- `main`: ä½¿ç”¨ç¦æ­¢
- `metadata`: ä½¿ç”¨ç¦æ­¢
- `description`: ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã§ã¯ç¦æ­¢ï¼ˆappå†…ã«é…ç½®ï¼‰
- `hash`: è‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹ãŸã‚æ‰‹å‹•è¿½åŠ ç¦æ­¢
- ãã®ä»–ä¸Šè¨˜ãƒªã‚¹ãƒˆã«ãªã„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

### 2.1.1 YAMLãƒ•ã‚¡ã‚¤ãƒ«åŸºæœ¬æ§‹é€ ã®è¦–è¦šçš„ç†è§£

```
YAMLãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ5å±¤æ§‹é€ ï¼‰
â”‚
â”œâ”€ [ç¬¬1å±¤] app:              â† ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
â”‚   â”œâ”€ description
â”‚   â”œâ”€ icon
â”‚   â”œâ”€ icon_background
â”‚   â”œâ”€ mode
â”‚   â”œâ”€ name
â”‚   â””â”€ use_icon_as_answer_icon
â”‚
â”œâ”€ [ç¬¬1å±¤] dependencies: []   â† ä¾å­˜é–¢ä¿‚ï¼ˆå¿…é ˆï¼‰
â”‚
â”œâ”€ [ç¬¬1å±¤] kind: app          â† ç¨®åˆ¥ï¼ˆå¿…é ˆï¼‰
â”‚
â”œâ”€ [ç¬¬1å±¤] version: 0.3.0     â† ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆå¿…é ˆï¼‰
â”‚
â””â”€ [ç¬¬1å±¤] workflow:          â† ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®šç¾©
    â”œâ”€ [ç¬¬2å±¤] conversation_variables: []
    â”œâ”€ [ç¬¬2å±¤] environment_variables: []
    â”œâ”€ [ç¬¬2å±¤] features:      â† UIæ©Ÿèƒ½è¨­å®š
    â”‚   â”œâ”€ [ç¬¬3å±¤] file_upload:
    â”‚   â”œâ”€ [ç¬¬3å±¤] opening_statement
    â”‚   â””â”€ [ç¬¬3å±¤] ãã®ä»–ã®æ©Ÿèƒ½...
    â””â”€ [ç¬¬2å±¤] graph:         â† ãƒ•ãƒ­ãƒ¼æ§‹é€ 
        â”œâ”€ [ç¬¬3å±¤] edges: []  â† æ¥ç¶šå®šç¾©
        â”‚   â””â”€ [ç¬¬4å±¤] å„ã‚¨ãƒƒã‚¸ã®è©³ç´°
        â”œâ”€ [ç¬¬3å±¤] nodes: []  â† ãƒãƒ¼ãƒ‰å®šç¾©
        â”‚   â””â”€ [ç¬¬4å±¤] å„ãƒãƒ¼ãƒ‰ã®è©³ç´°
        â””â”€ [ç¬¬3å±¤] viewport:  â† è¡¨ç¤ºè¨­å®š
```

### 2.1.2 çµ¶å¯¾ã«çœç•¥ã§ããªã„ã‚»ã‚¯ã‚·ãƒ§ãƒ³
ä»¥ä¸‹ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ä¸€ã¤ã§ã‚‚æ¬ ã‘ã‚‹ã¨ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã®åŸå› ã¨ãªã‚Šã¾ã™ï¼š
- dependencies: []ï¼ˆç©ºã§ã‚‚å¿…é ˆï¼‰
- kind: appï¼ˆå›ºå®šå€¤ã€å¿…é ˆï¼‰
- version: 0.3.0ï¼ˆå›ºå®šå€¤ã€å¿…é ˆï¼‰
- workflow.conversation_variables: []ï¼ˆç©ºã§ã‚‚å¿…é ˆï¼‰
- workflow.environment_variables: []ï¼ˆç©ºã§ã‚‚å¿…é ˆï¼‰
- workflow.featuresï¼ˆã™ã¹ã¦ã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å«ã‚€ï¼‰
- app.use_icon_as_answer_iconï¼ˆbooleanå‹ã€å¿…é ˆï¼‰

**è­¦å‘Š**: ã“ã‚Œã‚‰ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒä¸€ã¤ã§ã‚‚æ¬ ã‘ã‚‹ã¨ã€ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ™‚ã«ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã—ã¾ã™ã€‚

### 2.1.3 ã‚¤ãƒ³ãƒãƒ¼ãƒˆå¤±æ•—ã‚’å¼•ãèµ·ã“ã™æ§‹é€ ãƒ‘ã‚¿ãƒ¼ãƒ³

#### ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®èª¤ã‚Š
```yaml
# âŒ é–“é•ã„ï¼šãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã«ç›´æ¥featuresã‚’é…ç½®
features:
  file_upload:
    enabled: false

# âœ… æ­£è§£ï¼šworkflowå†…ã«é…ç½®
workflow:
  features:
    file_upload:
      enabled: false
```

#### appãƒ–ãƒ­ãƒƒã‚¯ã®æ¬ è½
```yaml
# âŒ é–“é•ã„ï¼šappãƒ–ãƒ­ãƒƒã‚¯ãªã—ã§ç›´æ¥ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’é…ç½®
description: "èª¬æ˜"
icon: "ğŸ¤–"
mode: advanced-chat

# âœ… æ­£è§£ï¼šappãƒ–ãƒ­ãƒƒã‚¯å†…ã«é…ç½®
app:
  description: "èª¬æ˜"
  icon: "ğŸ¤–"
  mode: advanced-chat
```

### 2.1.4 å­˜åœ¨ã—ãªã„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆä½¿ç”¨ç¦æ­¢ï¼‰

ä»¥ä¸‹ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯å­˜åœ¨ã—ãªã„ãŸã‚ã€ä½¿ç”¨ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ï¼š

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å | èª¤ç”¨ä¾‹ | æ­£ã—ã„ä½¿ç”¨æ³• |
|------------|--------|-------------|
| fiby_version | `fiby_version: "1.0"` | `version: 0.3.0` |
| edge_name | ã‚¨ãƒƒã‚¸ã«åå‰ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | idãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ä½¿ç”¨ |
| edge_id | `edge_id: "edge1"` | `id: "edge1"` |
| destination_node | `destination_node: "node2"` | `target: "node2"` |
| condition.if | `if: true` | æ¡ä»¶å¼ã¯conditionsé…åˆ—ã§å®šç¾© |

### 2.1.5 çµ¶å¯¾ã«çœç•¥ã§ããªã„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
ä»¥ä¸‹ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ä¸€ã¤ã§ã‚‚æ¬ ã‘ã‚‹ã¨ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã®åŸå› ã¨ãªã‚Šã¾ã™ï¼š
- app.use_icon_as_answer_icon: booleanå‹ã€å¿…é ˆ
- ã‚¨ãƒƒã‚¸ã®data.isInLoop: falseï¼ˆå¿…é ˆã€isInIterationã¯èª¤ã‚Šï¼‰
- ã‚¨ãƒƒã‚¸ã®selected: falseï¼ˆå¿…é ˆï¼‰
- ã‚¨ãƒƒã‚¸ã®zIndex: 0ï¼ˆå¿…é ˆï¼‰

**è­¦å‘Š**: ç‰¹ã«`app.use_icon_as_answer_icon`ã®æ¬ è½ã¯é »ç¹ã«ç™ºç”Ÿã—ã€å³åº§ã«ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã‚’å¼•ãèµ·ã“ã—ã¾ã™ã€‚

### 2.1.6 YAMLã‚³ãƒ¡ãƒ³ãƒˆã«é–¢ã™ã‚‹åˆ¶é™äº‹é …ã€é‡è¦åº¦ï¼šæœ€é«˜ã€‘

**è­¦å‘Šï¼šYAMLã‚³ãƒ¡ãƒ³ãƒˆã¯ã‚¤ãƒ³ãƒãƒ¼ãƒˆæˆåŠŸå¾Œã®ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã®ä¸»è¦åŸå› ã§ã™**

- **çµ¶å¯¾ç¦æ­¢äº‹é …**ï¼š
  - nodesé…åˆ—ã®è¦ç´ å†…ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥ã‚Œãªã„
  - edgesé…åˆ—ã®è¦ç´ å†…ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥ã‚Œãªã„
  - dataæ§‹é€ å†…ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥ã‚Œãªã„
  - é…åˆ—è¦ç´ ã®é–“ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥ã‚Œãªã„
  - æ–‡å­—åˆ—å†…ã® # ã‚‚é¿ã‘ã‚‹ï¼ˆä¾‹: "é …ç›®#1" â†’ "é …ç›®1"ï¼‰
  - ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå†…ã§ã‚‚ # ã®ä½¿ç”¨ã‚’é¿ã‘ã‚‹
  - **é‡è¦**: codeãƒãƒ¼ãƒ‰å†…ã®Pythonã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã«ã‚‚ã‚³ãƒ¡ãƒ³ãƒˆã‚’å«ã‚ãªã„
    - Pythonã‚³ãƒ¼ãƒ‰å†…ã®èª¬æ˜ãŒå¿…è¦ãªå ´åˆã¯ã€å¤‰æ•°åã‚’åˆ†ã‹ã‚Šã‚„ã™ãã™ã‚‹
    - ã©ã†ã—ã¦ã‚‚èª¬æ˜ãŒå¿…è¦ãªå ´åˆã¯ã€ãƒãƒ¼ãƒ‰ã®descãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«è¨˜è¼‰

- **æ¨å¥¨ã•ã‚Œã‚‹ä»£æ›¿æ–¹æ³•**ï¼š
  - ã‚³ãƒ¡ãƒ³ãƒˆã®ä»£ã‚ã‚Šã« description ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æ´»ç”¨
  - ãƒãƒ¼ãƒ‰ã® title ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§èª¬æ˜ã‚’è¨˜è¼‰
  - é–‹ç™ºæ™‚ã®ãƒ¡ãƒ¢ã¯descãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æ´»ç”¨
  - æœ€çµ‚çš„ãªYAMLãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã¯å…¨ã¦ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’å‰Šé™¤
  - ã©ã†ã—ã¦ã‚‚ã‚³ãƒ¡ãƒ³ãƒˆãŒå¿…è¦ãªå ´åˆã¯ã€YAMLãƒ•ã‚¡ã‚¤ãƒ«ã®æœ€ä¸Šéƒ¨ã«ã®ã¿è¨˜è¼‰

#### æ­£ã—ã„ã‚³ãƒ¡ãƒ³ãƒˆã®é…ç½®ä¾‹
```yaml
# ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒãƒ¼ãƒ‰ã®å®šç¾©
nodes:
  - data:
      desc: "èª¬æ˜ã¯descãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ä½¿ç”¨"  # ã“ã“ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥ã‚Œãªã„
      type: start
```

#### é–“é•ã£ãŸä¾‹ï¼ˆã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã®åŸå› ï¼‰
```yaml
nodes:
  - data:
      # ã“ã®ã‚³ãƒ¡ãƒ³ãƒˆã¯ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã‚’å¼•ãèµ·ã“ã™
      type: start
  # ã“ã“ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚‚å±é™º
  - data:
      type: answer
```

```yaml
# codeãƒãƒ¼ãƒ‰å†…ã®Pythonã‚³ãƒ¡ãƒ³ãƒˆã‚‚å±é™º
- data:
    code: |
      # å…¥åŠ›ã‚’è§£æ
      user_input = sys.query
      
      # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
      test_type = "unknown"
```

#### æ­£ã—ã„ä¾‹
```yaml
# ãƒ•ã‚¡ã‚¤ãƒ«æœ€ä¸Šéƒ¨ã®ã‚³ãƒ¡ãƒ³ãƒˆã¯æ¯”è¼ƒçš„å®‰å…¨
nodes:
  - data:
      desc: "é–‹å§‹ãƒãƒ¼ãƒ‰ï¼ˆã‚³ãƒ¡ãƒ³ãƒˆã®ä»£ã‚ã‚Šã«descã‚’ä½¿ç”¨ï¼‰"
      type: start
  - data:
      desc: "å›ç­”ãƒãƒ¼ãƒ‰"
      type: answer
```

```yaml
# codeãƒãƒ¼ãƒ‰ã®æ­£ã—ã„è¨˜è¿°
- data:
    code: |
      user_input = sys.query
      
      test_type = "unknown"
      test_value = ""
    desc: "å…¥åŠ›ã‚’è§£æã—ã¦ãƒ†ã‚¹ãƒˆã‚¿ã‚¤ãƒ—ã¨å€¤ã‚’æŠ½å‡º"
```

### 2.1.7 ä¾å­˜é–¢ä¿‚ï¼ˆdependenciesï¼‰ã®è©³ç´°è¨­å®š

**ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ä½¿ç”¨æ–¹æ³•ï¼š**

```yaml
# ç©ºã®ä¾å­˜é–¢ä¿‚ï¼ˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ç”¨ã—ãªã„å ´åˆï¼‰
dependencies: []

# ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ
dependencies:
  - name: "@langgenius/google-sheets"
    value:
      version: "1.0.0"
```

**é‡è¦ãªæ³¨æ„äº‹é …ï¼š**
- dependenciesã¯æœ€ä¸Šä½ãƒ¬ãƒ™ãƒ«ã«é…ç½®ï¼ˆworkflowã‚„appå†…ã§ã¯ãªã„ï¼‰
- é…åˆ—å½¢å¼ã§è¨˜è¿°
- ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ç”¨ã—ãªã„å ´åˆã§ã‚‚ç©ºé…åˆ— `[]` ã¨ã—ã¦å¿…é ˆ
- å„ä¾å­˜é–¢ä¿‚ã«ã¯ `name` ã¨ `value` ãŒå¿…è¦
- `value` ã«ã¯ `version` ã‚’æŒ‡å®š

**Google Sheetsãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ä¾‹ï¼š**
```yaml
dependencies:
  - name: "@langgenius/google-sheets"
    value:
      version: "1.0.0"
```

ã“ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§ã€workflowå†…ã§Google Sheetsæ“ä½œç”¨ã®ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ãƒ‰ãŒåˆ©ç”¨å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

### 2.2 ä¾å­˜é–¢ä¿‚ã®ç®¡ç†
```yaml
# ä¾å­˜é–¢ä¿‚ãŒãªã„å ´åˆï¼ˆå¿…é ˆï¼‰
dependencies: []

# ä¾å­˜é–¢ä¿‚ãŒã‚ã‚‹å ´åˆï¼ˆé€šå¸¸ã¯ä½¿ç”¨ç¦æ­¢ï¼‰
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/openai:0.0.26@xxxxx
```

#### Google Sheetsä½¿ç”¨æ™‚ã®ç‰¹åˆ¥ãªè¨­å®š
Google Sheetsãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€ä»¥ä¸‹ã®è¨­å®šãŒå¿…è¦ã§ã™ï¼š

1. dependenciesè¨­å®šï¼ˆå¿…é ˆï¼‰ï¼š
```yaml
dependencies:
- current_identifier: null
  type: marketplace  # Google Sheetsã®ã¿è¨±å¯
  value:
    marketplace_plugin_unique_identifier: omluc/google_sheets:0.0.2@17f06eaa1d905595e1a76460e7249707a722142353d551cf14aed3d8517c134f
```

2. toolãƒãƒ¼ãƒ‰ã®è¨­å®šï¼š
- provider_type: builtinï¼ˆmarketplaceã§ã¯ãªã„ï¼‰
- provider_id: omluc/google_sheets/google_sheets
- provider_name: omluc/google_sheets/google_sheets

é‡è¦ï¼šdependenciesã§ã¯type: marketplaceã‚’ä½¿ç”¨ã—ã¾ã™ãŒã€toolãƒãƒ¼ãƒ‰ã®provider_typeã¯builtinã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚

**ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãªæ³¨æ„äº‹é …**ï¼š
- `dependencies`ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯çµ¶å¯¾ã«çœç•¥ä¸å¯
- `kind: app`ã¯çµ¶å¯¾ã«çœç•¥ä¸å¯
- `version: 0.3.0`ã¯çµ¶å¯¾ã«çœç•¥ä¸å¯
- ã“ã‚Œã‚‰ãŒ1ã¤ã§ã‚‚æ¬ ã‘ã‚‹ã¨ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã®åŸå› ã¨ãªã‚‹
- dependencies ã¯å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ã™
- ä¾å­˜é–¢ä¿‚ãŒãªã„å ´åˆã¯ç©ºé…åˆ— `[]` ã¨ã—ã¦è¨˜è¼‰
- å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ã—ã¦å®šç¾©ã•ã‚Œã¦ã„ã‚‹é…åˆ—ã¯ã€è¦ç´ ãŒãªã„å ´åˆã§ã‚‚ç©ºé…åˆ—ã¨ã—ã¦è¨˜è¼‰ã™ã‚‹

### 2.3 ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¢ãƒ¼ãƒ‰

#### 2.3.1 æ¨å¥¨ãƒ¢ãƒ¼ãƒ‰
- `advanced-chat`: ãƒãƒ£ãƒƒãƒˆå½¢å¼ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæ¨å¥¨ï¼‰
  - å¯¾è©±å‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
  - featuresã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã®è©³ç´°è¨­å®šãŒå¯èƒ½
  - å®‰å®šæ€§ãŒé«˜ã„

### advanced-chatãƒ¢ãƒ¼ãƒ‰ã®å¿…é ˆæ§‹é€ ï¼ˆå³å¯†ç‰ˆï¼‰

```yaml
workflow:
  conversation_variables: []
  environment_variables: []
  features:              # advanced-chatãƒ¢ãƒ¼ãƒ‰ã§ã¯å¿…é ˆ
    # featuresè¨­å®š
  graph:                 # advanced-chatãƒ¢ãƒ¼ãƒ‰ã§ã¯å¿…é ˆ
    edges: []           # graphå†…ã«é…ç½®
    nodes: []           # graphå†…ã«é…ç½®
    viewport:           # æ¨å¥¨
      x: 0
      y: 0
      zoom: 0.8
```

**é‡è¦**ï¼šadvanced-chatãƒ¢ãƒ¼ãƒ‰ã§ã¯graphã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒå¿…é ˆã§ã™ã€‚edgesã¨nodesã¯å¿…ãšgraphå†…ã«é…ç½®ã—ã¦ãã ã•ã„ã€‚

#### 2.3.2 graphã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®é…ç½®ãƒ«ãƒ¼ãƒ«

**ãƒ¢ãƒ¼ãƒ‰ã«ã‚ˆã‚‹é…ç½®ã®é•ã„ï¼š**

```yaml
# advanced-chatãƒ¢ãƒ¼ãƒ‰ï¼ˆæ¨å¥¨ï¼‰
workflow:
  features:     # å¿…é ˆ
    # UIè¨­å®š
  graph:        # workflowå†…ã®graph
    edges: []   # graphå†…ã«é…ç½®
    nodes: []   # graphå†…ã«é…ç½®

# workflowãƒ¢ãƒ¼ãƒ‰ï¼ˆéæ¨å¥¨ï¼‰
workflow:
  # featuresã‚»ã‚¯ã‚·ãƒ§ãƒ³ãªã—
  edges: []     # workflowç›´ä¸‹ã«é…ç½®
  nodes: []     # workflowç›´ä¸‹ã«é…ç½®
```

**é‡è¦ãªé•ã„ï¼š**
- advanced-chat: workflow â†’ graph â†’ edges/nodes
- workflow: workflow â†’ edges/nodesï¼ˆgraphã‚»ã‚¯ã‚·ãƒ§ãƒ³ãªã—ï¼‰

#### 2.3.3 éæ¨å¥¨ãƒ¢ãƒ¼ãƒ‰
- `workflow`: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å½¢å¼ï¼ˆé«˜åº¦ãªç”¨é€”å‘ã‘ã€æ³¨æ„ãŒå¿…è¦ï¼‰
  - æ§‹é€ ãŒç•°ãªã‚‹ãŸã‚æ³¨æ„
  - featuresã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒå­˜åœ¨ã—ãªã„
  - edgesã¨nodesãŒworkflowç›´ä¸‹ã«é…ç½®ã•ã‚Œã‚‹
  - ã‚¤ãƒ³ãƒãƒ¼ãƒˆå¾Œã®ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãƒªã‚¹ã‚¯ãŒã‚ã‚‹
- `completion`: è£œå®Œå½¢å¼ï¼ˆãƒ¬ã‚¬ã‚·ãƒ¼ï¼‰

**é‡è¦**: workflowãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€ä»¥ä¸‹ã®ç‚¹ã«æ³¨æ„ï¼š
- featuresã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒå­˜åœ¨ã—ãªã„
- edgesã¨nodesãŒworkflowç›´ä¸‹ã«é…ç½®ã•ã‚Œã‚‹
- ã‚¤ãƒ³ãƒãƒ¼ãƒˆå¾Œã®ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãƒªã‚¹ã‚¯ãŒã‚ã‚‹
- ç‰¹åˆ¥ãªç†ç”±ãŒãªã„é™ã‚Šã€advanced-chatãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„

## 3. å‘½åè¦å‰‡

### 3.1 å…¨ä½“çš„ãªå‘½ååŸå‰‡
- **è¨€èª**: è‹±èªï¼ˆsnake_caseï¼‰ã‚’åŸºæœ¬ã¨ã™ã‚‹
- **æ˜ç¢ºæ€§**: æ©Ÿèƒ½ã‚’æ˜ç¢ºã«è¡¨ã™åå‰ã‚’ä½¿ç”¨
- **ä¸€è²«æ€§**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã§çµ±ä¸€ã•ã‚ŒãŸå‘½åè¦å‰‡

### 3.2 å„è¦ç´ ã®å‘½åè¦å‰‡
| è¦ç´  | è¦å‰‡ | ä¾‹ |
|------|------|------|
| ãƒãƒ¼ãƒ‰ID | snake_case + _node | start_node, ocr_analysis_node |
| ã‚¨ãƒƒã‚¸ID | æ¥ç¶šå…ƒ-æ¥ç¶šå…ˆ-edge | start-classification-edge |
| å¤‰æ•°å | snake_case | user_input, file_content |
| ã‚¢ãƒ—ãƒªå | æ—¥æœ¬èªå¯ | ãƒ­ãƒ¼ãƒ³å¯©æŸ»è‡ªå‹•åˆ¤å®šAI |

### 3.5 dependenciesã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®æ­£ã—ã„è¨˜è¿°

#### Google Sheetsé€£æºã®å ´åˆ
```yaml
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: omluc/google_sheets:0.0.2@17f06eaa1d905595e1a76460e7249707a722142353d551cf14aed3d8517c134f
```

**é‡è¦:**
- `current_identifier: null` ã¯å¿…é ˆ
- `type: marketplace` ã¯å¿…é ˆ
- `value` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå†…ã« `marketplace_plugin_unique_identifier` ã‚’é…ç½®
- å˜ç´”ãªæ–‡å­—åˆ—å½¢å¼ `- omluc/google_sheets:0.0.2` ã¯ä½¿ç”¨ä¸å¯

## 13. å‹å®šç¾©ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ï¼ˆåŸºæœ¬éƒ¨åˆ†ï¼‰

### 13.1 å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨å‹ã®å¯¾å¿œè¡¨
| ã‚»ã‚¯ã‚·ãƒ§ãƒ³ | å±æ€§ | å‹ | å¿…é ˆ/ä»»æ„ | å‚™è€ƒ |
|-----------|------|-----|----------|------|
| app | description | string | å¿…é ˆ | ã‚¢ãƒ—ãƒªã®èª¬æ˜ |
| app | icon | string | å¿…é ˆ | çµµæ–‡å­—ç­‰ |
| app | icon_background | string | å¿…é ˆ | HEXã‚«ãƒ©ãƒ¼ |
| app | mode | string | å¿…é ˆ | advanced-chatç­‰ |
| app | name | string | å¿…é ˆ | ã‚¢ãƒ—ãƒªå |
| app | use_icon_as_answer_icon | boolean | å¿…é ˆ | | 
| - | dependencies | array | å¿…é ˆ | ç©ºé…åˆ—å¯ |
| - | kind | string | å¿…é ˆ | å›ºå®šå€¤"app" |
| - | version | string | å¿…é ˆ | å›ºå®šå€¤"0.3.0" |
| workflow | conversation_variables | array | å¿…é ˆ | ç©ºé…åˆ—å¯ |
| workflow | environment_variables | array | å¿…é ˆ | ç©ºé…åˆ—å¯ |
| features | opening_statement | string | ä»»æ„ | booleanä¸å¯ã€çœç•¥æ™‚ã¯ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å‰Šé™¤ |
| features | file_upload.enabled | boolean | å¿…é ˆ | |
| features | suggested_questions | array | ä»»æ„ | æ–‡å­—åˆ—ã®é…åˆ— |
| edges.data | sourceType | string | å¿…é ˆ | ãƒãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ— |
| edges.data | targetType | string | å¿…é ˆ | ãƒãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ— |
| edges.data | isInLoop | boolean | å¿…é ˆ | falseå›ºå®š |
| edges | selected | boolean | å¿…é ˆ | falseå›ºå®š |
| edges | zIndex | number | å¿…é ˆ | 0æ¨å¥¨ |
| nodes | height | number | å¿…é ˆ | ãƒãƒ¼ãƒ‰ã®é«˜ã• |
| nodes | width | number | å¿…é ˆ | ãƒãƒ¼ãƒ‰ã®å¹… |
| nodes | positionAbsolute | object | å¿…é ˆ | x,yåº§æ¨™ |
| nodes.data | selected | boolean | å¿…é ˆ | falseå›ºå®š |
| nodes | type | string | å¿…é ˆ | "custom"å›ºå®š |

## 14. æœ€å°æ§‹æˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

### 14.1 ã‚¨ãƒ©ãƒ¼ãŒèµ·ããªã„æœ€å°æ§‹æˆï¼ˆadvanced-chatãƒ¢ãƒ¼ãƒ‰æ¨å¥¨ï¼‰

**ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã‚’é˜²ããŸã‚ã®æœ€å°æ§‹æˆ**
ä»¥ä¸‹ã®ã™ã¹ã¦ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒå¿…é ˆã§ã™ã€‚ä¸€ã¤ã§ã‚‚æ¬ ã‘ã‚‹ã¨ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã—ã¾ã™ã€‚

```yaml
app:
  description: "ã‚¢ãƒ—ãƒªã®èª¬æ˜"  # å¿…é ˆ
  icon: "ğŸ¤–"                  # å¿…é ˆ
  icon_background: "#FFEAD5"  # å¿…é ˆ
  mode: advanced-chat         # å¿…é ˆï¼ˆworkflowã¯é¿ã‘ã‚‹ï¼‰
  name: "ã‚¢ãƒ—ãƒªå"            # å¿…é ˆ
  use_icon_as_answer_icon: false  # å¿…é ˆï¼ˆå¿˜ã‚Œã‚„ã™ã„ï¼‰
  
dependencies: []

kind: app
version: 0.3.0

workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      enabled: false
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
  graph:
    edges:
      - data:
          isInLoop: false
          sourceType: start
          targetType: answer
        id: start-answer-edge
        selected: false
        source: start_node
        sourceHandle: source
        target: answer_node
        targetHandle: target
        type: custom
        zIndex: 0
    nodes:
      - data:
          desc: "é–‹å§‹"
          selected: false
          title: "é–‹å§‹"
          type: start
          variables: []
        height: 54
        id: start_node
        position:
          x: 50
          y: 200
        positionAbsolute:
          x: 50
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "å›ç­”å†…å®¹"
          desc: "å›ç­”"
          selected: false
          title: "å›ç­”"
          type: answer
          variables: []
        height: 107
        id: answer_node
        position:
          x: 350
          y: 200
        positionAbsolute:
          x: 350
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
```

### 14.2 workflowãƒ¢ãƒ¼ãƒ‰ç”¨æœ€å°æ§‹æˆï¼ˆéæ¨å¥¨ï¼‰

**è­¦å‘Š**: workflowãƒ¢ãƒ¼ãƒ‰ã¯é«˜åº¦ãªç”¨é€”å‘ã‘ã§ã™ã€‚é€šå¸¸ã¯advanced-chatãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚

```yaml
app:
  description: "ã‚¢ãƒ—ãƒªã®èª¬æ˜"
  icon: "ğŸ¤–"
  icon_background: "#FFEAD5"
  mode: workflow  # æ³¨æ„ï¼šadvanced-chatã®ä½¿ç”¨ã‚’æ¨å¥¨
  name: "ã‚¢ãƒ—ãƒªå"
  use_icon_as_answer_icon: false  # å¿…é ˆ
  
dependencies: []  # çµ¶å¯¾ã«çœç•¥ä¸å¯

kind: app  # çµ¶å¯¾ã«çœç•¥ä¸å¯
version: 0.3.0  # çµ¶å¯¾ã«çœç•¥ä¸å¯

workflow:
  conversation_variables: []  # workflowãƒ¢ãƒ¼ãƒ‰ã§ã‚‚å¿…é ˆ
  environment_variables: []   # workflowãƒ¢ãƒ¼ãƒ‰ã§ã‚‚å¿…é ˆ
  # æ³¨æ„: workflowãƒ¢ãƒ¼ãƒ‰ã§ã¯featuresã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ä¸è¦
  edges: []  # workflowç›´ä¸‹ã«é…ç½®
  nodes: []  # workflowç›´ä¸‹ã«é…ç½®
```