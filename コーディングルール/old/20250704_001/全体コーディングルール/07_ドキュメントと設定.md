# Dify開発用 全体コーディングルール - ドキュメントと設定

関連ファイル:
- [インデックス](./00_index.md)
- [基本構造とエラー防止](./01_基本構造とエラー防止.md)
- [品質とセキュリティ](./04_品質とセキュリティ.md)
- [トラブルシューティング](./05_トラブルシューティング.md)

## 10. ドキュメント化

### 10.1 アプリケーション説明
- descriptionに具体的な機能説明
- opening_statementで使い方を明確に

### 10.2 suggested_questions
- 実用的な使用例を3-4個提示
- ユーザーが理解しやすい表現

## 15. 開発時の推奨フロー

### 開発前チェックリスト
1. [ ] モード選択は適切か？
   - チャット形式 → advanced-chat（startノード変数は空）
   - フォーム形式 → workflow（startノードに変数定義）
2. [ ] 変数type値は正しいか？
   - "text" → "text-input"に変更
3. [ ] システム変数の使い方を理解しているか？
   - advanced-chat: sys.query使用
   - workflow: start_node.変数名使用

### 基本的な開発フロー
1. **テンプレートから開始**
   - 必ず最小構成テンプレートをコピーしてから開発開始
   - ゼロから書き始めない

2. **段階的な構築**
   - まずadvanced-chatモードで基本動作を確認
   - 必要な場合のみworkflowモードに移行

3. **必須フィールドチェックリスト**
   開発開始時に以下をチェック：
   - [ ] app.use_icon_as_answer_icon
   - [ ] dependencies
   - [ ] kind
   - [ ] version
   - [ ] workflow.conversation_variables
   - [ ] workflow.environment_variables
   - [ ] workflow.features（advanced-chatモードの場合）

4. **インポート前の最終確認**
   - 品質チェックリストの「必須セクション」を再確認
   - YAMLリンターでの構文チェック
   - YAMLファイル内のコメントをすべて削除

## 19. パフォーマンスと拡張性の詳細

### 19.1 ノード数の制限と対策
```
推奨構成:
- 小規模: 10-20ノード（最速）
- 中規模: 20-50ノード（標準）
- 大規模: 50-100ノード（要最適化）
- 超大規模: 100+ノード（分割推奨）
```

### 19.2 パフォーマンス最適化のテクニック
1. **変数の事前計算**
   - 頻繁に使用する値は最初に計算
   - 変数割り当てノードで保存

2. **条件分岐の最適化**
   - 最も可能性の高い条件を先に配置
   - デフォルトケースを活用

3. **LLMコールの削減**
   - 必要最小限のプロンプト
   - 結果の再利用

## 22. デバッグ設定管理

### 22.1 開発時のみ許可される設定
- コード内の一時的なprint文
- descフィールドへのデバッグ情報記載

### 22.2 リリース前必須作業
1. 全print文の削除
2. デバッグ用desc情報のクリーンアップ
3. 不要なコメントアウトコードの削除

## 23. hashフィールドの取り扱い

### 23.1 基本方針
- hashフィールドは自動生成されるため、手動で追加しない
- インポート時はhashフィールドを削除する

### 23.2 処理方法
- エクスポートされたYMLにhashが含まれる場合は削除
- 新規作成時はhashフィールドを含めない