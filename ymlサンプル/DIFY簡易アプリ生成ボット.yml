app:
  description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦ä»¶ã‚’ç›´æ¥å—ã‘å–ã‚Šã€DIFYã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆå¯èƒ½ãªymlãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãƒœãƒƒãƒˆ
  icon: âš¡
  icon_background: '#3B82F6'
  mode: advanced-chat
  name: DIFYç°¡æ˜“ã‚¢ãƒ—ãƒªç”Ÿæˆãƒœãƒƒãƒˆ
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/anthropic:0.0.14@d664a277a0148dc3eb2a9cd73611faca82c48bafcbb87347524a22731c76fdc5
kind: app
version: 0.3.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: 'âš¡ DIFYç°¡æ˜“ã‚¢ãƒ—ãƒªç”Ÿæˆãƒœãƒƒãƒˆ

      ä½œã‚ŠãŸã„ã‚¢ãƒ—ãƒªã®è¦ä»¶ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚ã™ãã«DIFYã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆå¯èƒ½ãªymlãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã„ãŸã—ã¾ã™ï¼

      ä¾‹ï¼šã€Œç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦OCRã§ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡ºã™ã‚‹ã‚¢ãƒ—ãƒªã€ ä¾‹ï¼šã€ŒCSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†æã—ã¦çµæœã‚’è¡¨ç¤ºã™ã‚‹ã‚¢ãƒ—ãƒªã€'
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions:
    - ç”»åƒOCRã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„
    - ãƒ•ã‚¡ã‚¤ãƒ«åˆ†æã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„
    - è³ªç–‘å¿œç­”ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„
    - ç¿»è¨³ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInLoop: false
        sourceType: start
        targetType: llm
      id: start-generation-edge
      selected: false
      source: start_node
      sourceHandle: source
      target: yml_generation_node
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: code
      id: generation-format-edge
      selected: false
      source: yml_generation_node
      sourceHandle: source
      target: yml_formatting_node
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: answer
      id: format-final-edge
      selected: false
      source: yml_formatting_node
      sourceHandle: source
      target: final_yml_answer
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: DIFYã‚¢ãƒ—ãƒªç”Ÿæˆã®é–‹å§‹
        selected: false
        title: é–‹å§‹
        type: start
        variables: []
      height: 82
      id: start_node
      position:
        x: 50
        y: 100
      positionAbsolute:
        x: 50
        y: 100
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦ä»¶ã‹ã‚‰DIFYã‚¢ãƒ—ãƒªã®ymlãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥ç”Ÿæˆ
        model:
          completion_params: {}
          mode: chat
          name: claude-3-7-sonnet-20250219
          provider: langgenius/anthropic/anthropic
        prompt_template:
        - id: system-prompt
          role: system
          text: "ã‚ãªãŸã¯DIFYã‚¢ãƒ—ãƒªã®ymlãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆã®å°‚é–€å®¶ã§ã™ã€‚\nãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦ä»¶ã‚’ã‚‚ã¨ã«ã€DIFYã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆå¯èƒ½ãªymlãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚\n\
            \nå¿…ãšä»¥ä¸‹ã®å½¢å¼ã«å¾“ã£ã¦ãã ã•ã„ï¼š\n\n```yaml\napp:\n  description: [ã‚¢ãƒ—ãƒªã®èª¬æ˜]\n  icon:\
            \ [é©åˆ‡ãªçµµæ–‡å­—]\n  icon_background: '[ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ #ã‹ã‚‰å§‹ã¾ã‚‹6æ¡]'\n  mode: advanced-chat\n\
            \  name: [ã‚¢ãƒ—ãƒªå]\n  use_icon_as_answer_icon: false\ndependencies:\n- current_identifier:\
            \ null\n  type: marketplace\n  value:\n    marketplace_plugin_unique_identifier:\
            \ langgenius/openai:0.0.26@c1e643ac6a7732f6333a783320b4d3026fa5e31d8e7026375b98d44418d33f26\n\
            kind: app\nversion: 0.3.0\nworkflow:\n  conversation_variables: []\n \
            \ environment_variables: []\n  features:\n    file_upload:\n      enabled:\
            \ [true/false]\n      [ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰è¨­å®š]\n    opening_statement: '[ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸]'\n\
            \    suggested_questions: [ææ¡ˆè³ªå•ã®ãƒªã‚¹ãƒˆ]\n  graph:\n    edges: [ã‚¨ãƒƒã‚¸å®šç¾©]\n \
            \   nodes: [ãƒãƒ¼ãƒ‰å®šç¾©]\n```\n\né‡è¦ãªãƒã‚¤ãƒ³ãƒˆï¼š\n- startãƒãƒ¼ãƒ‰ã€llmãƒãƒ¼ãƒ‰ã€answerãƒãƒ¼ãƒ‰ã‚’é©åˆ‡ã«é…ç½®\n\
            - ã‚¨ãƒƒã‚¸ã§æ­£ã—ããƒãƒ¼ãƒ‰ã‚’æ¥ç¶šï¼ˆsource/target, sourceHandle/targetHandleï¼‰\n- variable_selectorã¯æ­£ã—ã„å½¢å¼ã§è¨˜è¿°ï¼ˆ[sys,\
            \ query]ãªã©ï¼‰\n- ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¿…è¦ãªå ´åˆã¯file_uploadè¨­å®šã‚’æœ‰åŠ¹åŒ–\n- ãƒãƒ¼ãƒ‰IDã¯ãƒ¦ãƒ‹ãƒ¼ã‚¯ã«ã™ã‚‹\n- positionåº§æ¨™ã¯é©åˆ‡ã«é…ç½®\n\
            - å®Œå…¨ã«å‹•ä½œã™ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆ\n\nymlãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã‚’å‡ºåŠ›ã—ã€ä½™è¨ˆãªèª¬æ˜ã¯ä¸è¦ã§ã™ã€‚\n"
        - id: user-prompt
          role: user
          text: 'ä»¥ä¸‹ã®è¦ä»¶ã§DIFYã‚¢ãƒ—ãƒªã®ymlãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ï¼š


            {{#sys.query#}}


            å®Œå…¨ãªymlãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚

            '
        selected: false
        structured_output_enabled: false
        title: ymlãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ
        type: llm
        variables: []
        vision:
          enabled: false
      height: 134
      id: yml_generation_node
      position:
        x: 350
        y: 100
      positionAbsolute:
        x: 350
        y: 100
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "def main(yml_content: str) -> dict:\n    \"\"\"\n    ç”Ÿæˆã•ã‚ŒãŸymlãƒ•ã‚¡ã‚¤ãƒ«ã®æ•´å½¢ã¨æ¤œè¨¼\n\
          \    \"\"\"\n    from datetime import datetime\n    \n    # ymlã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®æ•´å½¢\n\
          \    formatted_yml = yml_content.strip()\n    \n    # ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³è¨˜æ³•ã‚’é™¤å»\n\
          \    if \"```yaml\" in formatted_yml:\n        formatted_yml = formatted_yml.replace(\"\
          ```yaml\", \"\").replace(\"```\", \"\").strip()\n    elif \"```\" in formatted_yml:\n\
          \        formatted_yml = formatted_yml.replace(\"```\", \"\").strip()\n\
          \    \n    # ãƒ•ã‚¡ã‚¤ãƒ«åã®ç”Ÿæˆ\n    current_date = datetime.now().strftime(\"%Y%m%d_%H%M%S\"\
          )\n    yml_filename = f\"dify_app_{current_date}.yml\"\n    \n    # åŸºæœ¬çš„ãªæ¤œè¨¼\n\
          \    validation_status = \"âœ… æ¤œè¨¼æˆåŠŸ\"\n    validation_details = []\n    \n\
          \    # å¿…é ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ç¢ºèª\n    required_sections = [\"app:\", \"workflow:\", \"\
          graph:\", \"nodes:\", \"edges:\"]\n    for section in required_sections:\n\
          \        if section in formatted_yml:\n            validation_details.append(f\"\
          âœ… {section} ç¢ºèª\")\n        else:\n            validation_details.append(f\"\
          âŒ {section} æœªç™ºè¦‹\")\n            validation_status = \"âš ï¸ æ¤œè¨¼ã‚¨ãƒ©ãƒ¼ã‚ã‚Š\"\n   \
          \ \n    # æ–‡å­—æ•°ã¨ã‚µã‚¤ã‚ºã®è¨ˆç®—\n    line_count = formatted_yml.count('\\n') + 1\n\
          \    char_count = len(formatted_yml)\n    file_size = len(formatted_yml.encode('utf-8'))\n\
          \    \n    validation_report = \"\\n\".join(validation_details)\n    \n\
          \    return {\n        \"formatted_yml\": formatted_yml,\n        \"yml_filename\"\
          : yml_filename,\n        \"validation_status\": validation_status,\n   \
          \     \"validation_report\": validation_report,\n        \"line_count\"\
          : line_count,\n        \"char_count\": char_count,\n        \"file_size\"\
          : file_size\n    }\n"
        code_language: python3
        desc: ymlãƒ•ã‚¡ã‚¤ãƒ«ã®æ•´å½¢ã¨æ¤œè¨¼
        error_strategy: fail-branch
        outputs:
          char_count:
            children: null
            type: number
          file_size:
            children: null
            type: number
          formatted_yml:
            children: null
            type: string
          line_count:
            children: null
            type: number
          validation_report:
            children: null
            type: string
          validation_status:
            children: null
            type: string
          yml_filename:
            children: null
            type: string
        selected: false
        title: ymlæ•´å½¢å‡¦ç†
        type: code
        variables:
        - value_selector:
          - yml_generation_node
          - text
          variable: yml_content
      height: 118
      id: yml_formatting_node
      position:
        x: 650
        y: 100
      positionAbsolute:
        x: 650
        y: 100
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '## âš¡ DIFYã‚¢ãƒ—ãƒªã®ymlãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆå®Œäº†ï¼


          **ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«å**: `{{#yml_formatting_node.yml_filename#}}`

          **ğŸ“Š çµ±è¨ˆæƒ…å ±**: {{#yml_formatting_node.line_count#}}è¡Œ / {{#yml_formatting_node.char_count#}}æ–‡å­—
          / {{#yml_formatting_node.file_size#}}bytes

          **ğŸ” æ¤œè¨¼çŠ¶æ…‹**: {{#yml_formatting_node.validation_status#}}


          ### ğŸ“‹ æ¤œè¨¼ãƒ¬ãƒãƒ¼ãƒˆ

          ```

          {{#yml_formatting_node.validation_report#}}

          ```


          ### ğŸ“„ ç”Ÿæˆã•ã‚ŒãŸymlãƒ•ã‚¡ã‚¤ãƒ«


          ```yaml

          {{#yml_formatting_node.formatted_yml#}}

          ```


          ---


          ## ğŸ“¥ ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ‰‹é †


          1. **ã‚³ãƒ”ãƒ¼**: ä¸Šè¨˜ã®ymlã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å…¨ã¦é¸æŠã—ã¦ã‚³ãƒ”ãƒ¼

          2. **ä¿å­˜**: ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã«è²¼ã‚Šä»˜ã‘ã¦ `.yml` å½¢å¼ã§ä¿å­˜

          3. **ã‚¤ãƒ³ãƒãƒ¼ãƒˆ**: DIFYã®ã€Œã‚¢ãƒ—ãƒªä½œæˆã€â†’ã€ŒDSLãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆã€ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰


          ğŸ‰ **å®Œäº†**: ã‚¢ãƒ—ãƒªãŒæ­£å¸¸ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã€ã™ãã«ä½¿ç”¨é–‹å§‹ã§ãã¾ã™ï¼


          ---


          ğŸ’¡ **ãƒ’ãƒ³ãƒˆ**: åˆ¥ã®ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„å ´åˆã¯ã€æ–°ã—ã„è¦ä»¶ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚ã™ãã«ç”Ÿæˆã„ãŸã—ã¾ã™ï¼

          '
        desc: ''
        selected: true
        title: ymlãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›
        type: answer
        variables: []
      height: 504
      id: final_yml_answer
      position:
        x: 950
        y: 100
      positionAbsolute:
        x: 950
        y: 100
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: 193.10462832561302
      y: 119.44379858130799
      zoom: 0.9404562959203114
