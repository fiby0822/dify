# Dify YMLファイル作成依頼プロンプト

## 要件
Google Sheetsに保存された営業データを読み取り、自動的に分析を行い、分析結果をレポート形式でGoogle Sheetsに書き戻すワークフローを作成してください。

### 機能要件
1. Google Sheetsから営業データ（売上、顧客、商品情報）を読み取る
2. LLMを使用してデータを分析し、以下の観点でレポートを生成：
   - 売上トレンド分析
   - 顧客別売上ランキング
   - 商品カテゴリ別パフォーマンス
   - 改善提案
3. 分析結果をGoogle Sheetsの別シートに整形して書き込む
4. template-transformノードを活用してデータの整形を行う

### 制約事項
- Codeノードは使用しない
- version: 0.3.0を使用
- Google Sheets操作にはomluc/google_sheets:0.0.2を使用
- エラーハンドリングを適切に実装

## アウトプットフォルダパス
/Users/tatsuya/Documents/01_fiby/09_ゼット/Dev/

## 参考資料フォルダパス（あれば）
なし

## コーディングルール
Dify YMLファイルの作成にあたっては、以下のコーディングルールに従ってください：

### 1. 全体コーディングルール
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/全体コーディングルール/ 
の全てのルールを参照してください。

### 2. コンポーネント別コーディングルール
各コンポーネントを使用する際は、/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/コンポーネント別コーディングルール
フォルダ内の使用するコンポーネントについてのtxtファイルを必ず参照してください。

特に以下のファイルを重点的に参照：
- コンポーネント記述ルール_GoogleShpredSheet操作.txt
- コンポーネント記述ルール_LLM.txt
- コンポーネント記述ルール_template_transform.txt

### 3. 品質チェック
YMLファイル作成後は
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/品質チェック/品質チェックリスト.md
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/品質チェック/クラッシュ事項チェックリスト.md
を参照し、必ずセルフレビューを実施してください。チェックに引っかかった場合は、ymlファイルを改修すること。

### template-transformノードに関する重要な注意事項

template-transformノードを使用する場合、以下の記法ルールを必ず守ってください：

1. **変数参照は{{ 変数名 }}形式のみ使用**
   - ❌ 間違い: {{#変数名#}}
   - ✅ 正解: {{ 変数名 }}

2. **フィルター使用時も同様**
   - ❌ 間違い: {{#変数 | trim | tojson#}}
   - ✅ 正解: {{ 変数 | trim | tojson }}

3. **Google Sheetsデータの参照**
   - batch_get出力は配列形式
   - 必ず[0]でアクセス: sheet_data[0].values

これらのルールを守らないと、実行時にクラッシュします。

## テストデータ構成
INPUT!A1:D10に以下の形式でテストデータを想定：
- A列: 日付
- B列: 顧客名
- C列: 商品カテゴリ
- D列: 売上金額

出力先はOUTPUT!A1から開始し、分析レポートを記載する。