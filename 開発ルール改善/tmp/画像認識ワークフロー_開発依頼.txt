# DifyのYML（DSL）ファイル作成依頼

## 開発依頼概要
画像URLを受け取り、LLMのVision機能を使用して画像内容を分析し、OCRと画像分析の結果を構造化して出力する画像認識ワークフローを開発してください。

### 開発要件
- **バージョン**: 0.3.0
- **ノード構成**:
  1. Start（開始）ノード
  2. 画像認識（LLM）ノード - Vision機能を使用
  3. Template Transform ノード - 認識結果の整形
  4. End（終了）ノード

### 機能要件
1. 画像URLを入力として受け取る
2. LLMのVision機能を使用して以下を実行：
   - 画像内のテキストをOCR読み取り
   - 画像内容の詳細な説明
   - 主要なオブジェクトの識別
3. 認識結果に以下の情報を付加：
   - 使用したモデル名
   - 処理日時
   - 画像URL
   - OCR結果（テキストがある場合）
   - 画像内容の説明
4. 整形された結果を出力

### 画像認識ノードの設定
- ノードタイプ: LLM（Custom）
- モデル: gpt-4o（最新版）
- vision.enabled: true（必須）
- detail: high（高精度OCR）
- その他の設定は画像認識コンポーネント記述ルールに従う

### プロンプト例
```
以下の画像を分析してください：

1. 画像内のテキストを全て読み取ってください（OCR）
2. 画像の内容を詳細に説明してください
3. 主要なオブジェクトや要素を識別してください

結果は以下の形式で出力してください：
- OCR結果：[読み取ったテキスト]
- 画像説明：[詳細な説明]
- 主要要素：[識別されたオブジェクト]
```

## 開発ルール

### 必ず参照すべきファイル
1. **全体コーディングルール**
   - `/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/全体コーディングルール.txt`

2. **コンポーネント別コーディングルール**
   - `/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/コンポーネント別コーディングルール/コンポーネント記述ルール_画像認識.txt`

3. **品質チェック関連**（開発後に必ずセルフレビュー）
   - `/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/品質チェック/品質チェックリスト.md`
   - `/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/品質チェック/クラッシュ事項チェックリスト.md`
   - `/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/品質チェック/コードチェック.md`
   - `/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/品質チェック/エラー事例集.md`

### 重要な注意事項
1. **template-transformノードの変数参照**
   - 必ず `{{ 変数名 }}` 形式を使用（`{{#変数名#}}` は絶対に使用しない）
   - 変数参照を間違えると実行時にクラッシュする

2. **Vision機能の設定**
   - vision.enabled: true は必須（これがないとVision機能が動作しない）
   - detail設定でOCR精度を調整可能

3. **YMLファイルの保存先**
   - `/Users/tatsuya/Documents/01_fiby/09_ゼット/Dev/画像認識ワークフロー_[日付].yml`

4. **セルフレビューの実施**
   - YMLファイル作成後、必ず品質チェックリストに基づいてセルフレビューを実施
   - 問題が見つかった場合は修正を行う

## 出力形式
- Dify DSL YML形式（version: 0.3.0）
- ファイル名: 画像認識ワークフロー_[YYYYMMDD].yml