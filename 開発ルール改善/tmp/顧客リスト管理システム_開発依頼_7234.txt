# Dify YMLファイル作成依頼プロンプト

## 要件
Googleスプレッドシートのシート名「顧客リスト」に格納された顧客データを管理するワークフローを作成してください。

### 顧客リストの形式
- 1行目：ヘッダー（顧客名、案件名、金額、ステータス）
- 2行目以降：各顧客のデータ

### 実装する機能
1. **顧客リスト確認機能**
   - 現在の顧客リストの内容を表示
   - 登録されている顧客数を表示
   
2. **新規顧客追加機能**
   - 現在の行数を取得
   - 行数+1行目に新規顧客データを追加
   - 追加する情報：顧客名、案件名、金額、ステータス
   
3. **顧客ステータス更新機能**
   - 顧客名を指定してその行を特定
   - 該当する顧客のステータスを更新

### ユーザー入力パラメータ
- operation_mode: 操作モード（"check"、"add"、"update"）
- sheet_url: GoogleスプレッドシートのURL
- customer_name: 顧客名（新規追加・更新時）
- project_name: 案件名（新規追加時）
- amount: 金額（新規追加時）
- status: ステータス（新規追加・更新時）

### 処理フロー
1. ユーザー入力から操作モードを判定（IF_ELSEノード使用）
2. 各モードに応じた処理を実行：
   - check: batch_getで全データを取得し、整形して表示
   - add: batch_getで現在の行数を確認後、batch_updateで新規行を追加
   - update: batch_getで対象顧客の行を特定後、batch_updateでステータスを更新
3. 処理結果をtemplate-transformで整形して出力

### 技術仕様
- version: 0.3.0 を使用
- Google Sheets操作にはomluc/google_sheets:0.0.2プラグインを使用
- provider_typeは"builtin"を指定
- template-transformノードで出力を整形
- Codeノードは使用しない

## アウトプットフォルダパス
/Users/tatsuya/Documents/01_fiby/09_ゼット/Dev/顧客リスト管理システム_7234.yml

## 参考資料フォルダパス（あれば）
なし

## コーディングルール
Dify YMLファイルの作成にあたっては、以下のコーディングルールに従ってください：

### 1. 全体コーディングルール
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/全体コーディングルール/ 
の全てのルールを参照してください。

### 2. コンポーネント別コーディングルール
各コンポーネントを使用する際は、/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/コンポーネント別コーディングルール
フォルダ内の使用するコンポーネントについてのtxtファイルを必ず参照してください。

### 3. 品質チェック
YMLファイル作成後は
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/品質チェック/品質チェックリスト.md
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/品質チェック/クラッシュ事項チェックリスト.md
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/品質チェック/コードチェック.md
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/品質チェック/エラー事例集.md
を参照し、必ずセルフレビューを実施してください。チェックに引っかかった場合は、ymlファイルを改修すること。

### template-transformノードに関する重要な注意事項

template-transformノードを使用する場合、以下の記法ルールを必ず守ってください：

1. **変数参照は{{ 変数名 }}形式のみ使用**
   - ❌ 間違い: {{#変数名#}}
   - ✅ 正解: {{ 変数名 }}

2. **フィルター使用時も同様**
   - ❌ 間違い: {{#変数 | trim | tojson#}}
   - ✅ 正解: {{ 変数 | trim | tojson }}

3. **Google Sheetsデータの参照**
   - batch_get出力は配列形式
   - 必ず[0]でアクセス: sheet_data[0].values

これらのルールを守らないと、実行時にクラッシュします。