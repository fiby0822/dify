# Dify YMLファイル作成依頼プロンプト

## 要件
トレンド情報収集アシスタントの開発をお願いします。

### 機能概要
- ユーザーからの関心トピックに関する質問を受け付ける
- 質問内容からキーワードを抽出・最適化（LLMノードで実施）
- 最適化されたキーワードでWEB検索を実行し、最新のトレンド情報を取得
- 検索結果を前処理（要約）して、トークン数を削減
- 前処理済みの情報を基に、分かりやすく整理して回答
- version: 0.3.0を使用すること
- **Codeノードは使用しないこと**

### ワークフロー構成
1. スタートノード: ユーザーからの質問を受け取る
2. クエリ最適化ノード（LLM）: 検索キーワードを最適化
3. WEB検索ノード: Tavily Searchを使用して情報検索（トークン数削減設定）
4. 前処理ノード（LLM）: 検索結果を要約・トークン削減
5. 最終分析ノード（LLM）: 整理された情報を基に回答生成
6. エンドノード: 回答をユーザーに返す

### 特記事項
- **改善されたトークン数管理ルールに従う**
  - WEB検索のmax_resultsは3以下に設定
  - include_raw_contentは0（false）に設定
  - 検索結果の前処理を必ず実施
- LLMモデル選択
  - クエリ最適化: gpt-3.5-turbo（軽量処理）
  - 前処理（要約）: gpt-3.5-turbo（トークン削減目的）
  - 最終分析: gpt-4o（高品質な回答生成）
- 検索設定
  - topic: general
  - time_range: week（最新情報を優先）
  - include_answer: 1（要約版を取得）

## アウトプットフォルダパス
/Users/tatsuya/Documents/01_fiby/09_ゼット/Dev/WEB検索

## 参考資料フォルダパス（あれば）
なし

## コーディングルール
Dify YMLファイルの作成にあたっては、以下のコーディングルールに従ってください：

### 1. 全体コーディングルール
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/全体コーディングルール/全体コーディングルール.md を参照してください。

### 2. コンポーネント別コーディングルール
各コンポーネントを使用する際は、/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/コンポーネント別コーディングルール フォルダ内の該当するtxtファイルを参照してください。
特に以下のファイルを重点的に参照：
- コンポーネント記述ルール_WEB検索.txt（改善版・トークン数管理対応）

### 3. 品質チェック
YMLファイル作成後は
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/品質チェック/品質チェックリスト.md
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/品質チェック/クラッシュ事項チェックリスト.md
を参照し、必ずセルフレビューを実施してください。チェックに引っかかった場合は、ymlファイルを改修すること。

### 追加注意事項（重要）
1. **トークン数管理**
   - 検索結果を直接LLMノードに渡さない
   - 必ず前処理ノードでトークン削減を実施
   - max_results: 3以下を厳守

2. **必須フィールド**
   - tool_parametersは必ず辞書形式（type/value）で記述
   - provider_name、tool_labelを忘れずに記載
   - tool_configurationsは空でも必須

3. **YAMLコメント**
   - 絶対にYAMLファイル内にコメントを含めない
   - 説明はdescフィールドを使用