# Dify YMLファイル作成依頼プロンプト

## 要件
IF/ELSEコンポーネントの更新されたコーディングルールが正しく動作するかを検証するためのDify YMLファイルを作成してください。

以下の要素を必ず含めて、更新されたルールの全ての側面をテストしてください：

### 1. 基本的な条件分岐テスト
- 文字列比較（contains、not contains、start with、end with、is、is not、in、not in、all of）
- 数値比較（=、≠、>、<、≥、≤）※Unicode演算子を使用
- NULL/存在チェック（empty、not empty、null、not null、exists、not exists）

### 2. 必須フィールドの検証
- **すべてのノードで外側のtypeが"custom"に設定されていること**
- **data.typeが"if-else"であること**
- **idとcase_idの両方が必ず設定されていること（同じ値）**
- **height、width、positionAbsoluteが設定されていること**
- **data.selected: falseとdata.title、data.descが設定されていること**

### 3. エッジ設定の検証
- **targetTypeには実際のノードタイプ（answer、llm、code等）を指定**
- **isInLoop: false（isInIterationではない）**
- **sourceHandleにはケースのidを使用**

### 4. 複数条件の組み合わせ
- AND条件での複数条件分岐
- OR条件での複数条件分岐
- 条件IDの有無（オプション）

### 5. 分岐パターンの実装
- **独立answer型**：各ケースから直接answerノードへ接続（推奨）
- **集約型**：すべての分岐が1つのノードに集約される設計
- **デフォルト保証型**：falseケースで必ず実行されるデフォルト処理

### 6. エラー防止の検証
- **実行されない分岐のノードを参照しない設計**
- **各分岐で独立した処理を完結させる**
- **YAMLファイル内にコメントを一切含めない**

### 7. 特殊なケースのテスト
- varTypeフィールドの使用（例: "file"）
- 条件の順序による評価（上から順に評価される）
- デフォルトケース（falseハンドル）の適切な処理

### 8. 実際のクラッシュ事例の回避
- YAMLコメントを含めない
- targetTypeにcustomを使用しない
- isInIterationを使用しない

## アウトプットフォルダパス
/Users/tatsuya/Documents/01_fiby/09_ゼット/Dev/IF_ELSE

## 参考資料フォルダパス（あれば）
なし

## コーディングルール
Dify YMLファイルの作成にあたっては、以下のコーディングルールに従ってください：

### 1. 全体コーディングルール
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/全体コーディングルール/全体コーディングルール.md を参照してください。

### 2. コンポーネント別コーディングルール
各コンポーネントを使用する際は、/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/コンポーネント別コーディングルール フォルダ内の該当するtxtファイルを参照してください。
特に今回は「コンポーネント記述ルール_IF_ELSE.txt」を重点的に参照し、更新されたすべてのルールが正しく適用されているか確認してください。

### 3. 品質チェック
YMLファイル作成後は
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/品質チェック/品質チェックリスト.md
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/品質チェック/クラッシュ事項チェックリスト.md
を参照し、必ずセルフレビューを実施してください。

### 4. 特に注意すべき更新点
- **外側のtype属性は必ず"custom"（data.typeとは異なる）**
- **case_idフィールドは必須（idと同じ値を設定）**
- **数値比較にはUnicode演算子を使用（"≥"、"≤"、"≠"）**
- **エッジのtargetTypeには実際のノードタイプを指定**
- **YAMLファイル内にコメントを一切含めない**
- **実行されない分岐のノードを参照しない**
- **height、width、positionAbsoluteは必須**
- **advanced-chatモードではgraphセクションを使用**