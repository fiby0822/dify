# Dify YMLファイル作成依頼プロンプト

## 要件
顧客の購買履歴を分析し、適切なマーケティング施策を提案するチャットボットを作成してください。

### 機能詳細
1. **顧客データの分析**
   - 累計購入金額を分析
   - 購入回数を評価
   - 最終購入日からの経過日数を確認

2. **顧客セグメンテーション（IF/ELSE条件分岐）**
   - VIP顧客：累計購入金額 ≥ 100万円 AND 購入回数 ≥ 20回
   - 優良顧客：累計購入金額 ≥ 50万円 OR 購入回数 ≥ 10回
   - 休眠顧客：最終購入日 > 180日
   - 通常顧客：上記以外

3. **施策提案**
   - 各セグメントに応じた最適なマーケティング施策を提案
   - 具体的なアクション項目を提示

### 技術要件
- advanced-chatモードを使用
- IF/ELSEコンポーネントを中心に実装
- 複数の条件分岐を適切に配置
- Unicode演算子（≥、≤、≠）を正しく使用
- case_idを全てのケースに設定
- エッジのtargetTypeに実際のノードタイプを使用

### 入力
ユーザーから以下の情報を受け取る：
- 顧客ID（テスト用）
- 累計購入金額
- 購入回数
- 最終購入日

### 出力
- 顧客セグメント
- 推奨施策
- 具体的なアクション項目

## アウトプットフォルダパス
/Users/tatsuya/Documents/01_fiby/09_ゼット/Dev/IF_ELSE

## 参考資料フォルダパス（あれば）
なし

## コーディングルール
Dify YMLファイルの作成にあたっては、以下のコーディングルールに従ってください：

### 1. 全体コーディングルール
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/全体コーディングルール/全体コーディングルール.md を参照してください。

特に以下の点に注意：
- version: 0.3.0を使用（0.1.0や他のバージョンは使用しない）
- app.use_icon_as_answer_iconを必ず設定
- YAMLファイル内にコメント（#）を一切含めない
- エッジのdata.isInLoopをfalseに設定（isInIterationは使用しない）
- 基本的な5層構造（app/dependencies/kind/version/workflow）を遵守

### 2. コンポーネント別コーディングルール
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/コンポーネント別コーディングルール/コンポーネント記述ルール_IF_ELSE.txt を必ず参照してください。

特に以下の点に注意：
- 各ケースにidとcase_idの両方を設定（同じ値）
- 比較演算子でUnicode文字を使用（"≥"、"≤"、"≠"）
- 外側のtype属性は"custom"、data.typeが"if-else"
- エッジのsourceHandleにはケースのidを使用
- targetTypeには接続先ノードの実際のdata.typeを指定

### 3. 品質チェック
YMLファイル作成後は
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/品質チェック/品質チェックリスト.md
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/品質チェック/クラッシュ事項チェックリスト.md
を参照し、必ずセルフレビューを実施してください。チェックに引っかかった場合は、ymlファイルを改修すること。

### 4. 追加の注意事項
- 条件式を文字列で記述しない（conditions配列形式を使用）
- 実行されない可能性があるノードの変数を参照しない
- 各分岐で独立したanswerノードを使用することを推奨