# Dify YMLファイル作成依頼プロンプト

## 要件
最新のLLMコンポーネントルール（特にadvanced-chatモードの仕様）が正しく動作するかを検証するためのDifyアプリケーションを作成してください。

以下の機能を持つアプリケーションを作成：
1. **advanced-chatモード**を使用したチャットボット
2. ユーザーからの質問に対して、丁寧に回答する
3. 回答の前に質問内容を分析し、より適切な回答を生成する2段階処理

### 技術要件（最新ルールに基づく）
#### 必須要件
- app.mode は「advanced-chat」を使用
- **startノードのvariables配列は必ず空配列[]にすること**（最重要）
- ユーザー入力は`{{#sys.query#}}`で参照すること（start_node.変数名は使用しない）
- 外側のtype属性は必ず"custom"に設定すること
- すべての必須セクション（dependencies、kind、version等）を含めること

#### LLMノード設定
- providerは"openai"（シンプルな形式）
- contextフィールドを含める（推奨）
- memoryフィールドはfalseに設定
- structured_output_enabled、vision.enabledは必須
- variablesフィールドは省略可能

#### 避けるべきこと
- startノードに変数を定義しない（advanced-chatモードでは自動管理）
- type: "text"などの無効な変数タイプを使用しない
- YAMLファイル内にコメントを含めない

## アウトプットフォルダパス
/Users/tatsuya/Documents/01_fiby/09_ゼット/Dev/LLM

## 参考資料フォルダパス（あれば）
特になし

## コーディングルール
Dify YMLファイルの作成にあたっては、以下のコーディングルールに従ってください：

### 1. 全体コーディングルール
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/全体コーディングルール/全体コーディングルール.md を参照してください。
特に重要な点：
- advanced-chatモードでのstartノード設定（4.6.1節）
- システム変数の使用方法（16節）
- モード別ベストプラクティス（17節）

### 2. コンポーネント別コーディングルール
各コンポーネントを使用する際は、/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/コンポーネント別コーディングルール フォルダ内の該当するtxtファイルを参照してください。
特に、コンポーネント記述ルール_LLM.txt の「advanced-chatモードでの注意事項」セクションを重点的に確認してください。

### 3. 品質チェック
YMLファイル作成後は、/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/品質チェック/品質チェックリスト.md を参照し、必ずセルフレビューを実施してください。
特に以下の点を確認：
- 4.1節: startノードのvariablesが空配列であること
- 10.3.4節: 動作エラー診断の確認事項
- 12節: モード別ベストプラクティスガイド

### 特別な検証ポイント
- startノードのvariables配列が[]（空）になっているか
- LLMノードでユーザー入力を{{#sys.query#}}で参照しているか
- すべてのノードの外側type属性が"custom"になっているか
- 必須フィールドがすべて含まれているか