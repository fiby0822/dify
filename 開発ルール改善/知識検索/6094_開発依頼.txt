# Dify YMLファイル作成依頼プロンプト

## 要件
knowledge-retrievalノードの動作検証のため、質問カテゴリーに応じて適切なナレッジベースを検索し、回答を提供するスマートFAQシステムのDifyワークフローを作成してください。

### 機能要件
1. **質問分析機能**
   - ユーザーからの質問文を分析
   - 質問のカテゴリーを判定（技術質問、製品質問、一般質問）

2. **カテゴリー別分岐（IF_ELSE）**
   - 技術質問：技術ナレッジベースを検索
   - 製品質問：製品ナレッジベースを検索
   - 一般質問：一般FAQナレッジベースを検索

3. **知識検索機能**
   - 各カテゴリーに応じたデータセットから検索
   - single modeとmultiple modeの両方を使用
   - 検索結果の取得

4. **検索結果判定（IF_ELSE）**
   - 検索結果の有無を判定
   - 結果あり：回答を整形して提供
   - 結果なし：代替回答（申し訳ございませんメッセージ）を提供

### 技術的要件
- **Codeノードは使用しない**
- knowledge-retrievalノードを必ず使用
- IF_ELSEノードで分岐処理を実装
- dataset_idsフィールドを使用（datasetsではない）
- query_variable_selectorフィールドを使用（queryではない）
- 各ノードのdata内にselected: falseとdesc: ''を必ず設定
- ノード全体のtypeは"custom"、data.typeは各ノードタイプに応じて設定

### 入出力仕様
- **入力**：ユーザーの質問文（日本語）
- **出力**：
  - 検索結果がある場合：ナレッジベースから取得した回答
  - 検索結果がない場合：丁寧な代替回答メッセージ

### 制約事項
- version: 0.3.0 を必ず使用すること
- YAMLファイル内にコメントを含めない
- positionAbsoluteはpositionと同じ値に設定
- テスト用のダミーデータセットIDを使用

## アウトプットフォルダパス
/Users/tatsuya/Documents/01_fiby/09_ゼット/Dev/知識検索

## 参考資料フォルダパス（あれば）
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/コンポーネント別コーディングルール/コンポーネント記述ルール_知識検索.txt

## コーディングルール
Dify YMLファイルの作成にあたっては、以下のコーディングルールに従ってください：

### 1. 全体コーディングルール
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/全体コーディングルール/全体コーディングルール.md を参照してください。

### 2. コンポーネント別コーディングルール
各コンポーネントを使用する際は、/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/コンポーネント別コーディングルール フォルダ内の該当するtxtファイルを参照してください。
特に、knowledge-retrievalノードについては以下の点に注意：
- dataset_idsフィールドは配列形式で記載
- query_variable_selectorは配列形式（[ノードID, フィールド名]）
- retrieval_modeは"single"または"multiple"
- data内にselected: falseとdesc: ''が必須
- multiple modeの場合はmultiple_retrieval_configを設定

### 3. 品質チェック
YMLファイル作成後は
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/品質チェック/品質チェックリスト.md
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/品質チェック/クラッシュ事項チェックリスト.md
を参照し、必ずセルフレビューを実施してください。チェックに引っかかった場合は、ymlファイルを改修すること。