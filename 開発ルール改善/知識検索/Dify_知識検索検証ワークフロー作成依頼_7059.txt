# Dify YMLファイル作成依頼プロンプト

## 要件
知識検索（knowledge-retrieval）コンポーネントとIF_ELSEコンポーネントの動作検証用ワークフローを開発してください。
企業の製品問い合わせ対応システムとして、問い合わせ内容を分類し、適切な知識ベースから情報を検索して回答します。

### 機能要件
1. **問い合わせ受付機能**
   - ユーザーから製品に関する問い合わせを受け取る
   - 自然言語での入力を想定

2. **問い合わせ分類機能**
   - 入力された問い合わせを以下の3カテゴリーに分類：
     - 技術仕様：製品のスペックや技術的な詳細
     - 価格情報：価格、割引、見積もりに関する問い合わせ
     - 在庫状況：在庫の有無、納期に関する問い合わせ

3. **問い合わせタイプ判定機能（IF_ELSE使用）**
   - 分類結果に基づいて処理を分岐
   - 各タイプに応じて異なる知識ベースを検索

4. **知識検索機能（knowledge-retrieval使用）**
   - 技術仕様：技術仕様データセットを検索（単一検索モード）
   - 価格情報：価格情報データセットを検索（単一検索モード）
   - 在庫状況：在庫・物流データセットを複数検索（複数検索モード、リランキング付き）

5. **回答生成機能**
   - 検索結果を基に適切な回答を生成
   - 検索結果が見つからない場合は、担当部署への問い合わせを案内

### 技術的制約
- **Codeノードは使用しない**こと
- knowledge-retrievalノードの検証が主目的
- IF_ELSEノードも含めて、条件分岐を必ず実装
- 比較演算子はASCII文字（>=、<=、!=）のみ使用
- 独立実行パターンを採用（各分岐が独立して完結）

### knowledge-retrieval検証ポイント
1. dataset_ids（複数形）を正しく使用
2. query_variable_selectorを正しく使用（queryではない）
3. retrieval_modeの設定（single/multiple）
4. multipleモード時のmultiple_retrieval_config設定
5. data内のselected: falseとdesc: ''の設定
6. positionAbsoluteの正しい設定
7. エッジのtargetTypeを"knowledge-retrieval"に設定

### 検証用データセットID（ダミー）
以下のダミーIDを使用してください：
- 技術仕様DB: "7ccfkMYSp7EbvPLfz84xM+MGWesznlJf6laOpWdSR4vOjJa6XZ3W7JdALMg/4IRY"
- 価格情報DB: "8ddglNZTq8FcwQMgz95yN+NHXftzomlKg7mbPqXeTR5wPkJb7YZ4X8KeALNh/5JSZ"
- 在庫状況DB: "9eehMOaUr9GdxRNha06zO+OIYguaplMLh8ncQrYfUS6xQlKc8Za5Y9LfBMOi/6KTa"

## アウトプットフォルダパス
/Users/tatsuya/Documents/01_fiby/09_ゼット/Dev/知識検索

## 参考資料フォルダパス（あれば）
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/コンポーネント別コーディングルール/コンポーネント記述ルール_知識検索.txt

## コーディングルール
Dify YMLファイルの作成にあたっては、以下のコーディングルールに従ってください：

### 1. 全体コーディングルール
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/全体コーディングルール/全体コーディングルール.md を参照してください。

### 2. コンポーネント別コーディングルール
各コンポーネントを使用する際は、/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/コンポーネント別コーディングルール フォルダ内の該当するtxtファイルを参照してください。

### 3. 品質チェック
YMLファイル作成後は
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/品質チェック/品質チェックリスト.md
/Users/tatsuya/Documents/01_fiby/09_ゼット/コーディングルール/品質チェック/クラッシュ事項チェックリスト.md
を参照し、必ずセルフレビューを実施してください。チェックに引っかかった場合は、ymlファイルを改修すること。