app:
  description: ãƒ­ãƒ¼ãƒ³ç”³è¾¼æ›¸ã‚’è‡ªå‹•è§£æã—ã€å¤šæ®µéšå¯©æŸ»ã«ã‚ˆã‚Šæ‰¿èªå¯å¦ã‚’åˆ¤å®šã™ã‚‹é‡‘èAIã‚·ã‚¹ãƒ†ãƒ 
  icon: ğŸ’³
  icon_background: '#059669'
  mode: advanced-chat
  name: ãƒ­ãƒ¼ãƒ³å¯©æŸ»è‡ªå‹•åˆ¤å®šAI
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/openai:0.0.26@c1e643ac6a7732f6333a783320b4d3026fa5e31d8e7026375b98d44418d33f26
kind: app
version: 0.3.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .PDF
      - .DOC
      - .DOCX
      - .TXT
      allowed_file_types:
      - document
      allowed_file_upload_methods:
      - local_file
      enabled: true
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: 'ã“ã‚“ã«ã¡ã¯ï¼ãƒ­ãƒ¼ãƒ³å¯©æŸ»è‡ªå‹•åˆ¤å®šAIã§ã™ã€‚


      ğŸ’¼ ãƒ­ãƒ¼ãƒ³ç”³è¾¼æ›¸ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„

      ğŸ“Š å¯©æŸ»ç¨®åˆ¥ã‚’ãŠé¸ã³ãã ã•ã„


      ä»¥ä¸‹ã®å¯©æŸ»ã‚’è‡ªå‹•å®Ÿè¡Œã—ã¾ã™ï¼š

      âœ… ç”³è¾¼æƒ…å ±ã®è‡ªå‹•æŠ½å‡ºãƒ»æ¤œè¨¼

      ğŸ“ˆ ä¿¡ç”¨ã‚¹ã‚³ã‚¢ã®è‡ªå‹•ç®—å‡º

      ğŸ’° è¿”æ¸ˆèƒ½åŠ›ã®è©³ç´°åˆ†æ

      âš–ï¸ ãƒªã‚¹ã‚¯è©•ä¾¡ãƒ»ç·åˆåˆ¤å®š

      ğŸ“‹ æ‰¿èªå¯å¦ã®æ˜ç¢ºãªçµæœè¡¨ç¤º


      ã€å¯¾å¿œãƒ­ãƒ¼ãƒ³ç¨®åˆ¥ã€‘

      ğŸ  ä½å®…ãƒ­ãƒ¼ãƒ³ / ğŸš— è‡ªå‹•è»Šãƒ­ãƒ¼ãƒ³ / ğŸ’¼ äº‹æ¥­è³‡é‡‘ãƒ­ãƒ¼ãƒ³

      '
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions:
    - ä½å®…ãƒ­ãƒ¼ãƒ³ã®å¯©æŸ»ã‚’ãŠé¡˜ã„ã—ã¾ã™
    - è‡ªå‹•è»Šãƒ­ãƒ¼ãƒ³ã®å¯å¦åˆ¤å®šã‚’ã—ã¦ãã ã•ã„
    - äº‹æ¥­è³‡é‡‘ãƒ­ãƒ¼ãƒ³ã®å¯©æŸ»ã‚’ãŠé¡˜ã„ã—ã¾ã™
    suggested_questions_after_answer:
      enabled: true
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInLoop: false
        sourceType: start
        targetType: if-else
      id: start-filecheck-edge
      selected: false
      source: start_node
      sourceHandle: source
      target: file_check_node
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: answer
      id: filecheck-nofile-edge
      selected: false
      source: file_check_node
      sourceHandle: 'true'
      target: no_file_answer
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: document-extractor
      id: filecheck-extract-edge
      selected: false
      source: file_check_node
      sourceHandle: 'false'
      target: document_extract_node
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: document-extractor
        targetType: parameter-extractor
      id: doc-param-edge
      selected: false
      source: document_extract_node
      sourceHandle: source
      target: data_extract_node
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: parameter-extractor
        targetType: code
      id: param-validation-edge
      selected: false
      source: data_extract_node
      sourceHandle: source
      target: data_validation_node
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: if-else
      id: validation-loantype-edge
      selected: false
      source: data_validation_node
      sourceHandle: source
      target: loan_type_check_node
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: loantype-housing-edge
      selected: false
      source: loan_type_check_node
      sourceHandle: housing_loan
      target: housing_loan_analysis_node
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: loantype-auto-edge
      selected: false
      source: loan_type_check_node
      sourceHandle: auto_loan
      target: auto_loan_analysis_node
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: loantype-business-edge
      selected: false
      source: loan_type_check_node
      sourceHandle: business_loan
      target: business_loan_analysis_node
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: code
      id: housing-scoring-edge
      selected: false
      source: housing_loan_analysis_node
      sourceHandle: source
      target: credit_scoring_node
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: code
      id: auto-scoring-edge
      selected: false
      source: auto_loan_analysis_node
      sourceHandle: source
      target: credit_scoring_node
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: code
      id: business-scoring-edge
      selected: false
      source: business_loan_analysis_node
      sourceHandle: source
      target: credit_scoring_node
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: if-else
      id: scoring-decision-edge
      selected: false
      source: credit_scoring_node
      sourceHandle: source
      target: final_decision_node
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: decision-approved-edge
      selected: false
      source: final_decision_node
      sourceHandle: approved
      target: approval_report_node
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: decision-conditional-edge
      selected: false
      source: final_decision_node
      sourceHandle: conditional
      target: conditional_report_node
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: decision-rejected-edge
      selected: false
      source: final_decision_node
      sourceHandle: rejected
      target: rejection_report_node
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: approved-answer-edge
      selected: false
      source: approval_report_node
      sourceHandle: source
      target: final_answer_node
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: conditional-answer-edge
      selected: false
      source: conditional_report_node
      sourceHandle: source
      target: final_answer_node
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: rejected-answer-edge
      selected: false
      source: rejection_report_node
      sourceHandle: source
      target: final_answer_node
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: 'ãƒ­ãƒ¼ãƒ³ç”³è¾¼æ›¸ã¨å¯©æŸ»ç¨®åˆ¥ã‚’ãŠæ•™ãˆãã ã•ã„ã€‚

          è‡ªå‹•å¯©æŸ»ã«ã‚ˆã‚Šæ‰¿èªå¯å¦ã‚’åˆ¤å®šã„ãŸã—ã¾ã™ã€‚

          '
        selected: false
        title: é–‹å§‹
        type: start
        variables:
        - allowed_file_extensions:
          - .PDF
          - .DOC
          - .DOCX
          - .TXT
          allowed_file_types:
          - document
          allowed_file_upload_methods:
          - local_file
          label: ãƒ­ãƒ¼ãƒ³ç”³è¾¼æ›¸
          max_length: 3
          options: []
          required: true
          type: file
          variable: application_file
        - label: å¯©æŸ»ç¨®åˆ¥
          max_length: 50
          options:
          - ä½å®…ãƒ­ãƒ¼ãƒ³
          - è‡ªå‹•è»Šãƒ­ãƒ¼ãƒ³
          - äº‹æ¥­è³‡é‡‘ãƒ­ãƒ¼ãƒ³
          required: true
          type: select
          variable: loan_type
        - label: å¸Œæœ›å€Ÿå…¥é‡‘é¡ï¼ˆä¸‡å††ï¼‰
          max_length: 20
          options: []
          required: true
          type: text-input
          variable: loan_amount
      height: 218
      id: start_node
      position:
        x: 50
        y: 100
      positionAbsolute:
        x: 50
        y: 100
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: not exists
            id: file_check_condition
            value: ''
            varType: file
            variable_selector:
            - start_node
            - application_file
          id: 'true'
          logical_operator: and
        desc: ãƒ­ãƒ¼ãƒ³ç”³è¾¼æ›¸ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®ç¢ºèª
        selected: false
        title: ãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ãƒã‚§ãƒƒã‚¯
        type: if-else
      height: 154
      id: file_check_node
      position:
        x: 350
        y: 100
      positionAbsolute:
        x: 350
        y: 100
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: 'âŒ ãƒ­ãƒ¼ãƒ³ç”³è¾¼æ›¸ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚


          ğŸ“„ ä»¥ä¸‹ã®å½¢å¼ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ï¼š

          â€¢ PDFç”³è¾¼æ›¸ (.pdf)

          â€¢ Wordæ–‡æ›¸ (.doc, .docx)

          â€¢ ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ« (.txt)


          ğŸ’¼ å¯¾å¿œå¯èƒ½ãªç”³è¾¼æ›¸ï¼š

          â€¢ ä½å®…ãƒ­ãƒ¼ãƒ³ç”³è¾¼æ›¸

          â€¢ è‡ªå‹•è»Šãƒ­ãƒ¼ãƒ³ç”³è¾¼æ›¸

          â€¢ äº‹æ¥­è³‡é‡‘ãƒ­ãƒ¼ãƒ³ç”³è¾¼æ›¸

          â€¢ æ‰€å¾—è¨¼æ˜æ›¸ã€æºæ³‰å¾´åç¥¨


          ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¾Œã€å†åº¦å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

          '
        desc: ''
        selected: false
        title: ãƒ•ã‚¡ã‚¤ãƒ«æœªã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
        type: answer
        variables: []
      height: 246
      id: no_file_answer
      position:
        x: 650
        y: 30
      positionAbsolute:
        x: 650
        y: 30
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: PDF/Wordç”³è¾¼æ›¸ã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆã‚’æŠ½å‡º
        is_array_file: false
        selected: false
        title: ç”³è¾¼æ›¸æ–‡æ›¸æŠ½å‡º
        type: document-extractor
        variable_selector:
        - start_node
        - application_file
      height: 120
      id: document_extract_node
      position:
        x: 650
        y: 200
      positionAbsolute:
        x: 650
        y: 200
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ç”³è¾¼æ›¸ã‹ã‚‰æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡º
        instruction: 'ãƒ­ãƒ¼ãƒ³ç”³è¾¼æ›¸ã®æƒ…å ±ã‚’åˆ†æã—ã€ä»¥ä¸‹ã®é …ç›®ã‚’æ­£ç¢ºã«æŠ½å‡ºã—ã¦ãã ã•ã„ã€‚

          é‡‘èå¯©æŸ»ã«å¿…è¦ãªæƒ…å ±ã‚’é‡ç‚¹çš„ã«æŠ½å‡ºã—ã€æ•°å€¤ã¯å˜ä½ã‚‚å«ã‚ã¦è¨˜éŒ²ã—ã¦ãã ã•ã„ã€‚

          '
        model:
          completion_params:
            temperature: 0.05
          mode: chat
          name: gpt-4
          provider: langgenius/openai/openai
        parameters:
        - description: ç”³è¾¼è€…æ°å
          name: applicant_name
          required: false
          type: string
        - description: å¹´é½¢ï¼ˆæ•°å€¤ã®ã¿ï¼‰
          name: age
          required: false
          type: number
        - description: å¹´åï¼ˆä¸‡å††ã€æ•°å€¤ã®ã¿ï¼‰
          name: annual_income
          required: false
          type: number
        - description: å‹¤å‹™å…ˆä¼æ¥­å
          name: employer
          required: false
          type: string
        - description: å‹¤ç¶šå¹´æ•°ï¼ˆå¹´ã€æ•°å€¤ã®ã¿ï¼‰
          name: employment_years
          required: false
          type: number
        - description: é›‡ç”¨å½¢æ…‹ï¼ˆæ­£ç¤¾å“¡/å¥‘ç´„ç¤¾å“¡/æ´¾é£/è‡ªå–¶æ¥­ç­‰ï¼‰
          name: employment_type
          required: false
          type: string
        - description: æ—¢å­˜å€Ÿå…¥é¡ï¼ˆä¸‡å††ã€æ•°å€¤ã®ã¿ï¼‰
          name: existing_debt
          required: false
          type: number
        - description: æœˆåï¼ˆä¸‡å††ã€æ•°å€¤ã®ã¿ï¼‰
          name: monthly_income
          required: false
          type: number
        - description: å®¶æ—æ§‹æˆï¼ˆé…å¶è€…æœ‰ç„¡ã€æ‰¶é¤Šå®¶æ—æ•°ï¼‰
          name: family_status
          required: false
          type: string
        - description: å±…ä½å½¢æ…‹ï¼ˆæŒå®¶/è³ƒè²¸/ãã®ä»–ï¼‰
          name: housing_status
          required: false
          type: string
        - description: æ‹…ä¿ã®æœ‰ç„¡ï¼ˆæœ‰/ç„¡ï¼‰
          name: collateral
          required: false
          type: string
        query:
        - document_extract_node
        - text
        reasoning_mode: prompt
        selected: false
        title: ç”³è¾¼æƒ…å ±æŠ½å‡º
        type: parameter-extractor
        variables: []
        vision:
          enabled: false
      height: 118
      id: data_extract_node
      position:
        x: 950
        y: 150
      positionAbsolute:
        x: 950
        y: 150
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "def main(applicant_name: str, age: int, annual_income: int, monthly_income:\
          \ int,\n         employment_years: int, employment_type: str, existing_debt:\
          \ int,\n         loan_amount: str, loan_type: str) -> dict:\n    \"\"\"\n\
          \    ç”³è¾¼ãƒ‡ãƒ¼ã‚¿ã®å¦¥å½“æ€§æ¤œè¨¼ã¨ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°\n    \"\"\"\n    \n    # å¸Œæœ›å€Ÿå…¥é‡‘é¡ã®æ•°å€¤åŒ–\n    try:\n\
          \        loan_amount_num = float(str(loan_amount).replace('ä¸‡å††', '').replace(',',\
          \ ''))\n    except:\n        loan_amount_num = 0\n    \n    # ãƒ‡ãƒ¼ã‚¿å¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯\n\
          \    validation_errors = []\n    \n    # å¿…é ˆé …ç›®ãƒã‚§ãƒƒã‚¯\n    if not applicant_name\
          \ or applicant_name == \"ä¸æ˜\":\n        validation_errors.append(\"ç”³è¾¼è€…æ°åãŒä¸æ˜\"\
          )\n    \n    if not age or age <= 0 or age > 100:\n        validation_errors.append(\"\
          å¹´é½¢æƒ…å ±ãŒä¸æ­£\")\n    \n    if not annual_income or annual_income <= 0:\n    \
          \    validation_errors.append(\"å¹´åæƒ…å ±ãŒä¸æ˜ã¾ãŸã¯ä¸æ­£\")\n    \n    # å¹´åã¨æœˆåã®æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯\n\
          \    if annual_income and monthly_income:\n        expected_monthly = annual_income\
          \ / 12\n        if abs(monthly_income - expected_monthly) > expected_monthly\
          \ * 0.5:\n            validation_errors.append(\"å¹´åã¨æœˆåã®æ•´åˆæ€§ã«å•é¡Œ\")\n    \n\
          \    # è¿”æ¸ˆæ¯”ç‡ã®è¨ˆç®—\n    if annual_income > 0 and loan_amount_num > 0:\n    \
          \    # ç°¡æ˜“è¿”æ¸ˆæ¯”ç‡è¨ˆç®—ï¼ˆé‡‘åˆ©3%ã€35å¹´è¿”æ¸ˆã¨ä»®å®šï¼‰\n        monthly_payment = loan_amount_num\
          \ * 10000 * 0.03 / 12 * 1.2  # æ¦‚ç®—\n        monthly_income_calc = annual_income\
          \ / 12\n        payment_ratio = (monthly_payment / (monthly_income_calc\
          \ * 10000)) * 100\n    else:\n        payment_ratio = 0\n    \n    # ä¿¡ç”¨ãƒªã‚¹ã‚¯è¦å› ã®ç‰¹å®š\n\
          \    risk_factors = []\n    \n    if existing_debt and existing_debt > annual_income\
          \ * 0.3:\n        risk_factors.append(\"æ—¢å­˜å€Ÿå…¥ãŒå¹´åã®30%è¶…\")\n    \n    if employment_years\
          \ and employment_years < 1:\n        risk_factors.append(\"å‹¤ç¶šå¹´æ•°1å¹´æœªæº€\")\n\
          \    \n    if employment_type and employment_type in [\"æ´¾é£\", \"å¥‘ç´„ç¤¾å“¡\",\
          \ \"ã‚¢ãƒ«ãƒã‚¤ãƒˆ\"]:\n        risk_factors.append(\"éæ­£è¦é›‡ç”¨\")\n    \n    if payment_ratio\
          \ > 35:\n        risk_factors.append(\"è¿”æ¸ˆæ¯”ç‡35%è¶…\")\n    \n    # ç·åˆå¦¥å½“æ€§åˆ¤å®š\n\
          \    if len(validation_errors) == 0:\n        data_quality = \"è‰¯å¥½\"\n  \
          \  elif len(validation_errors) <= 2:\n        data_quality = \"è¦æ³¨æ„\"\n \
          \   else:\n        data_quality = \"ä¸è‰¯\"\n    \n    return {\n        \"\
          validation_errors\": validation_errors,\n        \"risk_factors\": risk_factors,\n\
          \        \"payment_ratio\": round(payment_ratio, 1) if payment_ratio > 0\
          \ else 0,\n        \"loan_amount_processed\": loan_amount_num,\n       \
          \ \"data_quality\": data_quality,\n        \"error_count\": len(validation_errors),\n\
          \        \"risk_count\": len(risk_factors)\n    }\n"
        code_language: python3
        desc: ç”³è¾¼ãƒ‡ãƒ¼ã‚¿ã®å¦¥å½“æ€§æ¤œè¨¼
        error_strategy: fail-branch
        outputs:
          data_quality:
            children: null
            type: string
          error_count:
            children: null
            type: number
          loan_amount_processed:
            children: null
            type: number
          payment_ratio:
            children: null
            type: number
          risk_count:
            children: null
            type: number
          risk_factors:
            children: null
            type: array[string]
          validation_errors:
            children: null
            type: array[string]
        selected: false
        title: ãƒ‡ãƒ¼ã‚¿å¦¥å½“æ€§æ¤œè¨¼
        type: code
        variables:
        - value_selector:
          - data_extract_node
          - applicant_name
          variable: applicant_name
        - value_selector:
          - data_extract_node
          - age
          variable: age
        - value_selector:
          - data_extract_node
          - annual_income
          variable: annual_income
        - value_selector:
          - data_extract_node
          - monthly_income
          variable: monthly_income
        - value_selector:
          - data_extract_node
          - employment_years
          variable: employment_years
        - value_selector:
          - data_extract_node
          - employment_type
          variable: employment_type
        - value_selector:
          - data_extract_node
          - existing_debt
          variable: existing_debt
        - value_selector:
          - start_node
          - loan_amount
          variable: loan_amount
        - value_selector:
          - start_node
          - loan_type
          variable: loan_type
      height: 118
      id: data_validation_node
      position:
        x: 1250
        y: 150
      positionAbsolute:
        x: 1250
        y: 150
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: housing_loan
          conditions:
          - comparison_operator: contains
            id: housing_condition
            value: ä½å®…
            varType: string
            variable_selector:
            - start_node
            - loan_type
          id: housing_loan
          logical_operator: and
        - case_id: auto_loan
          conditions:
          - comparison_operator: contains
            id: auto_condition
            value: è‡ªå‹•è»Š
            varType: string
            variable_selector:
            - start_node
            - loan_type
          id: auto_loan
          logical_operator: and
        - case_id: business_loan
          conditions:
          - comparison_operator: contains
            id: business_condition
            value: äº‹æ¥­
            varType: string
            variable_selector:
            - start_node
            - loan_type
          id: business_loan
          logical_operator: and
        desc: ãƒ­ãƒ¼ãƒ³ç¨®åˆ¥ã«ã‚ˆã‚‹å¯©æŸ»ãƒ«ãƒ¼ãƒˆåˆ†å²
        selected: false
        title: ãƒ­ãƒ¼ãƒ³ç¨®åˆ¥åˆ¤å®š
        type: if-else
      height: 250
      id: loan_type_check_node
      position:
        x: 1550
        y: 100
      positionAbsolute:
        x: 1550
        y: 100
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ä½å®…ãƒ­ãƒ¼ãƒ³å°‚é–€å¯©æŸ»
        model:
          completion_params:
            temperature: 0.2
          mode: chat
          name: gpt-4
          provider: langgenius/openai/openai
        prompt_template:
        - id: system-prompt
          role: system
          text: 'ã‚ãªãŸã¯ä½å®…ãƒ­ãƒ¼ãƒ³å¯©æŸ»ã®å°‚é–€å®¶ã§ã™ã€‚

            ä»¥ä¸‹ã®åŸºæº–ã§è©³ç´°è©•ä¾¡ã‚’è¡Œã£ã¦ãã ã•ã„ï¼š


            ã€ä½å®…ãƒ­ãƒ¼ãƒ³å¯©æŸ»åŸºæº–ã€‘

            1. å¹´ååŸºæº–ï¼šå¹´å400ä¸‡å††ä»¥ä¸Šæ¨å¥¨

            2. è¿”æ¸ˆæ¯”ç‡ï¼šå¹´åã®35%ä»¥å†…

            3. å‹¤ç¶šå¹´æ•°ï¼š2å¹´ä»¥ä¸Šæ¨å¥¨

            4. å¹´é½¢ï¼šå€Ÿå…¥æ™‚70æ­³æœªæº€ã€å®Œæ¸ˆæ™‚80æ­³æœªæº€

            5. é›‡ç”¨å½¢æ…‹ï¼šæ­£ç¤¾å“¡å„ªé‡

            6. æ—¢å­˜å€Ÿå…¥ï¼šå¹´åã®30%ä»¥å†…

            7. æ‹…ä¿ä¾¡å€¤ï¼šèè³‡é¡ã®120%ä»¥ä¸Š


            å„é …ç›®ã‚’â—‹/â–³/Ã—ã§è©•ä¾¡ã—ã€ç·åˆçš„ãªå¯©æŸ»æ„è¦‹ã‚’è¿°ã¹ã¦ãã ã•ã„ã€‚

            '
        - id: user-prompt
          role: user
          text: 'ã€ç”³è¾¼è€…æƒ…å ±ã€‘

            æ°å: {{#data_extract_node.applicant_name#}}

            å¹´é½¢: {{#data_extract_node.age#}}æ­³

            å¹´å: {{#data_extract_node.annual_income#}}ä¸‡å††

            å‹¤å‹™å…ˆ: {{#data_extract_node.employer#}}

            å‹¤ç¶šå¹´æ•°: {{#data_extract_node.employment_years#}}å¹´

            é›‡ç”¨å½¢æ…‹: {{#data_extract_node.employment_type#}}

            æ—¢å­˜å€Ÿå…¥: {{#data_extract_node.existing_debt#}}ä¸‡å††

            å±…ä½å½¢æ…‹: {{#data_extract_node.housing_status#}}

            æ‹…ä¿: {{#data_extract_node.collateral#}}


            ã€å€Ÿå…¥å¸Œæœ›ã€‘

            å¸Œæœ›é¡: {{#data_validation_node.loan_amount_processed#}}ä¸‡å††

            è¿”æ¸ˆæ¯”ç‡: {{#data_validation_node.payment_ratio#}}%


            ã€ãƒ‡ãƒ¼ã‚¿å“è³ªã€‘

            å“è³ª: {{#data_validation_node.data_quality#}}

            ãƒªã‚¹ã‚¯è¦å› æ•°: {{#data_validation_node.risk_count#}}å€‹


            ä½å®…ãƒ­ãƒ¼ãƒ³å¯©æŸ»åŸºæº–ã«åŸºã¥ã„ã¦è©³ç´°è©•ä¾¡ã—ã¦ãã ã•ã„ã€‚

            '
        selected: false
        structured_output_enabled: false
        title: ä½å®…ãƒ­ãƒ¼ãƒ³å¯©æŸ»
        type: llm
        variables: []
        vision:
          enabled: false
      height: 118
      id: housing_loan_analysis_node
      position:
        x: 1850
        y: 30
      positionAbsolute:
        x: 1850
        y: 30
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: è‡ªå‹•è»Šãƒ­ãƒ¼ãƒ³å°‚é–€å¯©æŸ»
        model:
          completion_params:
            temperature: 0.2
          mode: chat
          name: gpt-4
          provider: langgenius/openai/openai
        prompt_template:
        - id: system-prompt
          role: system
          text: 'ã‚ãªãŸã¯è‡ªå‹•è»Šãƒ­ãƒ¼ãƒ³å¯©æŸ»ã®å°‚é–€å®¶ã§ã™ã€‚

            ä»¥ä¸‹ã®åŸºæº–ã§è©³ç´°è©•ä¾¡ã‚’è¡Œã£ã¦ãã ã•ã„ï¼š


            ã€è‡ªå‹•è»Šãƒ­ãƒ¼ãƒ³å¯©æŸ»åŸºæº–ã€‘

            1. å¹´ååŸºæº–ï¼šå¹´å200ä¸‡å††ä»¥ä¸Š

            2. è¿”æ¸ˆæ¯”ç‡ï¼šå¹´åã®30%ä»¥å†…

            3. å‹¤ç¶šå¹´æ•°ï¼š1å¹´ä»¥ä¸Š

            4. å¹´é½¢ï¼šå€Ÿå…¥æ™‚65æ­³æœªæº€ã€å®Œæ¸ˆæ™‚70æ­³æœªæº€

            5. é›‡ç”¨å½¢æ…‹ï¼šå®‰å®šåå…¥é‡è¦–

            6. æ—¢å­˜å€Ÿå…¥ï¼šå¹´åã®40%ä»¥å†…

            7. è»Šä¸¡ä¾¡å€¤ï¼šèè³‡é¡ã®110%ä»¥ä¸Š


            å„é …ç›®ã‚’â—‹/â–³/Ã—ã§è©•ä¾¡ã—ã€ç·åˆçš„ãªå¯©æŸ»æ„è¦‹ã‚’è¿°ã¹ã¦ãã ã•ã„ã€‚

            '
        - id: user-prompt
          role: user
          text: 'ã€ç”³è¾¼è€…æƒ…å ±ã€‘

            æ°å: {{#data_extract_node.applicant_name#}}

            å¹´é½¢: {{#data_extract_node.age#}}æ­³

            å¹´å: {{#data_extract_node.annual_income#}}ä¸‡å††

            å‹¤å‹™å…ˆ: {{#data_extract_node.employer#}}

            å‹¤ç¶šå¹´æ•°: {{#data_extract_node.employment_years#}}å¹´

            é›‡ç”¨å½¢æ…‹: {{#data_extract_node.employment_type#}}

            æ—¢å­˜å€Ÿå…¥: {{#data_extract_node.existing_debt#}}ä¸‡å††


            ã€å€Ÿå…¥å¸Œæœ›ã€‘

            å¸Œæœ›é¡: {{#data_validation_node.loan_amount_processed#}}ä¸‡å††

            è¿”æ¸ˆæ¯”ç‡: {{#data_validation_node.payment_ratio#}}%


            ã€ãƒ‡ãƒ¼ã‚¿å“è³ªã€‘

            å“è³ª: {{#data_validation_node.data_quality#}}

            ãƒªã‚¹ã‚¯è¦å› æ•°: {{#data_validation_node.risk_count#}}å€‹


            è‡ªå‹•è»Šãƒ­ãƒ¼ãƒ³å¯©æŸ»åŸºæº–ã«åŸºã¥ã„ã¦è©³ç´°è©•ä¾¡ã—ã¦ãã ã•ã„ã€‚

            '
        selected: false
        structured_output_enabled: false
        title: è‡ªå‹•è»Šãƒ­ãƒ¼ãƒ³å¯©æŸ»
        type: llm
        variables: []
        vision:
          enabled: false
      height: 118
      id: auto_loan_analysis_node
      position:
        x: 1850
        y: 150
      positionAbsolute:
        x: 1850
        y: 150
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: äº‹æ¥­è³‡é‡‘ãƒ­ãƒ¼ãƒ³å°‚é–€å¯©æŸ»
        model:
          completion_params:
            temperature: 0.2
          mode: chat
          name: gpt-4
          provider: langgenius/openai/openai
        prompt_template:
        - id: system-prompt
          role: system
          text: 'ã‚ãªãŸã¯äº‹æ¥­è³‡é‡‘ãƒ­ãƒ¼ãƒ³å¯©æŸ»ã®å°‚é–€å®¶ã§ã™ã€‚

            ä»¥ä¸‹ã®åŸºæº–ã§è©³ç´°è©•ä¾¡ã‚’è¡Œã£ã¦ãã ã•ã„ï¼š


            ã€äº‹æ¥­è³‡é‡‘ãƒ­ãƒ¼ãƒ³å¯©æŸ»åŸºæº–ã€‘

            1. äº‹æ¥­ç¶™ç¶šå¹´æ•°ï¼š3å¹´ä»¥ä¸Šæ¨å¥¨

            2. å¹´å•†åŸºæº–ï¼šå¹´å•†1000ä¸‡å††ä»¥ä¸Š

            3. åˆ©ç›Šç‡ï¼šå£²ä¸Šã®5%ä»¥ä¸Š

            4. è‡ªå·±è³‡æœ¬æ¯”ç‡ï¼š30%ä»¥ä¸Šæ¨å¥¨

            5. è¿”æ¸ˆæ¯”ç‡ï¼šæœˆå•†ã®20%ä»¥å†…

            6. äº‹æ¥­è¨ˆç”»ã®å¦¥å½“æ€§

            7. æ‹…ä¿ãƒ»ä¿è¨¼ã®å……å®Ÿåº¦


            å„é …ç›®ã‚’â—‹/â–³/Ã—ã§è©•ä¾¡ã—ã€ç·åˆçš„ãªå¯©æŸ»æ„è¦‹ã‚’è¿°ã¹ã¦ãã ã•ã„ã€‚

            '
        - id: user-prompt
          role: user
          text: 'ã€ç”³è¾¼è€…æƒ…å ±ã€‘

            æ°å: {{#data_extract_node.applicant_name#}}

            å¹´é½¢: {{#data_extract_node.age#}}æ­³

            å¹´å: {{#data_extract_node.annual_income#}}ä¸‡å††

            å‹¤å‹™å…ˆ: {{#data_extract_node.employer#}}

            å‹¤ç¶šå¹´æ•°: {{#data_extract_node.employment_years#}}å¹´

            é›‡ç”¨å½¢æ…‹: {{#data_extract_node.employment_type#}}

            æ—¢å­˜å€Ÿå…¥: {{#data_extract_node.existing_debt#}}ä¸‡å††

            æ‹…ä¿: {{#data_extract_node.collateral#}}


            ã€å€Ÿå…¥å¸Œæœ›ã€‘

            å¸Œæœ›é¡: {{#data_validation_node.loan_amount_processed#}}ä¸‡å††

            è¿”æ¸ˆæ¯”ç‡: {{#data_validation_node.payment_ratio#}}%


            ã€ãƒ‡ãƒ¼ã‚¿å“è³ªã€‘

            å“è³ª: {{#data_validation_node.data_quality#}}

            ãƒªã‚¹ã‚¯è¦å› æ•°: {{#data_validation_node.risk_count#}}å€‹


            äº‹æ¥­è³‡é‡‘ãƒ­ãƒ¼ãƒ³å¯©æŸ»åŸºæº–ã«åŸºã¥ã„ã¦è©³ç´°è©•ä¾¡ã—ã¦ãã ã•ã„ã€‚

            '
        selected: false
        structured_output_enabled: false
        title: äº‹æ¥­è³‡é‡‘ãƒ­ãƒ¼ãƒ³å¯©æŸ»
        type: llm
        variables: []
        vision:
          enabled: false
      height: 118
      id: business_loan_analysis_node
      position:
        x: 1850
        y: 270
      positionAbsolute:
        x: 1850
        y: 270
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "def main(analysis_text: str, annual_income: int, loan_amount_processed:\
          \ float,\n         age: int, employment_years: int, existing_debt: int,\
          \ \n         risk_count: int, loan_type: str) -> dict:\n    \"\"\"\n   \
          \ ä¿¡ç”¨ã‚¹ã‚³ã‚¢ç®—å‡ºã¨æœ€çµ‚åˆ¤å®š\n    \"\"\"\n    import re\n    \n    # åŸºæœ¬ã‚¹ã‚³ã‚¢ï¼ˆ100ç‚¹æº€ç‚¹ï¼‰\n \
          \   base_score = 50\n    \n    # å¹´åã‚¹ã‚³ã‚¢ï¼ˆ20ç‚¹æº€ç‚¹ï¼‰\n    if annual_income >= 800:\n\
          \        income_score = 20\n    elif annual_income >= 600:\n        income_score\
          \ = 18\n    elif annual_income >= 400:\n        income_score = 15\n    elif\
          \ annual_income >= 300:\n        income_score = 12\n    elif annual_income\
          \ >= 200:\n        income_score = 8\n    else:\n        income_score = 0\n\
          \    \n    # å¹´é½¢ã‚¹ã‚³ã‚¢ï¼ˆ10ç‚¹æº€ç‚¹ï¼‰\n    if 25 <= age <= 45:\n        age_score =\
          \ 10\n    elif 20 <= age <= 55:\n        age_score = 8\n    elif 18 <= age\
          \ <= 65:\n        age_score = 5\n    else:\n        age_score = 0\n    \n\
          \    # å‹¤ç¶šå¹´æ•°ã‚¹ã‚³ã‚¢ï¼ˆ10ç‚¹æº€ç‚¹ï¼‰\n    if employment_years >= 10:\n        employment_score\
          \ = 10\n    elif employment_years >= 5:\n        employment_score = 8\n\
          \    elif employment_years >= 2:\n        employment_score = 6\n    elif\
          \ employment_years >= 1:\n        employment_score = 3\n    else:\n    \
          \    employment_score = 0\n    \n    # æ—¢å­˜å€Ÿå…¥ã‚¹ã‚³ã‚¢ï¼ˆ10ç‚¹æº€ç‚¹ï¼‰\n    if existing_debt\
          \ == 0:\n        debt_score = 10\n    elif existing_debt <= annual_income\
          \ * 0.1:\n        debt_score = 8\n    elif existing_debt <= annual_income\
          \ * 0.3:\n        debt_score = 5\n    elif existing_debt <= annual_income\
          \ * 0.5:\n        debt_score = 2\n    else:\n        debt_score = 0\n  \
          \  \n    # å¯©æŸ»é …ç›®é©åˆåº¦ã‚¹ã‚³ã‚¢ï¼ˆè©•ä¾¡çµæœã‹ã‚‰â—‹/â–³/Ã—ã‚’ã‚«ã‚¦ãƒ³ãƒˆï¼‰\n    good_count = len(re.findall(r'â—‹',\
          \ analysis_text))\n    fair_count = len(re.findall(r'â–³', analysis_text))\n\
          \    poor_count = len(re.findall(r'Ã—', analysis_text))\n    \n    total_items\
          \ = good_count + fair_count + poor_count\n    if total_items > 0:\n    \
          \    compliance_score = (good_count * 10 + fair_count * 5) / total_items\n\
          \    else:\n        compliance_score = 5\n    \n    # ãƒªã‚¹ã‚¯æ¸›ç‚¹\n    risk_penalty\
          \ = risk_count * 5\n    \n    # ç·åˆã‚¹ã‚³ã‚¢ç®—å‡º\n    total_score = (base_score +\
          \ income_score + age_score + \n                 employment_score + debt_score\
          \ + compliance_score - risk_penalty)\n    total_score = max(0, min(100,\
          \ total_score))  # 0-100ã«åˆ¶é™\n    \n    # ãƒ­ãƒ¼ãƒ³ç¨®åˆ¥ã«ã‚ˆã‚‹æœ€ä½åŸºæº–èª¿æ•´\n    if loan_type\
          \ == \"ä½å®…ãƒ­ãƒ¼ãƒ³\":\n        approval_threshold = 75\n        conditional_threshold\
          \ = 65\n    elif loan_type == \"è‡ªå‹•è»Šãƒ­ãƒ¼ãƒ³\":\n        approval_threshold =\
          \ 70\n        conditional_threshold = 60\n    else:  # äº‹æ¥­è³‡é‡‘ãƒ­ãƒ¼ãƒ³\n       \
          \ approval_threshold = 80\n        conditional_threshold = 70\n    \n  \
          \  # æœ€çµ‚åˆ¤å®š\n    if total_score >= approval_threshold:\n        decision =\
          \ \"æ‰¿èª\"\n        decision_code = \"approved\"\n    elif total_score >=\
          \ conditional_threshold:\n        decision = \"æ¡ä»¶ä»˜æ‰¿èª\"\n        decision_code\
          \ = \"conditional\"\n    else:\n        decision = \"å¦èª\"\n        decision_code\
          \ = \"rejected\"\n    \n    # æ¨å¥¨é‡‘åˆ©è¨­å®š\n    if total_score >= 90:\n      \
          \  recommended_rate = 1.5\n    elif total_score >= 80:\n        recommended_rate\
          \ = 2.0\n    elif total_score >= 70:\n        recommended_rate = 2.5\n \
          \   elif total_score >= 60:\n        recommended_rate = 3.0\n    else:\n\
          \        recommended_rate = 3.5\n    \n    return {\n        \"total_score\"\
          : round(total_score, 1),\n        \"income_score\": income_score,\n    \
          \    \"age_score\": age_score,\n        \"employment_score\": employment_score,\n\
          \        \"debt_score\": debt_score,\n        \"compliance_score\": round(compliance_score,\
          \ 1),\n        \"risk_penalty\": risk_penalty,\n        \"decision\": decision,\n\
          \        \"decision_code\": decision_code,\n        \"recommended_rate\"\
          : recommended_rate,\n        \"good_items\": good_count,\n        \"fair_items\"\
          : fair_count,\n        \"poor_items\": poor_count\n    }\n"
        code_language: python3
        desc: ä¿¡ç”¨ã‚¹ã‚³ã‚¢ç®—å‡ºã¨æœ€çµ‚åˆ¤å®š
        error_strategy: fail-branch
        outputs:
          age_score:
            children: null
            type: number
          compliance_score:
            children: null
            type: number
          debt_score:
            children: null
            type: number
          decision:
            children: null
            type: string
          decision_code:
            children: null
            type: string
          employment_score:
            children: null
            type: number
          fair_items:
            children: null
            type: number
          good_items:
            children: null
            type: number
          income_score:
            children: null
            type: number
          poor_items:
            children: null
            type: number
          recommended_rate:
            children: null
            type: number
          risk_penalty:
            children: null
            type: number
          total_score:
            children: null
            type: number
        selected: false
        title: ä¿¡ç”¨ã‚¹ã‚³ã‚¢ç®—å‡º
        type: code
        variables:
        - value_selector:
          - housing_loan_analysis_node
          - text
          variable: analysis_text
        - value_selector:
          - auto_loan_analysis_node
          - text
          variable: analysis_text
        - value_selector:
          - business_loan_analysis_node
          - text
          variable: analysis_text
        - value_selector:
          - data_extract_node
          - annual_income
          variable: annual_income
        - value_selector:
          - data_validation_node
          - loan_amount_processed
          variable: loan_amount_processed
        - value_selector:
          - data_extract_node
          - age
          variable: age
        - value_selector:
          - data_extract_node
          - employment_years
          variable: employment_years
        - value_selector:
          - data_extract_node
          - existing_debt
          variable: existing_debt
        - value_selector:
          - data_validation_node
          - risk_count
          variable: risk_count
        - value_selector:
          - start_node
          - loan_type
          variable: loan_type
      height: 118
      id: credit_scoring_node
      position:
        x: 2150
        y: 150
      positionAbsolute:
        x: 2150
        y: 150
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: approved
          conditions:
          - comparison_operator: is
            id: approved_condition
            value: approved
            varType: string
            variable_selector:
            - credit_scoring_node
            - decision_code
          id: approved
          logical_operator: and
        - case_id: conditional
          conditions:
          - comparison_operator: is
            id: conditional_condition
            value: conditional
            varType: string
            variable_selector:
            - credit_scoring_node
            - decision_code
          id: conditional
          logical_operator: and
        - case_id: rejected
          conditions:
          - comparison_operator: is
            id: rejected_condition
            value: rejected
            varType: string
            variable_selector:
            - credit_scoring_node
            - decision_code
          id: rejected
          logical_operator: and
        desc: å¯©æŸ»çµæœã«ã‚ˆã‚‹æœ€çµ‚ãƒ¬ãƒãƒ¼ãƒˆåˆ†å²
        selected: false
        title: æœ€çµ‚åˆ¤å®šåˆ†å²
        type: if-else
      height: 250
      id: final_decision_node
      position:
        x: 2450
        y: 100
      positionAbsolute:
        x: 2450
        y: 100
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: æ‰¿èªæ™‚ã®è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
        model:
          completion_params:
            temperature: 0.3
          mode: chat
          name: gpt-4
          provider: langgenius/openai/openai
        prompt_template:
        - id: system-prompt
          role: system
          text: 'ãƒ­ãƒ¼ãƒ³æ‰¿èªæ™‚ã®æ­£å¼ãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

            é‡‘èæ©Ÿé–¢ã®æ‰¿èªé€šçŸ¥æ›¸ã®å½¢å¼ã§ã€æ˜ç¢ºã§åˆ†ã‹ã‚Šã‚„ã™ã„å†…å®¹ã«ã—ã¦ãã ã•ã„ã€‚

            '
        - id: user-prompt
          role: user
          text: 'ã€å¯©æŸ»çµæœã€‘

            åˆ¤å®š: {{#credit_scoring_node.decision#}}

            ä¿¡ç”¨ã‚¹ã‚³ã‚¢: {{#credit_scoring_node.total_score#}}ç‚¹/100ç‚¹

            æ¨å¥¨é‡‘åˆ©: {{#credit_scoring_node.recommended_rate#}}%


            ã€ç”³è¾¼è€…ã€‘

            æ°å: {{#data_extract_node.applicant_name#}}

            å¹´å: {{#data_extract_node.annual_income#}}ä¸‡å††

            å€Ÿå…¥å¸Œæœ›é¡: {{#data_validation_node.loan_amount_processed#}}ä¸‡å††

            ãƒ­ãƒ¼ãƒ³ç¨®åˆ¥: {{#start_node.loan_type#}}


            æ‰¿èªãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚èè³‡æ¡ä»¶ã€è¿”æ¸ˆãƒ—ãƒ©ãƒ³ã€æ³¨æ„äº‹é …ã‚’å«ã‚ã¦ãã ã•ã„ã€‚

            '
        selected: false
        structured_output_enabled: false
        title: æ‰¿èªãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
        type: llm
        variables: []
        vision:
          enabled: false
      height: 118
      id: approval_report_node
      position:
        x: 2750
        y: 30
      positionAbsolute:
        x: 2750
        y: 30
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: æ¡ä»¶ä»˜æ‰¿èªæ™‚ã®ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
        model:
          completion_params:
            temperature: 0.3
          mode: chat
          name: gpt-4
          provider: langgenius/openai/openai
        prompt_template:
        - id: system-prompt
          role: system
          text: 'ãƒ­ãƒ¼ãƒ³æ¡ä»¶ä»˜æ‰¿èªæ™‚ã®ãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

            è¿½åŠ ã§å¿…è¦ãªæ¡ä»¶ã‚„æ›¸é¡ã‚’æ˜ç¢ºã«ç¤ºã—ã¦ãã ã•ã„ã€‚

            '
        - id: user-prompt
          role: user
          text: 'ã€å¯©æŸ»çµæœã€‘

            åˆ¤å®š: {{#credit_scoring_node.decision#}}

            ä¿¡ç”¨ã‚¹ã‚³ã‚¢: {{#credit_scoring_node.total_score#}}ç‚¹/100ç‚¹

            æ¨å¥¨é‡‘åˆ©: {{#credit_scoring_node.recommended_rate#}}%


            ã€ç”³è¾¼è€…ã€‘

            æ°å: {{#data_extract_node.applicant_name#}}

            å¹´å: {{#data_extract_node.annual_income#}}ä¸‡å††

            å€Ÿå…¥å¸Œæœ›é¡: {{#data_validation_node.loan_amount_processed#}}ä¸‡å††

            ãƒ­ãƒ¼ãƒ³ç¨®åˆ¥: {{#start_node.loan_type#}}


            æ¡ä»¶ä»˜æ‰¿èªãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚å¿…è¦ãªè¿½åŠ æ¡ä»¶ã€æ›¸é¡ã€æœŸé™ã‚’æ˜è¨˜ã—ã¦ãã ã•ã„ã€‚

            '
        selected: false
        structured_output_enabled: false
        title: æ¡ä»¶ä»˜æ‰¿èªãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
        type: llm
        variables: []
        vision:
          enabled: false
      height: 118
      id: conditional_report_node
      position:
        x: 2750
        y: 150
      positionAbsolute:
        x: 2750
        y: 150
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: å¦èªæ™‚ã®ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
        model:
          completion_params:
            temperature: 0.3
          mode: chat
          name: gpt-4
          provider: langgenius/openai/openai
        prompt_template:
        - id: system-prompt
          role: system
          text: 'ãƒ­ãƒ¼ãƒ³å¦èªæ™‚ã®ãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

            å¦èªç†ç”±ã‚’ä¸å¯§ã«èª¬æ˜ã—ã€ä»Šå¾Œã®æ”¹å–„ææ¡ˆã‚‚å«ã‚ã¦ãã ã•ã„ã€‚

            '
        - id: user-prompt
          role: user
          text: 'ã€å¯©æŸ»çµæœã€‘

            åˆ¤å®š: {{#credit_scoring_node.decision#}}

            ä¿¡ç”¨ã‚¹ã‚³ã‚¢: {{#credit_scoring_node.total_score#}}ç‚¹/100ç‚¹


            ã€ç”³è¾¼è€…ã€‘

            æ°å: {{#data_extract_node.applicant_name#}}

            å¹´å: {{#data_extract_node.annual_income#}}ä¸‡å††

            å€Ÿå…¥å¸Œæœ›é¡: {{#data_validation_node.loan_amount_processed#}}ä¸‡å††

            ãƒ­ãƒ¼ãƒ³ç¨®åˆ¥: {{#start_node.loan_type#}}


            ã€å•é¡Œç‚¹ã€‘

            ãƒªã‚¹ã‚¯è¦å› : {{#data_validation_node.risk_factors#}}


            å¦èªãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚å…·ä½“çš„ãªç†ç”±ã¨å°†æ¥ã®å†ç”³è«‹ã«å‘ã‘ãŸæ”¹å–„ææ¡ˆã‚’å«ã‚ã¦ãã ã•ã„ã€‚

            '
        selected: false
        structured_output_enabled: false
        title: å¦èªãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
        type: llm
        variables: []
        vision:
          enabled: false
      height: 118
      id: rejection_report_node
      position:
        x: 2750
        y: 270
      positionAbsolute:
        x: 2750
        y: 270
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: "## \U0001F4B3 ãƒ­ãƒ¼ãƒ³å¯©æŸ»çµæœé€šçŸ¥æ›¸\n\n**\U0001F3AF å¯©æŸ»çµæœ: {{#credit_scoring_node.decision#}}**\n\
          **\U0001F4CA ä¿¡ç”¨ã‚¹ã‚³ã‚¢: {{#credit_scoring_node.total_score#}}ç‚¹/100ç‚¹æº€ç‚¹**\n**\U0001F4B0\
          \ æ¨å¥¨é‡‘åˆ©: {{#credit_scoring_node.recommended_rate#}}%**\n\n### \U0001F4CB\
          \ ç”³è¾¼æ¦‚è¦\n- **ç”³è¾¼è€…**: {{#data_extract_node.applicant_name#}} æ§˜\n- **ãƒ­ãƒ¼ãƒ³ç¨®åˆ¥**:\
          \ {{#start_node.loan_type#}}\n- **å¸Œæœ›å€Ÿå…¥é¡**: {{#data_validation_node.loan_amount_processed#}}ä¸‡å††\n\
          - **å¹´å**: {{#data_extract_node.annual_income#}}ä¸‡å††\n\n### \U0001F4CA è©³ç´°ã‚¹ã‚³ã‚¢å†…è¨³\n\
          - \U0001F4B0 å¹´åè©•ä¾¡: {{#credit_scoring_node.income_score#}}ç‚¹/20ç‚¹\n- \U0001F464\
          \ å¹´é½¢è©•ä¾¡: {{#credit_scoring_node.age_score#}}ç‚¹/10ç‚¹  \n- \U0001F3E2 å‹¤ç¶šè©•ä¾¡: {{#credit_scoring_node.employment_score#}}ç‚¹/10ç‚¹\n\
          - \U0001F4B3 å€Ÿå…¥çŠ¶æ³: {{#credit_scoring_node.debt_score#}}ç‚¹/10ç‚¹\n- âœ… é©åˆåº¦è©•ä¾¡:\
          \ {{#credit_scoring_node.compliance_score#}}ç‚¹/10ç‚¹\n- âš ï¸ ãƒªã‚¹ã‚¯æ¸›ç‚¹: -{{#credit_scoring_node.risk_penalty#}}ç‚¹\n\
          \n### \U0001F4C8 å¯©æŸ»é …ç›®è©•ä¾¡\n- âœ… é©åˆé …ç›®: {{#credit_scoring_node.good_items#}}é …ç›®\n\
          - âš ï¸ è¦æ³¨æ„é …ç›®: {{#credit_scoring_node.fair_items#}}é …ç›®\n- âŒ ä¸é©åˆé …ç›®: {{#credit_scoring_node.poor_items#}}é …ç›®\n\
          \n---\n\n{{#approval_report_node.text#}}{{#conditional_report_node.text#}}{{#rejection_report_node.text#}}\n\
          \n---\n\n### \U0001F504 å¯©æŸ»å®Ÿè¡Œãƒ•ãƒ­ãƒ¼\nâœ… ç”³è¾¼æ›¸ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼åˆ¤å®šãƒ»èª­ã¿å–ã‚Š  \nâœ… OCR/æ–‡æ›¸æŠ½å‡ºã«ã‚ˆã‚‹æƒ…å ±æ§‹é€ åŒ–\
          \  \nâœ… Pythonæ¤œè¨¼ã«ã‚ˆã‚‹æ•°å€¤æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯  \nâœ… ãƒ­ãƒ¼ãƒ³ç¨®åˆ¥ã«ã‚ˆã‚‹å°‚é–€å¯©æŸ»åˆ†å²  \nâœ… å¤šé …ç›®ä¿¡ç”¨ã‚¹ã‚³ã‚¢è‡ªå‹•ç®—å‡º  \nâœ… æ‰¿èª/æ¡ä»¶ä»˜/å¦èªã®3æ®µéšåˆ¤å®š\
          \  \nâœ… çµæœåˆ¥è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆå®Œäº†  \n\n### \U0001F4CA ãƒ‡ãƒ¼ã‚¿å“è³ªç¢ºèª\n- **æŠ½å‡ºå“è³ª**: {{#data_validation_node.data_quality#}}\n\
          - **æ¤œè¨¼ã‚¨ãƒ©ãƒ¼**: {{#data_validation_node.error_count#}}ä»¶\n- **ãƒªã‚¹ã‚¯è¦å› **: {{#data_validation_node.risk_count#}}ä»¶\n\
          \n*æœ¬å¯©æŸ»ã¯è‡ªå‹•ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚‹äºˆå‚™åˆ¤å®šã§ã™ã€‚æœ€çµ‚æ±ºå®šã¯äººçš„å¯©æŸ»ã‚’çµŒã¦è¡Œã‚ã‚Œã¾ã™*\n"
        desc: ''
        selected: false
        title: å¯©æŸ»çµæœé€šçŸ¥æ›¸
        type: answer
        variables: []
      height: 984
      id: final_answer_node
      position:
        x: 3050
        y: 150
      positionAbsolute:
        x: 3050
        y: 150
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: 311.00309601807817
      y: 517.8542302389501
      zoom: 0.2503468139278337
