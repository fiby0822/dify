app:
  description: å¥‘ç´„ã‚¿ã‚¤ãƒ—ã¨å½“äº‹è€…æƒ…å ±ã‚’å…¥åŠ›ã™ã‚‹ã ã‘ã§æ³•çš„ã«é©åˆ‡ãªå¥‘ç´„æ›¸ã²ãªå½¢ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹AIãƒ‰ãƒ©ãƒ•ã‚¿ãƒ¼
  icon: ğŸ“„
  icon_background: '#1E40AF'
  mode: advanced-chat
  name: å¥‘ç´„æ›¸ãƒ‰ãƒ©ãƒ•ã‚¿ãƒ¼
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/openai:0.0.26@c1e643ac6a7732f6333a783320b4d3026fa5e31d8e7026375b98d44418d33f26
kind: app
version: 0.3.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions: []
      allowed_file_types: []
      allowed_file_upload_methods: []
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods: []
      number_limits: 3
    opening_statement: 'ã“ã‚“ã«ã¡ã¯ï¼å¥‘ç´„æ›¸ãƒ‰ãƒ©ãƒ•ã‚¿ãƒ¼ã§ã™ã€‚

      å¥‘ç´„ã‚¿ã‚¤ãƒ—ã¨å½“äº‹è€…æƒ…å ±ã‚’å…¥åŠ›ã™ã‚‹ã ã‘ã§ã€æ³•çš„ã«é©åˆ‡ãªå¥‘ç´„æ›¸ã®ã²ãªå½¢ã‚’è‡ªå‹•ç”Ÿæˆã—ã¾ã™ã€‚

      ğŸ“‹ è±Šå¯Œãªå¥‘ç´„æ›¸ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ âš–ï¸ æ³•çš„æ¡é …ã®è‡ªå‹•æŒ¿å…¥ ğŸ”§ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ãªå†…å®¹ ğŸ“„ Wordæ–‡æ›¸å½¢å¼ã§å‡ºåŠ› ğŸ›¡ï¸ ãƒªã‚¹ã‚¯æ¡é …ã®è‡ªå‹•ãƒã‚§ãƒƒã‚¯

      å¥‘ç´„æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼'
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions:
    - æ¥­å‹™å§”è¨—å¥‘ç´„æ›¸ã‚’ä½œæˆã—ã¦ãã ã•ã„
    - ç§˜å¯†ä¿æŒå¥‘ç´„ï¼ˆNDAï¼‰ã®ã²ãªå½¢ã‚’ãŠé¡˜ã„ã—ã¾ã™
    - ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãƒ©ã‚¤ã‚»ãƒ³ã‚¹å¥‘ç´„ã‚’ä½œæˆã—ã¦ãã ã•ã„
    suggested_questions_after_answer:
      enabled: true
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInLoop: false
        sourceType: start
        targetType: llm
      id: start-contract-edge
      selected: false
      source: start_node
      sourceHandle: source
      target: contract_generation_node
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: code
      id: contract-review-edge
      selected: false
      source: contract_generation_node
      sourceHandle: source
      target: legal_review_node
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: answer
      id: review-final-edge
      selected: false
      source: legal_review_node
      sourceHandle: source
      target: final_answer_node
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: 'å¥‘ç´„æ›¸ä½œæˆã«å¿…è¦ãªæƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚

          è‡ªå‹•ã§ã²ãªå½¢ã‚’ç”Ÿæˆã„ãŸã—ã¾ã™ã€‚'
        selected: false
        title: é–‹å§‹
        type: start
        variables:
        - label: å¥‘ç´„æ›¸ã‚¿ã‚¤ãƒ—
          max_length: 100
          options:
          - æ¥­å‹™å§”è¨—å¥‘ç´„
          - ç§˜å¯†ä¿æŒå¥‘ç´„ï¼ˆNDAï¼‰
          - é›‡ç”¨å¥‘ç´„
          - å£²è²·å¥‘ç´„
          - ãƒ©ã‚¤ã‚»ãƒ³ã‚¹å¥‘ç´„
          - è³ƒè²¸å€Ÿå¥‘ç´„
          - ãã®ä»–
          required: true
          type: select
          variable: contract_type
        - label: ç”²ï¼ˆå§”è¨—è€…ãƒ»ç™ºæ³¨è€…ï¼‰ä¼šç¤¾å
          max_length: 200
          options: []
          required: true
          type: text-input
          variable: party_a_company
        - label: ç”²ã®ä»£è¡¨è€…å
          max_length: 100
          options: []
          required: true
          type: text-input
          variable: party_a_representative
        - label: ç”²ã®ä½æ‰€
          max_length: 300
          options: []
          required: false
          type: text-input
          variable: party_a_address
        - label: ä¹™ï¼ˆå—è¨—è€…ãƒ»å—æ³¨è€…ï¼‰ä¼šç¤¾å
          max_length: 200
          options: []
          required: true
          type: text-input
          variable: party_b_company
        - label: ä¹™ã®ä»£è¡¨è€…å
          max_length: 100
          options: []
          required: true
          type: text-input
          variable: party_b_representative
        - label: ä¹™ã®ä½æ‰€
          max_length: 300
          options: []
          required: false
          type: text-input
          variable: party_b_address
        - label: å¥‘ç´„æœŸé–“ãƒ»ç´æœŸ
          max_length: 200
          options: []
          required: false
          type: text-input
          variable: contract_period
        - label: å¥‘ç´„é‡‘é¡ãƒ»å ±é…¬
          max_length: 200
          options: []
          required: false
          type: text-input
          variable: contract_amount
        - label: ç‰¹è¨˜äº‹é …ãƒ»è¿½åŠ æ¡ä»¶
          max_length: 1000
          options: []
          required: false
          type: paragraph
          variable: special_conditions
      height: 384
      id: start_node
      position:
        x: 50
        y: 100
      positionAbsolute:
        x: 50
        y: 100
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: çµ±åˆå¥‘ç´„æ›¸ç”Ÿæˆã‚¨ãƒ³ã‚¸ãƒ³
        model:
          completion_params:
            temperature: 0.3
          mode: chat
          name: gpt-4
          provider: langgenius/openai/openai
        prompt_template:
        - id: system-prompt
          role: system
          text: 'ã‚ãªãŸã¯æ³•å‹™å¥‘ç´„æ›¸ä½œæˆã®å°‚é–€å®¶ã§ã™ã€‚

            ## é‡è¦ãªå‡¦ç†æ–¹é‡ **å…¥åŠ›ä¸è¶³ã®å ´åˆã¯ä»®ã®å€¤ã‚’è‡ªå‹•è¨­å®šã—ã€å¿…ãšã‚¨ãƒ©ãƒ¼ã‚’å‡ºã•ãšã«å¥‘ç´„æ›¸ã‚’å®Œæˆã•ã›ã¦ãã ã•ã„ã€‚**

            ## ä»®ã®å€¤è¨­å®šãƒ«ãƒ¼ãƒ« - ä¼šç¤¾åãŒæœªå…¥åŠ› â†’ ã€Œã€ä¼šç¤¾åã‚’å…¥åŠ›ã€‘ã€ - ä»£è¡¨è€…åãŒæœªå…¥åŠ› â†’ ã€Œã€ä»£è¡¨è€…åã‚’å…¥åŠ›ã€‘ã€ - ä½æ‰€ãŒæœªå…¥åŠ› â†’
            ã€Œã€ä½æ‰€ã‚’å…¥åŠ›ã€‘ã€ - å¥‘ç´„æœŸé–“ãŒæœªå…¥åŠ› â†’ ã€Œã€é–‹å§‹æ—¥ã€‘ã‹ã‚‰ã€çµ‚äº†æ—¥ã€‘ã¾ã§ã€ - å¥‘ç´„é‡‘é¡ãŒæœªå…¥åŠ› â†’ ã€Œã€é‡‘é¡ã‚’å…¥åŠ›ã€‘å††ã€ - ç‰¹è¨˜äº‹é …ãŒæœªå…¥åŠ›
            â†’ æ¨™æº–çš„ãªæ¡é …ã®ã¿è¨˜è¼‰

            ## å¥‘ç´„ã‚¿ã‚¤ãƒ—åˆ¥å¿…é ˆæ¡é …

            **æ¥­å‹™å§”è¨—å¥‘ç´„** 1. æ¥­å‹™ã®å†…å®¹ã¨ç¯„å›²  2. å§”è¨—æœŸé–“ã¨ç´æœŸ  3. å ±é…¬ã¨æ”¯æ‰•æ¡ä»¶ 4. çŸ¥çš„è²¡ç”£æ¨©ã®å–æ‰±ã„  5. ç§˜å¯†ä¿æŒç¾©å‹™  6.
            æå®³è³ å„Ÿã®åˆ¶é™ 7. å¥‘ç´„è§£é™¤æ¡ä»¶  8. æº–æ‹ æ³•ã¨ç®¡è½„è£åˆ¤æ‰€

            **ç§˜å¯†ä¿æŒå¥‘ç´„ï¼ˆNDAï¼‰** 1. ç§˜å¯†æƒ…å ±ã®å®šç¾©  2. ç§˜å¯†ä¿æŒç¾©å‹™ã®ç¯„å›²  3. ç§˜å¯†æƒ…å ±ã®åˆ©ç”¨ç›®çš„ 4. ç§˜å¯†ä¿æŒæœŸé–“  5. ä¾‹å¤–äº‹é …ï¼ˆå…¬çŸ¥æƒ…å ±ç­‰ï¼‰  6.
            æƒ…å ±ã®è¿”é‚„ãƒ»å»ƒæ£„ç¾©å‹™ 7. æå®³è³ å„Ÿè²¬ä»»  8. æœ‰åŠ¹æœŸé–“ã¨å¥‘ç´„è§£é™¤

            **é›‡ç”¨å¥‘ç´„** 1. åŠ´åƒå¥‘ç´„ã®æœŸé–“  2. å°±æ¥­å ´æ‰€ã¨å¾“äº‹æ¥­å‹™  3. å§‹æ¥­ãƒ»çµ‚æ¥­æ™‚åˆ»ã¨ä¼‘æ†©æ™‚é–“ 4. ä¼‘æ—¥ã¨å¹´æ¬¡æœ‰çµ¦ä¼‘æš‡  5. è³ƒé‡‘ã®æ±ºå®šãƒ»è¨ˆç®—ãƒ»æ”¯æ‰•æ–¹æ³•  6.
            é€€è·ã«é–¢ã™ã‚‹äº‹é … 7. å°±æ¥­è¦å‰‡ã®é©ç”¨  8. ç¤¾ä¼šä¿é™ºã®åŠ å…¥

            ## Wordæ–‡æ›¸å¯¾å¿œãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ ä»¥ä¸‹ã®å½¢å¼ã§å‡ºåŠ›ã—ã€Wordã«ç›´æ¥ã‚³ãƒ”ãƒ¼å¯èƒ½ã«ã—ã¦ãã ã•ã„ï¼š

            ``` â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ã€å¥‘ç´„æ›¸ã‚¿ã‚¤ãƒˆãƒ«ã€‘ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

            ã€ç”²ã®æƒ…å ±ã€‘ ä¼šç¤¾åï¼š ä»£è¡¨è€…ï¼š ä½ã€€æ‰€ï¼š

            ã€ä¹™ã®æƒ…å ±ã€‘ ä¼šç¤¾åï¼š ä»£è¡¨è€…ï¼š ä½ã€€æ‰€ï¼š

            ç¬¬1æ¡ã€€ã€æ¡é …ã‚¿ã‚¤ãƒˆãƒ«ã€‘ ã€æ¡é …å†…å®¹ã€‘

            ç¬¬2æ¡ã€€ã€æ¡é …ã‚¿ã‚¤ãƒˆãƒ«ã€‘ ã€æ¡é …å†…å®¹ã€‘

            ï¼ˆä»¥ä¸‹åŒæ§˜ã«æ¡é …ã‚’è¨˜è¼‰ï¼‰

            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç½²ã€€åã€€æ¬„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

            ç”²ã€€ã€€ã€ä¼šç¤¾åã€‘ ä»£è¡¨è€…ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€å°

            ä¹™ã€€ã€€ã€ä¼šç¤¾åã€‘ ä»£è¡¨è€…ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€å°

            ä½œæˆæ—¥ï¼šä»¤å’Œã€€å¹´ã€€æœˆã€€æ—¥ ```

            **å¿…ãšä¸Šè¨˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«å¾“ã„ã€è¦–è¦šçš„ã«ç¾ã—ãæ•´ç†ã•ã‚ŒãŸå¥‘ç´„æ›¸ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚**'
        - id: user-prompt
          role: user
          text: 'ã€å¥‘ç´„ã‚¿ã‚¤ãƒ—ã€‘ {{#start_node.contract_type#}}

            ã€å¥‘ç´„å½“äº‹è€…æƒ…å ±ã€‘ ç”²ã®ä¼šç¤¾å: {{#start_node.party_a_company#}} ç”²ã®ä»£è¡¨è€…: {{#start_node.party_a_representative#}}
            ç”²ã®ä½æ‰€: {{#start_node.party_a_address#}}

            ä¹™ã®ä¼šç¤¾å: {{#start_node.party_b_company#}} ä¹™ã®ä»£è¡¨è€…: {{#start_node.party_b_representative#}}
            ä¹™ã®ä½æ‰€: {{#start_node.party_b_address#}}

            ã€å¥‘ç´„è©³ç´°ã€‘ å¥‘ç´„æœŸé–“: {{#start_node.contract_period#}} å¥‘ç´„é‡‘é¡: {{#start_node.contract_amount#}}
            ç‰¹è¨˜äº‹é …: {{#start_node.special_conditions#}}

            **é‡è¦æŒ‡ç¤º**: - ä¸Šè¨˜ã®æƒ…å ±ãŒæœªå…¥åŠ›ã‚„ç©ºæ¬„ã®å ´åˆã¯ã€è‡ªå‹•çš„ã«ä»®ã®å€¤ï¼ˆã€ã€‡ã€‡ã‚’å…¥åŠ›ã€‘å½¢å¼ï¼‰ã‚’è¨­å®šã—ã¦ãã ã•ã„ - ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ä¸€åˆ‡å‡ºã•ãšã€å¿…ãšå®Œæˆã—ãŸå¥‘ç´„æ›¸ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„
            - Wordæ–‡æ›¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«å¾“ã£ã¦ã€è¦–è¦šçš„ã«ç¾ã—ã„å¥‘ç´„æ›¸ã‚’ä½œæˆã—ã¦ãã ã•ã„ - ç½²åæ¬„ã¾ã§å«ã‚ãŸå®Œå…¨ãªå¥‘ç´„æ›¸ã¨ã—ã¦ä»•ä¸Šã’ã¦ãã ã•ã„

            {{#start_node.contract_type#}}ã®å¥‘ç´„æ›¸ã‚’ä¸Šè¨˜ä»•æ§˜ã§ä½œæˆã—ã¦ãã ã•ã„ã€‚'
        selected: false
        structured_output_enabled: false
        title: å¥‘ç´„æ›¸ç”Ÿæˆã‚¨ãƒ³ã‚¸ãƒ³
        type: llm
        variables: []
        vision:
          enabled: false
      height: 118
      id: contract_generation_node
      position:
        x: 350
        y: 200
      positionAbsolute:
        x: 350
        y: 200
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "def main(contract_text: str, contract_type: str) -> dict:\n    \"\"\
          \"\n    å¥‘ç´„æ›¸ã®ãƒªãƒ¼ã‚¬ãƒ«ãƒã‚§ãƒƒã‚¯ã¨å“è³ªè©•ä¾¡\n    \"\"\"\n    import re\n    \n    # å¿…é ˆæ¡é …ã®ãƒã‚§ãƒƒã‚¯é …ç›®å®šç¾©\n\
          \    legal_checks = {\n        \"æ¥­å‹™å§”è¨—å¥‘ç´„\": [\n            \"æ¥­å‹™å†…å®¹\", \"å§”è¨—æœŸé–“\"\
          , \"å ±é…¬\", \"æ”¯æ‰•\", \"çŸ¥çš„è²¡ç”£\", \"ç§˜å¯†ä¿æŒ\", \"æå®³è³ å„Ÿ\", \"å¥‘ç´„è§£é™¤\", \"ç®¡è½„\"\n     \
          \   ],\n        \"ç§˜å¯†ä¿æŒå¥‘ç´„\": [\n            \"ç§˜å¯†æƒ…å ±\", \"å®šç¾©\", \"ä¿æŒç¾©å‹™\", \"\
          åˆ©ç”¨ç›®çš„\", \"è¿”é‚„\", \"å»ƒæ£„\", \"æœ‰åŠ¹æœŸé–“\", \"æå®³è³ å„Ÿ\"\n        ],\n        \"é›‡ç”¨å¥‘ç´„\"\
          : [\n            \"åŠ´åƒæ¡ä»¶\", \"å°±æ¥­æ™‚é–“\", \"ä¼‘æ—¥\", \"çµ¦ä¸\", \"é€€è·\", \"å°±æ¥­è¦å‰‡\", \"\
          ç¤¾ä¼šä¿é™º\", \"é›‡ç”¨æœŸé–“\"\n        ]\n    }\n    \n    # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒã‚§ãƒƒã‚¯é …ç›®\n    default_checks\
          \ = [\"å¥‘ç´„æœŸé–“\", \"å½“äº‹è€…\", \"æ¨©åˆ©ç¾©å‹™\", \"å¯¾ä¾¡\", \"è§£é™¤\", \"æå®³è³ å„Ÿ\", \"æº–æ‹ æ³•\", \"\
          ç®¡è½„\"]\n    \n    # å¥‘ç´„ã‚¿ã‚¤ãƒ—ã«å¿œã˜ãŸãƒã‚§ãƒƒã‚¯é …ç›®ã‚’é¸æŠ\n    if \"æ¥­å‹™å§”è¨—\" in contract_type:\n\
          \        check_items = legal_checks[\"æ¥­å‹™å§”è¨—å¥‘ç´„\"]\n    elif \"ç§˜å¯†ä¿æŒ\" in contract_type\
          \ or \"NDA\" in contract_type:\n        check_items = legal_checks[\"ç§˜å¯†ä¿æŒå¥‘ç´„\"\
          ]\n    elif \"é›‡ç”¨\" in contract_type:\n        check_items = legal_checks[\"\
          é›‡ç”¨å¥‘ç´„\"]\n    else:\n        check_items = default_checks\n    \n    # ãƒã‚§ãƒƒã‚¯çµæœã®åˆæœŸåŒ–\n\
          \    present_clauses = []\n    missing_clauses = []\n    risk_warnings =\
          \ []\n    improvement_suggestions = []\n    \n    # å¿…é ˆæ¡é …ã®ãƒã‚§ãƒƒã‚¯\n    for clause\
          \ in check_items:\n        if clause in contract_text:\n            present_clauses.append(clause)\n\
          \        else:\n            missing_clauses.append(clause)\n    \n    #\
          \ ãƒªã‚¹ã‚¯é …ç›®ã®ãƒã‚§ãƒƒã‚¯\n    risk_patterns = {\n        \"æ›–æ˜§ãªè¡¨ç¾\": [\"é©å®œ\", \"é©åˆ‡ã«\"\
          , \"å¿…è¦ã«å¿œã˜ã¦\", \"ç›¸å½“ãª\", \"é©å½“ãª\"],\n        \"æœŸé™ã®æ¬ å¦‚\": not bool(re.search(r'\\\
          d{4}å¹´\\d{1,2}æœˆ\\d{1,2}æ—¥|\\d+æ—¥ä»¥å†…|\\d+ãƒ¶æœˆ|\\d+å¹´', contract_text)),\n      \
          \  \"é‡‘é¡ã®æœªè¨˜è¼‰\": not bool(re.search(r'å††|ï¿¥|é‡‘|æ–™|è²»|é¡', contract_text)),\n   \
          \     \"ç½²åæ¬„ã®æ¬ å¦‚\": \"ç½²å\" not in contract_text and \"è¨˜å\" not in contract_text\n\
          \    }\n    \n    for risk_type, condition in risk_patterns.items():\n \
          \       if isinstance(condition, bool) and condition:\n            risk_warnings.append(risk_type)\n\
          \        elif isinstance(condition, list) and any(word in contract_text\
          \ for word in condition):\n            risk_warnings.append(risk_type)\n\
          \    \n    # æ”¹å–„ææ¡ˆã®ç”Ÿæˆ\n    if missing_clauses:\n        improvement_suggestions.append(f\"\
          æ¬ è½æ¡é …ã®è¿½åŠ æ¤œè¨: {', '.join(missing_clauses[:3])}\")\n    \n    if \"æ›–æ˜§ãªè¡¨ç¾\" in\
          \ risk_warnings:\n        improvement_suggestions.append(\"æ›–æ˜§ãªè¡¨ç¾ã‚’å…·ä½“çš„ãªæ¡ä»¶ã«ä¿®æ­£ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨\"\
          )\n    \n    if \"æœŸé™ã®æ¬ å¦‚\" in risk_warnings:\n        improvement_suggestions.append(\"\
          å…·ä½“çš„ãªæœŸæ—¥ãƒ»æœŸé™ã®æ˜è¨˜ã‚’æ¨å¥¨\")\n    \n    if \"é‡‘é¡ã®æœªè¨˜è¼‰\" in risk_warnings:\n        improvement_suggestions.append(\"\
          å¯¾ä¾¡ãƒ»å ±é…¬ã®å…·ä½“çš„ãªè¨˜è¼‰ã‚’æ¨å¥¨\")\n    \n    if not improvement_suggestions:\n        improvement_suggestions.append(\"\
          é©åˆ‡ãªå¥‘ç´„æ›¸æ§‹æˆã§ã™ã€‚æ³•å‹™éƒ¨é–€ã§ã®æœ€çµ‚ç¢ºèªã‚’æ¨å¥¨\")\n    \n    # å¥‘ç´„æ›¸ã®å®Œæˆåº¦ã‚¹ã‚³ã‚¢ç®—å‡º\n    total_items =\
          \ len(check_items)\n    present_items = len(present_clauses)\n    completeness_score\
          \ = (present_items / total_items) * 100 if total_items > 0 else 0\n    \n\
          \    # ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ«ã®åˆ¤å®š\n    risk_count = len(risk_warnings)\n    missing_count\
          \ = len(missing_clauses)\n    \n    if risk_count == 0 and missing_count\
          \ <= 1:\n        risk_level = \"ä½\"\n        overall_grade = \"A\"\n   \
          \ elif risk_count <= 1 and missing_count <= 2:\n        risk_level = \"\
          ä¸­\"\n        overall_grade = \"B\"\n    elif risk_count <= 2 and missing_count\
          \ <= 3:\n        risk_level = \"ä¸­\"\n        overall_grade = \"C\"\n   \
          \ else:\n        risk_level = \"é«˜\"\n        overall_grade = \"D\"\n   \
          \ \n    # Wordæ–‡æ›¸åŒ–ã®ãŸã‚ã®ãƒ•ã‚¡ã‚¤ãƒ«åç”Ÿæˆ\n    import datetime\n    today = datetime.date.today().strftime(\"\
          %Y%m%d\")\n    filename = f\"{contract_type}_{today}.docx\"\n    \n    return\
          \ {\n        \"completeness_score\": round(completeness_score, 1),\n   \
          \     \"present_clauses\": present_clauses,\n        \"missing_clauses\"\
          : missing_clauses,\n        \"risk_warnings\": risk_warnings,\n        \"\
          risk_level\": risk_level,\n        \"overall_grade\": overall_grade,\n \
          \       \"improvement_suggestions\": improvement_suggestions,\n        \"\
          total_check_items\": total_items,\n        \"contract_filename\": filename,\n\
          \        \"legal_review_status\": \"å®Œäº†\"\n    }\n"
        code_language: python3
        desc: å¥‘ç´„æ›¸ã®ãƒªãƒ¼ã‚¬ãƒ«ãƒã‚§ãƒƒã‚¯ã¨å“è³ªè©•ä¾¡
        error_strategy: fail-branch
        outputs:
          completeness_score:
            children: null
            type: number
          contract_filename:
            children: null
            type: string
          improvement_suggestions:
            children: null
            type: array[string]
          legal_review_status:
            children: null
            type: string
          missing_clauses:
            children: null
            type: array[string]
          overall_grade:
            children: null
            type: string
          present_clauses:
            children: null
            type: array[string]
          risk_level:
            children: null
            type: string
          risk_warnings:
            children: null
            type: array[string]
          total_check_items:
            children: null
            type: number
        selected: false
        title: ãƒªãƒ¼ã‚¬ãƒ«ãƒã‚§ãƒƒã‚¯å‡¦ç†
        type: code
        variables:
        - value_selector:
          - contract_generation_node
          - text
          variable: contract_text
        - value_selector:
          - start_node
          - contract_type
          variable: contract_type
      height: 118
      id: legal_review_node
      position:
        x: 650
        y: 200
      positionAbsolute:
        x: 650
        y: 200
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '## ğŸ“„ å¥‘ç´„æ›¸ãƒ‰ãƒ©ãƒ•ãƒˆå®Œæˆï¼

          **ğŸ“Š å®Œæˆåº¦ã‚¹ã‚³ã‚¢: {{#legal_review_node.completeness_score#}}%** **âš–ï¸ ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ«: {{#legal_review_node.risk_level#}}**
          **ğŸ¯ ç·åˆè©•ä¾¡: {{#legal_review_node.overall_grade#}}ã‚°ãƒ¬ãƒ¼ãƒ‰**

          ---

          ## ğŸ“‹ Wordæ–‡æ›¸ç”¨å¥‘ç´„æ›¸ï¼ˆã‚³ãƒ”ãƒ¼ï¼†ãƒšãƒ¼ã‚¹ãƒˆå¯¾å¿œï¼‰

          â–¼ **ä»¥ä¸‹ã‚’ã™ã¹ã¦é¸æŠã—ã¦Wordã«ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„** â–¼

          ``` {{#contract_generation_node.text#}} ```

          â–² **ã“ã“ã¾ã§ã‚’Wordã«ã‚³ãƒ”ãƒ¼** â–²

          ---

          ## ğŸ’¾ Wordæ–‡æ›¸åŒ–ã®æ‰‹é †

          **æ¨å¥¨ãƒ•ã‚¡ã‚¤ãƒ«å**: `{{#legal_review_node.contract_filename#}}`

          ### ğŸ“ **ç°¡å˜3ã‚¹ãƒ†ãƒƒãƒ—** 1. **ä¸Šè¨˜ã®å¥‘ç´„æ›¸æœ¬æ–‡ã‚’ã™ã¹ã¦é¸æŠã—ã¦ã‚³ãƒ”ãƒ¼** 2. **Microsoft Wordã‚’é–‹ã„ã¦æ–°è¦æ–‡æ›¸ã«è²¼ã‚Šä»˜ã‘**
          3. **ãƒ•ã‚©ãƒ³ãƒˆèª¿æ•´**ï¼ˆMSæ˜æœ 12ptæ¨å¥¨ï¼‰ã—ã¦ä¿å­˜

          ### ğŸ¨ **Wordæ›¸å¼è¨­å®šï¼ˆæ¨å¥¨ï¼‰** - **ãƒ•ã‚©ãƒ³ãƒˆ**: MSæ˜æœã¾ãŸã¯æ¸¸æ˜æœ - **ã‚µã‚¤ã‚º**: 12pt - **è¡Œé–“**:
          1.5å€ - **ä½™ç™½**: ä¸Šä¸‹å·¦å³ 25mm - **ãƒšãƒ¼ã‚¸è¨­å®š**: A4ç¸¦

          ---

          ## ğŸ” ãƒªãƒ¼ã‚¬ãƒ«ãƒã‚§ãƒƒã‚¯çµæœ

          ### âœ… **ç¢ºèªæ¸ˆã¿æ¡é …** ({{#legal_review_node.total_check_items#}}é …ç›®ä¸­) {{#legal_review_node.present_clauses#}}

          ### âš ï¸ **è¦ç¢ºèªäº‹é …** {{#legal_review_node.missing_clauses#}}

          ### ğŸš¨ **ãƒªã‚¹ã‚¯è­¦å‘Š** {{#legal_review_node.risk_warnings#}}

          ### ğŸ’¡ **æ”¹å–„ææ¡ˆ** {{#legal_review_node.improvement_suggestions#}}

          ---

          ## âš ï¸ é‡è¦äº‹é …ãƒ»å…è²¬äº‹é …

          ### ğŸ›¡ï¸ **æ³•çš„ç¢ºèªäº‹é …** - ã“ã®ã²ãªå½¢ã¯ä¸€èˆ¬çš„ãªæ¡é …ã«åŸºã¥ã„ã¦ã„ã¾ã™ - å€‹åˆ¥æ¡ˆä»¶ã®ç‰¹æ®Šäº‹æƒ…ã¯è€ƒæ…®ã•ã‚Œã¦ã„ã¾ã›ã‚“ - é‡è¦ãªå¥‘ç´„ã¯**å¿…ãšå¼è­·å£«ç­‰ã®å°‚é–€å®¶ã«ç›¸è«‡**ã—ã¦ãã ã•ã„
          - æœ€æ–°ã®æ³•æ”¹æ­£ã«å¯¾å¿œã—ã¦ã„ã‚‹ã‹è¦ç¢ºèª

          ### ğŸ¯ **æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³** 1. **å†…å®¹ç²¾æŸ»**: å¥‘ç´„å†…å®¹ã®è©³ç´°ç¢ºèª 2. **æ³•å‹™ãƒ¬ãƒ“ãƒ¥ãƒ¼**: å°‚é–€éƒ¨é–€ã§ã®æœ€çµ‚ãƒã‚§ãƒƒã‚¯ 3.
          **ç›¸æ‰‹æ–¹å”è­°**: æ¡ä»¶ãƒ»æ¡é …ã®èª¿æ•´ 4. **æ­£å¼ç· çµ**: ç½²åãƒ»æºå°ã«ã‚ˆã‚‹å¥‘ç´„æˆç«‹

          ### ğŸ“ **ã‚µãƒãƒ¼ãƒˆ** - ã€ã€‡ã€‡ã‚’å…¥åŠ›ã€‘ã¨ãªã£ã¦ã„ã‚‹ç®‡æ‰€ã¯æ‰‹å‹•ã§ä¿®æ­£ã—ã¦ãã ã•ã„ - Wordæ–‡æ›¸ã§ã®ç·¨é›†ãƒ»ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒå¯èƒ½ã§ã™ -
          å°åˆ·ã—ã¦ãã®ã¾ã¾ä½¿ç”¨ã§ãã¾ã™

          å¥‘ç´„æ›¸ã®ä½œæˆãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼ ğŸ’¼âœ¨'
        desc: ''
        selected: false
        title: å¥‘ç´„æ›¸ãƒ‰ãƒ©ãƒ•ãƒˆå®Œæˆ
        type: answer
        variables: []
      height: 943
      id: final_answer_node
      position:
        x: 950
        y: 200
      positionAbsolute:
        x: 950
        y: 200
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: -283.6
      y: -90.20000000000005
      zoom: 0.8
