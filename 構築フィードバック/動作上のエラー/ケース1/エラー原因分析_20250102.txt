# ケース1（web_search_6096.yml）のエラー原因分析

## エラー概要
Toolノードの必須フィールド欠落とパラメータ形式の誤り

## 具体的なエラー原因

### 1. 必須フィールドの欠落
- `provider_name`フィールドが存在しない（必須）
- `tool_label`フィールドが存在しない（必須）
- `tool_configurations`セクションが存在しない（一部の環境で必須）

### 2. tool_parametersの形式エラー
現在の記述：
```yaml
tool_parameters:
  query:
    type: mixed
    value: '{{#sys.query#}}'
  search_depth: basic  # ❌ 文字列直接指定
  topic: general       # ❌ 文字列直接指定
  max_results: 5       # ❌ 数値直接指定
  include_answer: false  # ❌ 真偽値直接指定
```

期待される形式：
- queryパラメータのみtool_parametersに記載
- その他のパラメータはtool_configurationsセクションに記載すべき

### 3. 正常なファイルとの違い
正常なファイル（検索テスト.yml）では：
- provider_name: langgenius/tavily/tavily
- tool_label: Tavily Search
- tool_configurationsセクションに数値やboolean値を記載（0/1形式）
- tool_parametersにはqueryのみ記載

## 結論
ツールノードの構造が古い形式または不完全な形式で記述されており、新しいDifyバージョンで要求される必須フィールドが欠落している。