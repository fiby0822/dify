app:
  icon: 🏆
  icon_background: '#E4F2FF'
  mode: advanced-chat
  name: 営業成績評価システム_検証用
  use_icon_as_answer_icon: true
dependencies: []
kind: app
version: 0.3.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
    opening_statement: 営業担当者の名前を入力してください。月間売上データを確認して成績を評価します。
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInLoop: false
        sourceType: start
        targetType: tool
      id: 1733389201001-source-1733389201002-target
      source: '1733389201001'
      sourceHandle: source
      target: '1733389201002'
      targetHandle: target
      type: custom
    - data:
        isInLoop: false
        sourceType: tool
        targetType: template-transform
      id: 1733389201002-source-1733389201003-target
      source: '1733389201002'
      sourceHandle: source
      target: '1733389201003'
      targetHandle: target
      type: custom
    - data:
        isInLoop: false
        sourceType: template-transform
        targetType: if-else
      id: 1733389201003-source-1733389201004-target
      source: '1733389201003'
      sourceHandle: source
      target: '1733389201004'
      targetHandle: target
      type: custom
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: template-transform
      id: 1733389201004-case1-1733389201005-target
      source: '1733389201004'
      sourceHandle: case1
      target: '1733389201005'
      targetHandle: target
      type: custom
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: template-transform
      id: 1733389201004-case2-1733389201006-target
      source: '1733389201004'
      sourceHandle: case2
      target: '1733389201006'
      targetHandle: target
      type: custom
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: template-transform
      id: 1733389201004-false-1733389201007-target
      source: '1733389201004'
      sourceHandle: "false"
      target: '1733389201007'
      targetHandle: target
      type: custom
    - data:
        isInLoop: false
        sourceType: template-transform
        targetType: answer
      id: 1733389201005-source-1733389201008-target
      source: '1733389201005'
      sourceHandle: source
      target: '1733389201008'
      targetHandle: target
      type: custom
    - data:
        isInLoop: false
        sourceType: template-transform
        targetType: answer
      id: 1733389201006-source-1733389201008-target
      source: '1733389201006'
      sourceHandle: source
      target: '1733389201008'
      targetHandle: target
      type: custom
    - data:
        isInLoop: false
        sourceType: template-transform
        targetType: answer
      id: 1733389201007-source-1733389201008-target
      source: '1733389201007'
      sourceHandle: source
      target: '1733389201008'
      targetHandle: target
      type: custom
    nodes:
    - data:
        desc: ''
        selected: false
        title: 開始
        type: start
        variables: []
      height: 90
      id: '1733389201001'
      position:
        x: 30
        y: 282
      positionAbsolute:
        x: 30
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        provider_id: google
        provider_name: google
        provider_type: builtin
        selected: false
        title: Google Sheets読み取り
        tool_configurations:
          spreadsheet_id: test_spreadsheet_id
        tool_label: GoogleSheets
        tool_name: google_sheets_read_spreadsheet
        tool_parameters:
          ranges: "営業データ!A1:C10"
          renderOption: FORMATTED_VALUE
          valueRenderOption: FORMATTED_VALUE
        type: tool
      height: 90
      id: '1733389201002'
      position:
        x: 334
        y: 282
      positionAbsolute:
        x: 334
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        output_type: string
        selected: false
        template: "{% set target_name = sys.query %}\n{% set sales_data = node_1733389201002.result[0] %}\n{% for row in sales_data %}\n  {% if row[0] == target_name %}\n    {{ row[1]|replace(',', '')|int }}\n  {% endif %}\n{% endfor %}"
        title: 売上額抽出
        type: template-transform
        variables:
        - value_selector:
          - sys
          - query
          variable: sys.query
        - value_selector:
          - '1733389201002'
          - result
          variable: node_1733389201002.result
      height: 90
      id: '1733389201003'
      position:
        x: 638
        y: 282
      positionAbsolute:
        x: 638
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: case1
          conditions:
          - comparison_operator: ">="
            id: '1733389201009'
            value: '10000000'
            variable_selector:
            - '1733389201003'
            - output
          id: case1
          logical_operator: and
        - case_id: case2
          conditions:
          - comparison_operator: ">="
            id: '1733389201010'
            value: '5000000'
            variable_selector:
            - '1733389201003'
            - output
          id: case2
          logical_operator: and
        desc: ''
        selected: false
        title: 成績評価
        type: if-else
      height: 126
      id: '1733389201004'
      position:
        x: 942
        y: 264
      positionAbsolute:
        x: 942
        y: 264
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        output_type: string
        selected: false
        template: "営業担当者: {{ sys.query }} 様\n\n月間売上額: {{ node_1733389201003.output|int|format_number }}円\n\n評価: 優秀\n\n素晴らしい成績です！目標を大きく上回る売上を達成されました。\nこの調子で頑張ってください。"
        title: 優秀メッセージ
        type: template-transform
        variables:
        - value_selector:
          - sys
          - query
          variable: sys.query
        - value_selector:
          - '1733389201003'
          - output
          variable: node_1733389201003.output
      height: 90
      id: '1733389201005'
      position:
        x: 1246
        y: 162
      positionAbsolute:
        x: 1246
        y: 162
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        output_type: string
        selected: false
        template: "営業担当者: {{ sys.query }} 様\n\n月間売上額: {{ node_1733389201003.output|int|format_number }}円\n\n評価: 良好\n\n良い成績を収められています。\n目標達成まであと一歩です。引き続き頑張りましょう。"
        title: 良好メッセージ
        type: template-transform
        variables:
        - value_selector:
          - sys
          - query
          variable: sys.query
        - value_selector:
          - '1733389201003'
          - output
          variable: node_1733389201003.output
      height: 90
      id: '1733389201006'
      position:
        x: 1246
        y: 282
      positionAbsolute:
        x: 1246
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        output_type: string
        selected: false
        template: "営業担当者: {{ sys.query }} 様\n\n月間売上額: {{ node_1733389201003.output|int|format_number }}円\n\n評価: 要改善\n\n売上目標に達していません。\n改善策を検討し、来月は目標達成を目指しましょう。"
        title: 要改善メッセージ
        type: template-transform
        variables:
        - value_selector:
          - sys
          - query
          variable: sys.query
        - value_selector:
          - '1733389201003'
          - output
          variable: node_1733389201003.output
      height: 90
      id: '1733389201007'
      position:
        x: 1246
        y: 402
      positionAbsolute:
        x: 1246
        y: 402
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{ output }}'
        desc: ''
        selected: false
        title: 最終回答
        type: answer
        variables:
        - value_selector:
          - '1733389201005'
          - output
          variable: output
        - value_selector:
          - '1733389201006'
          - output
          variable: output
        - value_selector:
          - '1733389201007'
          - output
          variable: output
      height: 107
      id: '1733389201008'
      position:
        x: 1550
        y: 274
      positionAbsolute:
        x: 1550
        y: 274
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: 126.89453125
      y: 225.71875
      zoom: 0.7