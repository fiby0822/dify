app:
  description: "商品の在庫状況をチェックし、注文可能かどうかを判定するシステムです。りんご、みかん、バナナ、いちごの仮想在庫データを基に判定します。"
  icon: "📦"
  icon_background: "#FFEAD5"
  mode: advanced-chat
  name: "商品在庫チェックシステム"
  use_icon_as_answer_icon: false

dependencies: []

kind: app

version: 0.3.0

workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      enabled: false
    opening_statement: |
      商品在庫チェックシステムへようこそ！
      
      商品名と注文数を入力してください。
      例：「りんごを30個注文したい」「バナナ10個」
      
      在庫がある商品：
      - りんご（50個）
      - みかん（20個）
      - バナナ（5個）
      - いちご（0個）
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions:
      - "りんごを30個注文したい"
      - "みかんを25個注文できますか？"
      - "バナナ3個お願いします"
      - "いちごはありますか？"
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
      - data:
          isInLoop: false
          sourceType: start
          targetType: template-transform
        id: start-product-extract-edge
        selected: false
        source: start_node
        sourceHandle: source
        target: product_extract_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: template-transform
          targetType: if-else
        id: product-check-apple-edge
        selected: false
        source: product_extract_node
        sourceHandle: source
        target: check_apple_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: template-transform
        id: apple-stock-process-edge
        selected: false
        source: check_apple_node
        sourceHandle: apple_case
        target: apple_stock_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: if-else
        id: apple-false-orange-edge
        selected: false
        source: check_apple_node
        sourceHandle: "false"
        target: check_orange_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: template-transform
        id: orange-stock-process-edge
        selected: false
        source: check_orange_node
        sourceHandle: orange_case
        target: orange_stock_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: if-else
        id: orange-false-banana-edge
        selected: false
        source: check_orange_node
        sourceHandle: "false"
        target: check_banana_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: template-transform
        id: banana-stock-process-edge
        selected: false
        source: check_banana_node
        sourceHandle: banana_case
        target: banana_stock_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: if-else
        id: banana-false-strawberry-edge
        selected: false
        source: check_banana_node
        sourceHandle: "false"
        target: check_strawberry_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: strawberry-stock-answer-edge
        selected: false
        source: check_strawberry_node
        sourceHandle: strawberry_case
        target: strawberry_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: strawberry-false-notfound-edge
        selected: false
        source: check_strawberry_node
        sourceHandle: "false"
        target: notfound_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: template-transform
          targetType: answer
        id: apple-answer-edge
        selected: false
        source: apple_stock_node
        sourceHandle: source
        target: apple_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: template-transform
          targetType: answer
        id: orange-answer-edge
        selected: false
        source: orange_stock_node
        sourceHandle: source
        target: orange_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: template-transform
          targetType: answer
        id: banana-answer-edge
        selected: false
        source: banana_stock_node
        sourceHandle: source
        target: banana_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
    nodes:
      - data:
          desc: "ユーザー入力を受け取る開始ノード"
          selected: false
          title: "開始"
          type: start
          variables: []
        height: 54
        id: start_node
        position:
          x: 50
          y: 200
        positionAbsolute:
          x: 50
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "ユーザー入力から商品名と注文数を抽出"
          selected: false
          template: |
            ユーザー入力：{{#sys.query#}}
            
            商品名抽出：
            {{#sys.query#}}
            
            注文数抽出：
            {{#sys.query#}}
          title: "商品情報抽出"
          type: template-transform
          variables: []
        height: 154
        id: product_extract_node
        position:
          x: 350
          y: 200
        positionAbsolute:
          x: 350
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          cases:
            - id: apple_case
              case_id: apple_case
              conditions:
                - id: apple_condition_1
                  variable_selector:
                    - product_extract_node
                    - output
                  comparison_operator: contains
                  value: "りんご"
              logical_operator: and
          desc: "りんごかどうかチェック"
          selected: false
          title: "りんごチェック"
          type: if-else
        height: 154
        id: check_apple_node
        position:
          x: 650
          y: 50
        positionAbsolute:
          x: 650
          y: 50
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          cases:
            - id: orange_case
              case_id: orange_case
              conditions:
                - id: orange_condition_1
                  variable_selector:
                    - product_extract_node
                    - output
                  comparison_operator: contains
                  value: "みかん"
              logical_operator: and
          desc: "みかんかどうかチェック"
          selected: false
          title: "みかんチェック"
          type: if-else
        height: 154
        id: check_orange_node
        position:
          x: 650
          y: 250
        positionAbsolute:
          x: 650
          y: 250
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          cases:
            - id: banana_case
              case_id: banana_case
              conditions:
                - id: banana_condition_1
                  variable_selector:
                    - product_extract_node
                    - output
                  comparison_operator: contains
                  value: "バナナ"
              logical_operator: and
          desc: "バナナかどうかチェック"
          selected: false
          title: "バナナチェック"
          type: if-else
        height: 154
        id: check_banana_node
        position:
          x: 650
          y: 450
        positionAbsolute:
          x: 650
          y: 450
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          cases:
            - id: strawberry_case
              case_id: strawberry_case
              conditions:
                - id: strawberry_condition_1
                  variable_selector:
                    - product_extract_node
                    - output
                  comparison_operator: contains
                  value: "いちご"
              logical_operator: and
          desc: "いちごかどうかチェック"
          selected: false
          title: "いちごチェック"
          type: if-else
        height: 154
        id: check_strawberry_node
        position:
          x: 650
          y: 650
        positionAbsolute:
          x: 650
          y: 650
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "りんごの在庫処理"
          selected: false
          template: |
            商品名：りんご
            在庫数：50個
            ユーザー入力：{{#sys.query#}}
          title: "りんご在庫処理"
          type: template-transform
          variables: []
        height: 98
        id: apple_stock_node
        position:
          x: 950
          y: 50
        positionAbsolute:
          x: 950
          y: 50
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "みかんの在庫処理"
          selected: false
          template: |
            商品名：みかん
            在庫数：20個
            ユーザー入力：{{#sys.query#}}
          title: "みかん在庫処理"
          type: template-transform
          variables: []
        height: 98
        id: orange_stock_node
        position:
          x: 950
          y: 250
        positionAbsolute:
          x: 950
          y: 250
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "バナナの在庫処理"
          selected: false
          template: |
            商品名：バナナ
            在庫数：5個
            ユーザー入力：{{#sys.query#}}
          title: "バナナ在庫処理"
          type: template-transform
          variables: []
        height: 98
        id: banana_stock_node
        position:
          x: 950
          y: 450
        positionAbsolute:
          x: 950
          y: 450
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: |
            【商品在庫チェック結果】
            
            商品名：りんご
            在庫数：50個
            
            注文処理：
            {{#apple_stock_node.output#}}
            
            ✅ 在庫十分：ご注文いただけます。
            
            りんごは豊富な在庫がございますので、ご希望の数量をご注文いただけます。
          desc: "りんごの在庫結果"
          selected: false
          title: "りんご回答"
          type: answer
          variables: []
        height: 200
        id: apple_answer_node
        position:
          x: 1250
          y: 50
        positionAbsolute:
          x: 1250
          y: 50
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: |
            【商品在庫チェック結果】
            
            商品名：みかん
            在庫数：20個
            
            注文処理：
            {{#orange_stock_node.output#}}
            
            ⚠️ 在庫少量：ご注文は可能ですが、在庫が限られています。
            
            みかんの在庫は20個となっております。ご希望の数量が在庫を超える場合は、在庫数までのご注文となります。
          desc: "みかんの在庫結果"
          selected: false
          title: "みかん回答"
          type: answer
          variables: []
        height: 200
        id: orange_answer_node
        position:
          x: 1250
          y: 250
        positionAbsolute:
          x: 1250
          y: 250
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: |
            【商品在庫チェック結果】
            
            商品名：バナナ
            在庫数：5個
            
            注文処理：
            {{#banana_stock_node.output#}}
            
            ⚠️ 在庫少量：ご注文は可能ですが、在庫が限られています。
            
            バナナの在庫は5個のみとなっております。お早めのご注文をお勧めします。
          desc: "バナナの在庫結果"
          selected: false
          title: "バナナ回答"
          type: answer
          variables: []
        height: 200
        id: banana_answer_node
        position:
          x: 1250
          y: 450
        positionAbsolute:
          x: 1250
          y: 450
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: |
            【商品在庫チェック結果】
            
            商品名：いちご
            在庫数：0個
            
            ❌ 在庫切れ：申し訳ございませんが、現在在庫がございません。
            
            いちごは完売となっております。次回入荷をお待ちください。
          desc: "いちごの在庫結果"
          selected: false
          title: "いちご回答"
          type: answer
          variables: []
        height: 200
        id: strawberry_answer_node
        position:
          x: 950
          y: 650
        positionAbsolute:
          x: 950
          y: 650
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: |
            【商品在庫チェック結果】
            
            ❓ 商品が見つかりません
            
            ご指定の商品は取り扱いがございません。
            
            取り扱い商品：
            - りんご（在庫50個）
            - みかん（在庫20個）
            - バナナ（在庫5個）
            - いちご（在庫0個）
            
            上記の商品からお選びください。
          desc: "商品が見つからない場合"
          selected: false
          title: "商品なし回答"
          type: answer
          variables: []
        height: 250
        id: notfound_answer_node
        position:
          x: 950
          y: 850
        positionAbsolute:
          x: 950
          y: 850
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
    viewport:
      x: 0
      y: 0
      zoom: 0.8