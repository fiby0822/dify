app:
  description: "æ›´æ–°ã•ã‚ŒãŸLLMã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®memoryè¨­å®šãƒ«ãƒ¼ãƒ«ã‚’æ¤œè¨¼ã™ã‚‹ãŸã‚ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€‚3ã¤ã®ç•°ãªã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã§memoryè¨­å®šã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚"
  icon: "ğŸ”¬"
  icon_background: "#E0F2FE"
  mode: advanced-chat
  name: "æ›´æ–°ç‰ˆLLMãƒ¡ãƒ¢ãƒªè¨­å®šæ¤œè¨¼ã‚¢ãƒ—ãƒª"
  use_icon_as_answer_icon: false

dependencies: []

kind: app

version: 0.3.0

workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      enabled: false
    opening_statement: |
      æ›´æ–°ã•ã‚ŒãŸLLMãƒ¡ãƒ¢ãƒªè¨­å®šãƒ«ãƒ¼ãƒ«ã®æ¤œè¨¼ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚
      
      ã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯3ã¤ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¤œè¨¼ã—ã¾ã™ï¼š
      1. memoryãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’çœç•¥ï¼ˆæ¨å¥¨ï¼‰
      2. å®Œå…¨ãªmemoryæ§‹é€ 
      3. è¤‡æ•°ãƒãƒ¼ãƒ‰ã§ã®ç•°ãªã‚‹è¨­å®š
      
      ä½•ã‹è³ªå•ã‚„ãƒ†ã‚¹ãƒˆã—ãŸã„å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions:
      - "AIã¨ã¯ä½•ã§ã™ã‹ï¼Ÿ"
      - "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®åŸºç¤ã‚’æ•™ãˆã¦ãã ã•ã„"
      - "ä»Šæ—¥ã®å¤©æ°—ã¯ã©ã†ã§ã™ã‹ï¼Ÿ"
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
      - data:
          isInLoop: false
          sourceType: start
          targetType: llm
        id: start-llm1-edge
        selected: false
        source: start_node
        sourceHandle: source
        target: llm_no_memory_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: llm
          targetType: llm
        id: llm1-llm2-edge
        selected: false
        source: llm_no_memory_node
        sourceHandle: source
        target: llm_with_memory_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: llm
          targetType: llm
        id: llm2-llm3-edge
        selected: false
        source: llm_with_memory_node
        sourceHandle: source
        target: llm_summary_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: llm
          targetType: answer
        id: llm3-answer-edge
        selected: false
        source: llm_summary_node
        sourceHandle: source
        target: answer_node
        targetHandle: target
        type: custom
        zIndex: 0
    nodes:
      - data:
          desc: "ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’å—ã‘å–ã‚‹é–‹å§‹ãƒãƒ¼ãƒ‰"
          selected: false
          title: "é–‹å§‹"
          type: start
          variables: []
        height: 54
        id: start_node
        position:
          x: 50
          y: 200
        positionAbsolute:
          x: 50
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          model:
            provider: openai
            name: gpt-4o
            mode: chat
          prompt_template:
            - id: system-no-memory-1
              role: system
              text: |
                ã‚ãªãŸã¯è³ªå•åˆ†æã®å°‚é–€å®¶ã§ã™ã€‚
                ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•ã‚’åˆ†æã—ã€è³ªå•ã®ç¨®é¡ã¨ä¸»è¦ãªãƒˆãƒ”ãƒƒã‚¯ã‚’ç‰¹å®šã—ã¦ãã ã•ã„ã€‚
                ç°¡æ½”ã«ã€ä»¥ä¸‹ã®å½¢å¼ã§å›ç­”ã—ã¦ãã ã•ã„ï¼š
                
                è³ªå•ã‚¿ã‚¤ãƒ—ï¼š[æƒ…å ±è¦æ±‚/èª¬æ˜è¦æ±‚/æ„è¦‹è¦æ±‚ãªã©]
                ãƒˆãƒ”ãƒƒã‚¯ï¼š[ä¸»è¦ãªãƒˆãƒ”ãƒƒã‚¯]
                ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼š[é‡è¦ãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰]
            - id: user-no-memory-1
              role: user
              text: |
                ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•ï¼š
                {{#sys.query#}}
          completion_params:
            temperature: 0.3
            max_tokens: 200
          structured_output_enabled: false
          vision:
            enabled: false
          variables: []
          context:
            enabled: false
            variable_selector: []
          desc: "ãƒ‘ã‚¿ãƒ¼ãƒ³1: memoryãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’çœç•¥ï¼ˆæ¨å¥¨ï¼‰"
          selected: false
          title: "è³ªå•åˆ†æï¼ˆãƒ¡ãƒ¢ãƒªãªã—ï¼‰"
          type: llm
        height: 98
        id: llm_no_memory_node
        position:
          x: 350
          y: 200
        positionAbsolute:
          x: 350
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          model:
            provider: openai
            name: gpt-4o
            mode: chat
          prompt_template:
            - id: system-with-memory-1
              role: system
              text: |
                ã‚ãªãŸã¯å„ªç§€ãªå›ç­”ç”Ÿæˆã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚
                è³ªå•åˆ†æã®çµæœã‚’è¸ã¾ãˆã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•ã«å¯¾ã™ã‚‹è©³ç´°ãªå›ç­”ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚
                
                ä»¥ä¸‹ã®ç‚¹ã«æ³¨æ„ã—ã¦ãã ã•ã„ï¼š
                1. æ­£ç¢ºã§ä¿¡é ¼æ€§ã®é«˜ã„æƒ…å ±ã‚’æä¾›ã™ã‚‹
                2. åˆ†ã‹ã‚Šã‚„ã™ãæ§‹é€ åŒ–ã•ã‚ŒãŸå›ç­”ã‚’ä½œæˆã™ã‚‹
                3. å¿…è¦ã«å¿œã˜ã¦ä¾‹ã‚’å«ã‚ã‚‹
            - id: user-with-memory-1
              role: user
              text: |
                è³ªå•åˆ†æçµæœï¼š
                {{#llm_no_memory_node.text#}}
                
                å…ƒã®è³ªå•ï¼š
                {{#sys.query#}}
                
                ä¸Šè¨˜ã®åˆ†æã‚’è¸ã¾ãˆã¦ã€è©³ç´°ãªå›ç­”ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚
          completion_params:
            temperature: 0.7
            max_tokens: 1000
          structured_output_enabled: false
          vision:
            enabled: false
          variables: []
          context:
            enabled: false
            variable_selector: []
          memory:
            enabled: false
            window:
              enabled: false
              size: 10
            role_prefix:
              assistant: ''
              user: ''
            query_prompt_template: '{{#sys.query#}}'
          desc: "ãƒ‘ã‚¿ãƒ¼ãƒ³2: å®Œå…¨ãªmemoryæ§‹é€ ã‚’æŒã¤"
          selected: false
          title: "å›ç­”ç”Ÿæˆï¼ˆãƒ¡ãƒ¢ãƒªä»˜ãï¼‰"
          type: llm
        height: 98
        id: llm_with_memory_node
        position:
          x: 650
          y: 200
        positionAbsolute:
          x: 650
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          model:
            provider: openai
            name: gpt-4o
            mode: chat
          prompt_template:
            - id: system-summary-1
              role: system
              text: |
                ã‚ãªãŸã¯è¦ç´„ã®å°‚é–€å®¶ã§ã™ã€‚
                è³ªå•åˆ†æã¨å›ç­”ç”Ÿæˆã®çµæœã‚’çµ±åˆã—ã€æœ€çµ‚çš„ãªå›ç­”ã¨ã—ã¦æ•´å½¢ã—ã¦ãã ã•ã„ã€‚
                
                å‡ºåŠ›å½¢å¼ï¼š
                ã€è³ªå•ã®è¦ç‚¹ã€‘
                ï¼ˆ1-2è¡Œã§è¦ç´„ï¼‰
                
                ã€å›ç­”ã€‘
                ï¼ˆè©³ç´°ãªå›ç­”ã‚’ãã®ã¾ã¾å«ã‚ã‚‹ï¼‰
                
                ã€è£œè¶³æƒ…å ±ã€‘
                ï¼ˆã‚ã‚Œã°è¿½åŠ ã®æƒ…å ±ã‚„æ³¨æ„ç‚¹ï¼‰
            - id: user-summary-1
              role: user
              text: |
                å‡¦ç†çµæœã®çµ±åˆï¼š
                
                åˆ†æçµæœï¼š
                {{#llm_no_memory_node.text#}}
                
                ç”Ÿæˆã•ã‚ŒãŸå›ç­”ï¼š
                {{#llm_with_memory_node.text#}}
          completion_params:
            temperature: 0.5
            max_tokens: 1500
          structured_output_enabled: false
          vision:
            enabled: false
          variables: []
          context:
            enabled: false
            variable_selector: []
          desc: "ãƒ‘ã‚¿ãƒ¼ãƒ³3: memoryãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å†ã³çœç•¥"
          selected: false
          title: "æœ€çµ‚æ•´å½¢ï¼ˆãƒ¡ãƒ¢ãƒªãªã—ï¼‰"
          type: llm
        height: 98
        id: llm_summary_node
        position:
          x: 950
          y: 200
        positionAbsolute:
          x: 950
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "{{#llm_summary_node.text#}}"
          desc: "æœ€çµ‚çš„ãªå›ç­”ã‚’è¡¨ç¤º"
          selected: false
          title: "å›ç­”"
          type: answer
          variables: []
        height: 107
        id: answer_node
        position:
          x: 1250
          y: 200
        positionAbsolute:
          x: 1250
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
    viewport:
      x: 0
      y: 0
      zoom: 0.8