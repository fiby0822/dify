app:
  description: "æ›´æ–°ã•ã‚ŒãŸLLMã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ«ãƒ¼ãƒ«ã®æ¤œè¨¼ç”¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ - memoryè¨­å®šã®ç•°ãªã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ãƒ†ã‚¹ãƒˆ"
  icon: "ğŸ”"
  icon_background: "#E0F2FE"
  mode: advanced-chat
  name: "LLMãƒ«ãƒ¼ãƒ«æ¤œè¨¼ã‚¢ãƒ—ãƒªï¼ˆmemoryè¨­å®šãƒ†ã‚¹ãƒˆï¼‰"
  use_icon_as_answer_icon: false

dependencies: []

kind: app

version: 0.3.0

workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      enabled: false
    opening_statement: |
      ã“ã‚“ã«ã¡ã¯ï¼LLMãƒ«ãƒ¼ãƒ«æ¤œè¨¼ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚
      ä½•ã‹è³ªå•ã‚’ã—ã¦ã„ãŸã ã‘ã‚Œã°ã€3ã¤ã®ç•°ãªã‚‹LLMãƒãƒ¼ãƒ‰ã§å‡¦ç†ã—ã¦å›ç­”ã—ã¾ã™ã€‚
      
      å‡¦ç†ã®æµã‚Œï¼š
      1. è³ªå•ã®æ„å›³ã‚’åˆ†æ
      2. è©³ç´°ãªå›ç­”ã‚’ç”Ÿæˆ
      3. å›ç­”ã‚’è¦ç´„
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions:
      - "äººå·¥çŸ¥èƒ½ã®æœªæ¥ã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„"
      - "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å­¦ç¿’ã®ã‚³ãƒ„ã¯ï¼Ÿ"
      - "å¥åº·çš„ãªç”Ÿæ´»ç¿’æ…£ã«ã¤ã„ã¦"
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
      - data:
          isInLoop: false
          sourceType: start
          targetType: llm
        id: start-analysis-edge
        selected: false
        source: start_node
        sourceHandle: source
        target: intent_analysis_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: llm
          targetType: llm
        id: analysis-detail-edge
        selected: false
        source: intent_analysis_node
        sourceHandle: source
        target: detailed_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: llm
          targetType: llm
        id: detail-summary-edge
        selected: false
        source: detailed_answer_node
        sourceHandle: source
        target: summary_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: llm
          targetType: answer
        id: summary-answer-edge
        selected: false
        source: summary_node
        sourceHandle: source
        target: answer_node
        targetHandle: target
        type: custom
        zIndex: 0
    nodes:
      - data:
          desc: "ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’å—ã‘å–ã‚‹é–‹å§‹ãƒãƒ¼ãƒ‰"
          selected: false
          title: "é–‹å§‹"
          type: start
          variables: []
        height: 54
        id: start_node
        position:
          x: 50
          y: 200
        positionAbsolute:
          x: 50
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "è³ªå•ã®æ„å›³ã‚’åˆ†æï¼ˆmemoryè¨­å®šã‚’å®Œå…¨ã«çœç•¥ï¼‰"
          model:
            mode: chat
            name: gpt-4o
            provider: openai
          prompt_template:
            - id: analysis-system-1
              role: system
              text: |
                ã‚ãªãŸã¯è³ªå•åˆ†æã®å°‚é–€å®¶ã§ã™ã€‚
                ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•ã‚’åˆ†æã—ã€ä»¥ä¸‹ã®ç‚¹ã‚’æ˜ç¢ºã«ã—ã¦ãã ã•ã„ï¼š
                1. è³ªå•ã®ä¸»é¡Œ
                2. æ±‚ã‚ã‚‰ã‚Œã¦ã„ã‚‹æƒ…å ±ã®ç¨®é¡
                3. å›ç­”ã®é›£æ˜“åº¦
            - id: analysis-user-1
              role: user
              text: |
                ä»¥ä¸‹ã®è³ªå•ã‚’åˆ†æã—ã¦ãã ã•ã„ï¼š
                {{#sys.query#}}
          completion_params:
            temperature: 0.3
            max_tokens: 500
          structured_output_enabled: false
          vision:
            enabled: false
          variables: []
          context:
            enabled: false
            variable_selector: []
          selected: false
          title: "æ„å›³åˆ†æ"
          type: llm
        height: 98
        id: intent_analysis_node
        position:
          x: 350
          y: 200
        positionAbsolute:
          x: 350
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "è©³ç´°ãªå›ç­”ã‚’ç”Ÿæˆï¼ˆmemoryè¨­å®šã‚’å®Œå…¨ãªæ§‹é€ ã§è¨˜è¼‰ã€enabledã¯falseï¼‰"
          model:
            mode: chat
            name: gpt-4o
            provider: openai
          prompt_template:
            - id: detail-system-1
              role: system
              text: |
                ã‚ãªãŸã¯å„ªç§€ãªçŸ¥è­˜æä¾›è€…ã§ã™ã€‚
                è³ªå•ã«å¯¾ã—ã¦ã€è©³ç´°ã§åˆ†ã‹ã‚Šã‚„ã™ã„å›ç­”ã‚’æä¾›ã—ã¦ãã ã•ã„ã€‚
                å¿…è¦ã«å¿œã˜ã¦å…·ä½“ä¾‹ã‚„èƒŒæ™¯æƒ…å ±ã‚‚å«ã‚ã¦ãã ã•ã„ã€‚
            - id: detail-user-1
              role: user
              text: |
                è³ªå•åˆ†æçµæœï¼š
                {{#intent_analysis_node.text#}}
                
                å…ƒã®è³ªå•ï¼š
                {{#sys.query#}}
                
                ä¸Šè¨˜ã®åˆ†æã‚’è¸ã¾ãˆã¦ã€è©³ç´°ãªå›ç­”ã‚’æä¾›ã—ã¦ãã ã•ã„ã€‚
          completion_params:
            temperature: 0.7
            max_tokens: 1500
          structured_output_enabled: false
          vision:
            enabled: false
          variables: []
          context:
            enabled: false
            variable_selector: []
          memory:
            enabled: false
            window:
              enabled: false
              size: 10
            role_prefix:
              assistant: ''
              user: ''
          selected: false
          title: "è©³ç´°å›ç­”ç”Ÿæˆ"
          type: llm
        height: 98
        id: detailed_answer_node
        position:
          x: 650
          y: 200
        positionAbsolute:
          x: 650
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "å›ç­”ã‚’è¦ç´„ï¼ˆmemoryè¨­å®šã‚’å®Œå…¨ãªæ§‹é€ ã§è¨˜è¼‰ã€enabledã¯trueï¼‰"
          model:
            mode: chat
            name: gpt-4o
            provider: openai
          prompt_template:
            - id: summary-system-1
              role: system
              text: |
                ã‚ãªãŸã¯è¦ç´„ã®å°‚é–€å®¶ã§ã™ã€‚
                é•·ã„å›ç­”ã‚’ã€é‡è¦ãªãƒã‚¤ãƒ³ãƒˆã‚’æŠ¼ã•ãˆãŸç°¡æ½”ãªè¦ç´„ã«ã¾ã¨ã‚ã¦ãã ã•ã„ã€‚
                ç®‡æ¡æ›¸ãã‚„ç•ªå·ä»˜ããƒªã‚¹ãƒˆã‚’æ´»ç”¨ã—ã¦ãã ã•ã„ã€‚
            - id: summary-user-1
              role: user
              text: |
                ä»¥ä¸‹ã®è©³ç´°å›ç­”ã‚’è¦ç´„ã—ã¦ãã ã•ã„ï¼š
                {{#detailed_answer_node.text#}}
          completion_params:
            temperature: 0.5
            max_tokens: 800
          structured_output_enabled: false
          vision:
            enabled: false
          variables: []
          context:
            enabled: false
            variable_selector: []
          memory:
            enabled: true
            window:
              enabled: true
              size: 10
            role_prefix:
              assistant: 'AI: '
              user: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼: '
            query_prompt_template: '{{#sys.query#}}'
          selected: false
          title: "è¦ç´„ç”Ÿæˆ"
          type: llm
        height: 98
        id: summary_node
        position:
          x: 950
          y: 200
        positionAbsolute:
          x: 950
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: |
            ## è³ªå•ã®åˆ†æ
            {{#intent_analysis_node.text#}}
            
            ## è¦ç´„ã•ã‚ŒãŸå›ç­”
            {{#summary_node.text#}}
            
            ---
            *ã“ã®å›ç­”ã¯3ã¤ã®LLMãƒãƒ¼ãƒ‰ã«ã‚ˆã£ã¦å‡¦ç†ã•ã‚Œã¾ã—ãŸï¼š*
            *1. æ„å›³åˆ†æï¼ˆmemoryè¨­å®šãªã—ï¼‰*
            *2. è©³ç´°å›ç­”ï¼ˆmemoryè¨­å®šã‚ã‚Šã€ç„¡åŠ¹ï¼‰*
            *3. è¦ç´„ï¼ˆmemoryè¨­å®šã‚ã‚Šã€æœ‰åŠ¹ï¼‰*
          desc: "æœ€çµ‚çš„ãªå›ç­”ã‚’è¡¨ç¤º"
          selected: false
          title: "å›ç­”"
          type: answer
          variables: []
        height: 200
        id: answer_node
        position:
          x: 1250
          y: 200
        positionAbsolute:
          x: 1250
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
    viewport:
      x: 0
      y: 0
      zoom: 0.8