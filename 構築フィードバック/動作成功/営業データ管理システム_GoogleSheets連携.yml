app:
  description: "Google Sheetsã¨é€£æºã—ã¦å–¶æ¥­ãƒ‡ãƒ¼ã‚¿ã®è¿½åŠ ãƒ»å–å¾—ã‚’è¡Œã†ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã®è¿½åŠ ã¨å–å¾—ã®ä¸¡æ–¹ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚"
  icon: "ğŸ“‘"
  icon_background: "#34A853"
  mode: advanced-chat
  name: "å–¶æ¥­ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆGoogle Sheetsé€£æºï¼‰"
  use_icon_as_answer_icon: false

dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: omluc/google_sheets:0.0.2@17f06eaa1d905595e1a76460e7249707a722142353d551cf14aed3d8517c134f

kind: app

version: 0.3.0

workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      enabled: false
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions:
      - "ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã—ãŸã„ã€‚é¡§å®¢åï¼šABCå•†äº‹ã€æ¡ˆä»¶åï¼šæ–°ã‚·ã‚¹ãƒ†ãƒ å°å…¥ã€é‡‘é¡ï¼š500ä¸‡å††ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼šå•†è«‡ä¸­"
      - "æœ€æ–°10ä»¶ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ãã ã•ã„"
      - "ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã€‚é¡§å®¢ï¼šXYZå·¥æ¥­ã€æ¡ˆä»¶ï¼šè¨­å‚™æ›´æ–°ã€é‡‘é¡ï¼š1200ä¸‡å††ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼šæˆç´„"
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
    opening_statement: "å–¶æ¥­ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã¸ã‚ˆã†ã“ãï¼\n\nä»¥ä¸‹ã®æ“ä½œãŒå¯èƒ½ã§ã™ï¼š\n\nã€ãƒ‡ãƒ¼ã‚¿è¿½åŠ ã€‘\nã€Œãƒ‡ãƒ¼ã‚¿è¿½åŠ ã€ã¨å…¥åŠ›å¾Œã€ä»¥ä¸‹ã®æƒ…å ±ã‚’ãŠçŸ¥ã‚‰ã›ãã ã•ã„ï¼š\n- é¡§å®¢å\n- æ¡ˆä»¶å\n- é‡‘é¡\n- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹\n\nã€ãƒ‡ãƒ¼ã‚¿å–å¾—ã€‘\nã€Œãƒ‡ãƒ¼ã‚¿å–å¾—ã€ã¨å…¥åŠ›å¾Œã€å–å¾—ã—ãŸã„è¡Œæ•°ã‚’ãŠçŸ¥ã‚‰ã›ãã ã•ã„ã€‚\n\nä¾‹ï¼šã€Œãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã—ãŸã„ã€‚é¡§å®¢åï¼šABCå•†äº‹ã€æ¡ˆä»¶åï¼šæ–°ã‚·ã‚¹ãƒ†ãƒ å°å…¥ã€é‡‘é¡ï¼š500ä¸‡å††ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼šå•†è«‡ä¸­ã€"
  graph:
    edges:
      - data:
          isInLoop: false
          sourceType: start
          targetType: llm
        id: start-parse-edge
        selected: false
        source: start_node
        sourceHandle: source
        target: parse_request_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: llm
          targetType: if-else
        id: parse-operation-edge
        selected: false
        source: parse_request_node
        sourceHandle: source
        target: operation_check_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: template-transform
        id: operation-transform-edge
        selected: false
        source: operation_check_node
        sourceHandle: add_data_case
        target: transform_add_data_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: template-transform
          targetType: tool
        id: transform-update-edge
        selected: false
        source: transform_add_data_node
        sourceHandle: source
        target: sheets_update_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: tool
          targetType: answer
        id: update-answer-edge
        selected: false
        source: sheets_update_node
        sourceHandle: source
        target: add_complete_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: tool
        id: operation-get-edge
        selected: false
        source: operation_check_node
        sourceHandle: get_data_case
        target: sheets_get_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: tool
          targetType: template-transform
        id: get-transform-edge
        selected: false
        source: sheets_get_node
        sourceHandle: source
        target: transform_get_data_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: template-transform
          targetType: answer
        id: transform-display-edge
        selected: false
        source: transform_get_data_node
        sourceHandle: source
        target: display_data_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: operation-error-edge
        selected: false
        source: operation_check_node
        sourceHandle: "false"
        target: error_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
    nodes:
      - data:
          desc: "é–‹å§‹ãƒãƒ¼ãƒ‰"
          selected: false
          title: "é–‹å§‹"
          type: start
          variables: []
        height: 54
        id: start_node
        position:
          x: 50
          y: 300
        positionAbsolute:
          x: 50
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          completion_params:
            max_tokens: 1000
            temperature: 0.3
          context:
            enabled: false
            variable_selector: []
          desc: "ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æ±‚ã®è§£æ"
          model:
            mode: chat
            name: gpt-3.5-turbo
            provider: openai
          prompt_template:
            - id: prompt_1
              role: system
              text: "ã‚ãªãŸã¯Google Sheetsã®å–¶æ¥­ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦æ±‚ã‚’è§£æã—ã€æ“ä½œç¨®åˆ¥ã¨ãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡ºã—ã¦ãã ã•ã„ã€‚\n\nå¿…ãšä»¥ä¸‹ã®å½¢å¼ã§å‡ºåŠ›ã—ã¦ãã ã•ã„ï¼š\næ“ä½œç¨®åˆ¥: [ãƒ‡ãƒ¼ã‚¿è¿½åŠ /ãƒ‡ãƒ¼ã‚¿å–å¾—]\n\nãƒ‡ãƒ¼ã‚¿è¿½åŠ ã®å ´åˆï¼š\né¡§å®¢å: [å€¤]\næ¡ˆä»¶å: [å€¤]\né‡‘é¡: [å€¤]\nã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: [å€¤]\n\nãƒ‡ãƒ¼ã‚¿å–å¾—ã®å ´åˆï¼š\nå–å¾—è¡Œæ•°: [æ•°å€¤]"
            - id: prompt_2
              role: user
              text: "{{#sys.query#}}"
          selected: false
          structured_output_enabled: false
          title: "è¦æ±‚è§£æ"
          type: llm
          variables: []
          vision:
            enabled: false
        height: 161
        id: parse_request_node
        position:
          x: 350
          y: 300
        positionAbsolute:
          x: 350
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          cases:
            - id: add_data_case
              case_id: add_data_case
              conditions:
                - id: add_check
                  variable_selector:
                    - parse_request_node
                    - text
                  comparison_operator: contains
                  value: "æ“ä½œç¨®åˆ¥: ãƒ‡ãƒ¼ã‚¿è¿½åŠ "
              logical_operator: and
            - id: get_data_case
              case_id: get_data_case
              conditions:
                - id: get_check
                  variable_selector:
                    - parse_request_node
                    - text
                  comparison_operator: contains
                  value: "æ“ä½œç¨®åˆ¥: ãƒ‡ãƒ¼ã‚¿å–å¾—"
              logical_operator: and
          desc: "æ“ä½œç¨®åˆ¥ã®åˆ¤å®š"
          selected: false
          title: "æ“ä½œç¨®åˆ¥ãƒã‚§ãƒƒã‚¯"
          type: if-else
        height: 154
        id: operation_check_node
        position:
          x: 650
          y: 300
        positionAbsolute:
          x: 650
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "ãƒ‡ãƒ¼ã‚¿è¿½åŠ ç”¨ã®å½¢å¼ã«å¤‰æ›"
          selected: false
          title: "è¿½åŠ ãƒ‡ãƒ¼ã‚¿æ•´å½¢"
          type: template-transform
          variables:
            - value_selector:
                - parse_request_node
                - text
              variable: parsed_data
          template: |
            [
              {
                "range": "OUTPUT!A:D",
                "values": [
                  [
                    "{{ parsed_data.split('é¡§å®¢å: ')[1].split('\n')[0] if 'é¡§å®¢å: ' in parsed_data else '' }}",
                    "{{ parsed_data.split('æ¡ˆä»¶å: ')[1].split('\n')[0] if 'æ¡ˆä»¶å: ' in parsed_data else '' }}",
                    "{{ parsed_data.split('é‡‘é¡: ')[1].split('\n')[0] if 'é‡‘é¡: ' in parsed_data else '' }}",
                    "{{ parsed_data.split('ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: ')[1].split('\n')[0] if 'ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: ' in parsed_data else '' }}"
                  ]
                ]
              }
            ]
        height: 54
        id: transform_add_data_node
        position:
          x: 950
          y: 50
        positionAbsolute:
          x: 950
          y: 50
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "Google Sheetsã¸ãƒ‡ãƒ¼ã‚¿è¿½åŠ "
          is_team_authorization: true
          output_schema: null
          provider_id: omluc/google_sheets/google_sheets
          provider_name: omluc/google_sheets/google_sheets
          provider_type: builtin
          selected: false
          title: "ãƒ‡ãƒ¼ã‚¿è¿½åŠ "
          tool_configurations:
            include_values_in_response: null
            response_date_time_render_option: null
            response_value_render_option: null
            value_input_option: USER_ENTERED
          tool_label: Batch Update
          tool_name: batch_update
          tool_parameters:
            data:
              type: mixed
              value: "{{#transform_add_data_node.output#}}"
            spreadsheet_id:
              type: mixed
              value: "1dd5IPZBYY5ZtImb48SLnO8c9b4Z8w5YUr1gWF0STqSQ"
          type: tool
        height: 131
        id: sheets_update_node
        position:
          x: 1250
          y: 50
        positionAbsolute:
          x: 1250
          y: 50
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "ã€ãƒ‡ãƒ¼ã‚¿è¿½åŠ å®Œäº†ã€‘\n\nå–¶æ¥­ãƒ‡ãƒ¼ã‚¿ã‚’æ­£å¸¸ã«è¿½åŠ ã—ã¾ã—ãŸã€‚\n\nè¿½åŠ å†…å®¹ï¼š\n{{#parse_request_node.text#}}\n\næ¬¡ã®æ“ä½œã‚’ãŠé¸ã³ãã ã•ã„ï¼š\n- åˆ¥ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã™ã‚‹\n- ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ç¢ºèªã™ã‚‹"
          desc: "ãƒ‡ãƒ¼ã‚¿è¿½åŠ å®Œäº†ã®å›ç­”"
          selected: false
          title: "è¿½åŠ å®Œäº†"
          type: answer
          variables: []
        height: 107
        id: add_complete_answer_node
        position:
          x: 1550
          y: 50
        positionAbsolute:
          x: 1550
          y: 50
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "Google Sheetsã‹ã‚‰ãƒ‡ãƒ¼ã‚¿å–å¾—"
          is_team_authorization: true
          output_schema: null
          provider_id: omluc/google_sheets/google_sheets
          provider_name: omluc/google_sheets/google_sheets
          provider_type: builtin
          selected: false
          title: "ãƒ‡ãƒ¼ã‚¿å–å¾—"
          tool_configurations:
            date_time_render_option: FORMATTED_STRING
            major_dimension: null
            value_render_option: null
          tool_label: Batch Get
          tool_name: batch_get
          tool_parameters:
            ranges:
              type: mixed
              value: '["INPUT!A1:D10"]'
            spreadsheet_id:
              type: mixed
              value: "1dd5IPZBYY5ZtImb48SLnO8c9b4Z8w5YUr1gWF0STqSQ"
          type: tool
        height: 131
        id: sheets_get_node
        position:
          x: 950
          y: 300
        positionAbsolute:
          x: 950
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "å–å¾—ãƒ‡ãƒ¼ã‚¿ã®æ•´å½¢"
          selected: false
          title: "ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºæ•´å½¢"
          type: template-transform
          variables:
            - value_selector:
                - sheets_get_node
                - json
              variable: sheet_data
          template: |
            ã€å–å¾—ãƒ‡ãƒ¼ã‚¿ã€‘
            
            {% if sheet_data[0].values %}
            é¡§å®¢å | æ¡ˆä»¶å | é‡‘é¡ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
            ---|---|---|---
            {% for row in sheet_data[0].values %}
            {{ row[0]|default('') }} | {{ row[1]|default('') }} | {{ row[2]|default('') }} | {{ row[3]|default('') }}
            {% endfor %}
            {% else %}
            ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚
            {% endif %}
        height: 54
        id: transform_get_data_node
        position:
          x: 1250
          y: 300
        positionAbsolute:
          x: 1250
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "{{#transform_get_data_node.output#}}\n\næ¬¡ã®æ“ä½œã‚’ãŠé¸ã³ãã ã•ã„ï¼š\n- æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã™ã‚‹\n- åˆ¥ã®ç¯„å›²ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹"
          desc: "ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºã®å›ç­”"
          selected: false
          title: "ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º"
          type: answer
          variables: []
        height: 107
        id: display_data_answer_node
        position:
          x: 1550
          y: 300
        positionAbsolute:
          x: 1550
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "ã€ã‚¨ãƒ©ãƒ¼ã€‘\n\nç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€‚æ“ä½œç¨®åˆ¥ã‚’åˆ¤å®šã§ãã¾ã›ã‚“ã§ã—ãŸã€‚\n\nä»¥ä¸‹ã®ã„ãšã‚Œã‹ã®å½¢å¼ã§ã”å…¥åŠ›ãã ã•ã„ï¼š\n\nã€ãƒ‡ãƒ¼ã‚¿è¿½åŠ ã®å ´åˆã€‘\nã€Œãƒ‡ãƒ¼ã‚¿è¿½åŠ ã€ã¨æ˜è¨˜ã—ã€é¡§å®¢åã€æ¡ˆä»¶åã€é‡‘é¡ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’å«ã‚ã¦ãã ã•ã„ã€‚\n\nã€ãƒ‡ãƒ¼ã‚¿å–å¾—ã®å ´åˆã€‘\nã€Œãƒ‡ãƒ¼ã‚¿å–å¾—ã€ã¨æ˜è¨˜ã—ã€å–å¾—ã—ãŸã„è¡Œæ•°ã‚’æŒ‡å®šã—ã¦ãã ã•ã„ã€‚"
          desc: "ã‚¨ãƒ©ãƒ¼æ™‚ã®å›ç­”"
          selected: false
          title: "ã‚¨ãƒ©ãƒ¼å›ç­”"
          type: answer
          variables: []
        height: 107
        id: error_answer_node
        position:
          x: 950
          y: 550
        positionAbsolute:
          x: 950
          y: 550
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
    viewport:
      x: 0
      y: 0
      zoom: 0.6