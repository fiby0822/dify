app:
  description: "æŠ€è¡“ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€æœ€æ–°ã®ãƒˆãƒ¬ãƒ³ãƒ‰ã‚„å‹•å‘ã‚’WEBæ¤œç´¢ã§èª¿æŸ»ã—ã€æ¦‚è¦ã€ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã€ä»Šå¾Œã®å±•æœ›ã€å‚è€ƒæƒ…å ±æºã‚’æ•´ç†ã—ã¦æç¤ºã—ã¾ã™ã€‚"
  icon: "ğŸ”"
  icon_background: "#E4F2FF"
  mode: advanced-chat
  name: "æŠ€è¡“ãƒˆãƒ¬ãƒ³ãƒ‰èª¿æŸ»ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ"
  use_icon_as_answer_icon: false

dependencies:
- type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/tavily:0.0.5@d14b87f7a28b47d973e16b029f42c72dcb19d96cf4e5c8b0e4ac87f91a3a9eb1

kind: app

version: 0.3.0

workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      enabled: false
    opening_statement: |
      æŠ€è¡“ãƒˆãƒ¬ãƒ³ãƒ‰èª¿æŸ»ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã¸ã‚ˆã†ã“ãï¼
      
      èª¿æŸ»ã—ãŸã„æŠ€è¡“ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚
      æœ€æ–°ã®ãƒˆãƒ¬ãƒ³ãƒ‰ã‚„å‹•å‘ã‚’WEBæ¤œç´¢ã§èª¿æŸ»ã—ã€ä»¥ä¸‹ã®è¦³ç‚¹ã§æ•´ç†ã—ã¦ãŠä¼ãˆã—ã¾ã™ï¼š
      
      ğŸ“Š æŠ€è¡“ã®æ¦‚è¦ã¨æœ€æ–°å‹•å‘
      ğŸ’¼ ä¸»è¦ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
      ğŸ”® ä»Šå¾Œã®å±•æœ›
      ğŸ“š å‚è€ƒã¨ãªã‚‹æƒ…å ±æº
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions:
      - "ç”ŸæˆAI"
      - "é‡å­ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°"
      - "WebAssembly"
      - "ã‚¨ãƒƒã‚¸ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°"
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
      - data:
          isInLoop: false
          sourceType: start
          targetType: llm
        id: start-query_optimizer-edge
        selected: false
        source: start_node
        sourceHandle: source
        target: query_optimizer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: llm
          targetType: tool
        id: query_optimizer-web_search-edge
        selected: false
        source: query_optimizer_node
        sourceHandle: source
        target: web_search_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: tool
          targetType: llm
        id: web_search-preprocessor-edge
        selected: false
        source: web_search_node
        sourceHandle: source
        target: preprocessor_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: llm
          targetType: llm
        id: preprocessor-analyzer-edge
        selected: false
        source: preprocessor_node
        sourceHandle: source
        target: analyzer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: llm
          targetType: answer
        id: analyzer-answer-edge
        selected: false
        source: analyzer_node
        sourceHandle: source
        target: answer_node
        targetHandle: target
        type: custom
        zIndex: 0
    nodes:
      - data:
          desc: "ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…¥åŠ›ã—ãŸæŠ€è¡“ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å—ã‘å–ã‚‹"
          selected: false
          title: "é–‹å§‹"
          type: start
          variables: []
        height: 54
        id: start_node
        position:
          x: 50
          y: 200
        positionAbsolute:
          x: 50
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’æœ€é©åŒ–"
          selected: false
          title: "ã‚¯ã‚¨ãƒªæœ€é©åŒ–"
          type: llm
          model:
            provider: openai
            name: gpt-3.5-turbo
            mode: chat
            completion_params:
              temperature: 0.3
              max_tokens: 200
          structured_output_enabled: false
          vision:
            enabled: false
          variables: []
          context:
            enabled: false
            variable_selector: []
          prompt_template:
            - id: system-prompt-1
              role: system
              text: |
                ã‚ãªãŸã¯WEBæ¤œç´¢ã‚¯ã‚¨ãƒªã®æœ€é©åŒ–å°‚é–€å®¶ã§ã™ã€‚
                ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…¥åŠ›ã—ãŸæŠ€è¡“ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ã€ã‚ˆã‚ŠåŠ¹æœçš„ãªæ¤œç´¢ã‚¯ã‚¨ãƒªã«å¤‰æ›ã—ã¦ãã ã•ã„ã€‚
                
                ä»¥ä¸‹ã®ç‚¹ã‚’è€ƒæ…®ã—ã¦ãã ã•ã„ï¼š
                - æœ€æ–°æƒ…å ±ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®æ™‚æœŸæŒ‡å®šï¼ˆ2024å¹´ãªã©ï¼‰
                - æŠ€è¡“ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’ç¤ºã™ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆtrendã€latestã€futureãªã©ï¼‰
                - å…·ä½“çš„ã§æ¤œç´¢ã—ã‚„ã™ã„å½¢å¼ã¸ã®å¤‰æ›
            - id: user-prompt-1
              role: user
              text: |
                æŠ€è¡“ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼š{{#sys.query#}}
                
                ä¸Šè¨˜ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã«ã¤ã„ã¦ã€æœ€æ–°ã®ãƒˆãƒ¬ãƒ³ãƒ‰ã‚„å‹•å‘ã‚’èª¿æŸ»ã™ã‚‹ãŸã‚ã®æœ€é©ãªæ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚
                å‡ºåŠ›ã¯æ¤œç´¢ã‚¯ã‚¨ãƒªã®ã¿ã¨ã—ã€èª¬æ˜ã¯ä¸è¦ã§ã™ã€‚
        height: 98
        id: query_optimizer_node
        position:
          x: 350
          y: 200
        positionAbsolute:
          x: 350
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "æœ€é©åŒ–ã•ã‚ŒãŸã‚¯ã‚¨ãƒªã§WEBæ¤œç´¢ã‚’å®Ÿè¡Œ"
          provider_id: langgenius/tavily/tavily
          provider_type: builtin
          tool_name: tavily_search
          provider_name: langgenius/tavily/tavily
          tool_label: Tavily Search
          is_team_authorization: true
          selected: false
          title: "æŠ€è¡“ãƒˆãƒ¬ãƒ³ãƒ‰æ¤œç´¢"
          type: tool
          tool_parameters:
            query:
              type: mixed
              value: '{{#query_optimizer_node.text#}}'
          tool_configurations:
            search_depth: basic
            topic: general
            max_results: 3
            include_answer: 1
            include_images: 0
            include_raw_content: 0
            time_range: month
        height: 98
        id: web_search_node
        position:
          x: 650
          y: 200
        positionAbsolute:
          x: 650
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "æ¤œç´¢çµæœã‚’è¦ç´„ã—ã¦ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã‚’å‰Šæ¸›"
          selected: false
          title: "æ¤œç´¢çµæœå‰å‡¦ç†"
          type: llm
          model:
            provider: openai
            name: gpt-3.5-turbo
            mode: chat
            completion_params:
              temperature: 0.3
              max_tokens: 800
          structured_output_enabled: false
          vision:
            enabled: false
          variables: []
          context:
            enabled: false
            variable_selector: []
          prompt_template:
            - id: system-prompt-2
              role: system
              text: |
                ã‚ãªãŸã¯æ¤œç´¢çµæœã®è¦ç´„å°‚é–€å®¶ã§ã™ã€‚
                WEBæ¤œç´¢ã§å–å¾—ã—ãŸæƒ…å ±ã‹ã‚‰é‡è¦ãªãƒã‚¤ãƒ³ãƒˆã®ã¿ã‚’æŠ½å‡ºã—ã€ç°¡æ½”ã«è¦ç´„ã—ã¦ãã ã•ã„ã€‚
                
                è¦ç´„ã®ãƒã‚¤ãƒ³ãƒˆï¼š
                - æœ€æ–°ã®å‹•å‘ã‚„ãƒˆãƒ¬ãƒ³ãƒ‰
                - ä¸»è¦ãªæŠ€è¡“çš„ç‰¹å¾´
                - å®Ÿç”¨çš„ãªå¿œç”¨ä¾‹
                - ä¿¡é ¼ã§ãã‚‹æƒ…å ±æº
            - id: user-prompt-2
              role: user
              text: |
                æŠ€è¡“ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼š{{#sys.query#}}
                
                æ¤œç´¢çµæœï¼š
                {{#web_search_node.text#}}
                
                ä¸Šè¨˜ã®æ¤œç´¢çµæœã‹ã‚‰é‡è¦ãªæƒ…å ±ã‚’æŠ½å‡ºã—ã€ç®‡æ¡æ›¸ãã§è¦ç´„ã—ã¦ãã ã•ã„ã€‚
        height: 98
        id: preprocessor_node
        position:
          x: 950
          y: 200
        positionAbsolute:
          x: 950
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "è¦ç´„ã•ã‚ŒãŸæƒ…å ±ã‚’æœ€çµ‚åˆ†æ"
          selected: false
          title: "ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ"
          type: llm
          model:
            provider: openai
            name: gpt-4o
            mode: chat
            completion_params:
              temperature: 0.5
              max_tokens: 1500
          structured_output_enabled: false
          vision:
            enabled: false
          variables: []
          context:
            enabled: false
            variable_selector: []
          prompt_template:
            - id: system-prompt-3
              role: system
              text: |
                ã‚ãªãŸã¯æŠ€è¡“ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æã®å°‚é–€å®¶ã§ã™ã€‚
                æä¾›ã•ã‚ŒãŸè¦ç´„æƒ…å ±ã‚’åŸºã«ã€æŠ€è¡“ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’ä½“ç³»çš„ã«åˆ†æã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¨ã£ã¦æœ‰ç›Šãªå½¢ã§æ•´ç†ã—ã¦æç¤ºã—ã¦ãã ã•ã„ã€‚
                
                åˆ†æã®è¦³ç‚¹ï¼š
                1. æŠ€è¡“ã®æ¦‚è¦ã¨æœ€æ–°å‹•å‘
                2. ä¸»è¦ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
                3. ä»Šå¾Œã®å±•æœ›
                4. å‚è€ƒã¨ãªã‚‹æƒ…å ±æº
                
                å®¢è¦³çš„ã§ä¸­ç«‹çš„ãªç«‹å ´ã‹ã‚‰åˆ†æã‚’è¡Œã„ã€å®Ÿç”¨çš„ãªæ´å¯Ÿã‚’æä¾›ã—ã¦ãã ã•ã„ã€‚
            - id: user-prompt-3
              role: user
              text: |
                æŠ€è¡“ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼š{{#sys.query#}}
                
                è¦ç´„ã•ã‚ŒãŸæ¤œç´¢çµæœï¼š
                {{#preprocessor_node.text#}}
                
                ä¸Šè¨˜ã®æƒ…å ±ã‚’åŸºã«ã€ã“ã®æŠ€è¡“ã«ã¤ã„ã¦ä»¥ä¸‹ã®å½¢å¼ã§åˆ†æçµæœã‚’æç¤ºã—ã¦ãã ã•ã„ï¼š
                
                ğŸ“Š æŠ€è¡“ã®æ¦‚è¦ã¨æœ€æ–°å‹•å‘
                [æŠ€è¡“ã®åŸºæœ¬æ¦‚å¿µã¨æœ€æ–°ã®ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’è¨˜è¼‰]
                
                ğŸ’¼ ä¸»è¦ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
                - [å…·ä½“çš„ãªæ´»ç”¨ä¾‹ã‚’ç®‡æ¡æ›¸ãã§]
                
                ğŸ”® ä»Šå¾Œã®å±•æœ›
                - [å°†æ¥çš„ãªç™ºå±•å¯èƒ½æ€§ã‚’ç®‡æ¡æ›¸ãã§]
                
                ğŸ“š å‚è€ƒã¨ãªã‚‹æƒ…å ±æº
                - [è©³ç´°ã‚’å­¦ã¶ãŸã‚ã®æ¨å¥¨ãƒªã‚½ãƒ¼ã‚¹ã‚’ç®‡æ¡æ›¸ãã§]
        height: 98
        id: analyzer_node
        position:
          x: 1250
          y: 200
        positionAbsolute:
          x: 1250
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "{{#analyzer_node.text#}}"
          desc: "åˆ†æçµæœã‚’è¡¨ç¤º"
          selected: false
          title: "å›ç­”"
          type: answer
          variables: []
        height: 107
        id: answer_node
        position:
          x: 1550
          y: 200
        positionAbsolute:
          x: 1550
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
    viewport:
      x: 0
      y: 0
      zoom: 0.8