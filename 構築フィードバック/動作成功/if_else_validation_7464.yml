app:
  description: "IF/ELSEã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å‹•ä½œæ¤œè¨¼ç”¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³"
  icon: "ğŸ”„"
  icon_background: "#E0E0E0"
  mode: advanced-chat
  name: "IF/ELSEæ¤œè¨¼ã‚¢ãƒ—ãƒª"
  use_icon_as_answer_icon: false

dependencies: []

kind: app

version: 0.3.0

workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      enabled: false
    opening_statement: |
      IF/ELSEæ¤œè¨¼ç”¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚
      ä»¥ä¸‹ã®æ¤œè¨¼ã‚’å®Ÿè¡Œã—ã¾ã™ï¼š
      1. åŸºæœ¬çš„ãªæ¡ä»¶åˆ†å²ï¼ˆæ–‡å­—åˆ—ã€æ•°å€¤ã€NULLï¼‰
      2. è¤‡æ•°æ¡ä»¶ï¼ˆAND/ORï¼‰
      3. è¤‡é›‘ãªåˆ†å²ãƒ‘ã‚¿ãƒ¼ãƒ³
      
      ä½•ã‹å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions:
      - "ãƒ†ã‚¹ãƒˆé–‹å§‹"
      - "é«˜ã‚¹ã‚³ã‚¢ã®ãƒ†ã‚¹ãƒˆ"
      - "ä½ã‚¹ã‚³ã‚¢ã®ãƒ†ã‚¹ãƒˆ"
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
      - data:
          isInLoop: false
          sourceType: start
          targetType: llm
        id: start-variable-edge
        selected: false
        source: start_node
        sourceHandle: source
        target: variable_setup_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: llm
          targetType: if-else
        id: variable-basic-edge
        selected: false
        source: variable_setup_node
        sourceHandle: source
        target: basic_condition_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: llm
        id: basic-high-edge
        selected: false
        source: basic_condition_node
        sourceHandle: high_case
        target: high_result_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: llm
        id: basic-medium-edge
        selected: false
        source: basic_condition_node
        sourceHandle: medium_case
        target: medium_result_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: llm
        id: basic-low-edge
        selected: false
        source: basic_condition_node
        sourceHandle: false
        target: low_result_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: llm
          targetType: if-else
        id: high-numeric-edge
        selected: false
        source: high_result_node
        sourceHandle: source
        target: numeric_condition_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: llm
          targetType: if-else
        id: medium-numeric-edge
        selected: false
        source: medium_result_node
        sourceHandle: source
        target: numeric_condition_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: llm
          targetType: if-else
        id: low-numeric-edge
        selected: false
        source: low_result_node
        sourceHandle: source
        target: numeric_condition_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: llm
        id: numeric-excellent-edge
        selected: false
        source: numeric_condition_node
        sourceHandle: excellent_case
        target: excellent_result_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: llm
        id: numeric-good-edge
        selected: false
        source: numeric_condition_node
        sourceHandle: good_case
        target: good_result_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: llm
        id: numeric-default-edge
        selected: false
        source: numeric_condition_node
        sourceHandle: false
        target: default_result_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: llm
          targetType: if-else
        id: excellent-complex-edge
        selected: false
        source: excellent_result_node
        sourceHandle: source
        target: complex_condition_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: llm
          targetType: if-else
        id: good-complex-edge
        selected: false
        source: good_result_node
        sourceHandle: source
        target: complex_condition_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: llm
          targetType: if-else
        id: default-complex-edge
        selected: false
        source: default_result_node
        sourceHandle: source
        target: complex_condition_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: complex-special-edge
        selected: false
        source: complex_condition_node
        sourceHandle: special_case
        target: special_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: complex-keyword-edge
        selected: false
        source: complex_condition_node
        sourceHandle: keyword_case
        target: keyword_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: complex-default-edge
        selected: false
        source: complex_condition_node
        sourceHandle: false
        target: default_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
    nodes:
      - data:
          desc: "é–‹å§‹ãƒãƒ¼ãƒ‰"
          selected: false
          title: "é–‹å§‹"
          type: start
          variables: []
        height: 54
        id: start_node
        position:
          x: 50
          y: 300
        positionAbsolute:
          x: 50
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          model:
            provider: openai
            name: gpt-4o
            mode: chat
          prompt_template:
            - id: system-setup
              role: system
              text: |
                ãƒ†ã‚¹ãƒˆç”¨ã®å¤‰æ•°ã‚’è¨­å®šã—ã¾ã™ã€‚
                ä»¥ä¸‹ã®å¤‰æ•°ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ï¼š
                - category: "high", "medium", "low"ã®ã„ãšã‚Œã‹
                - score: 0-100ã®æ•°å€¤
                - status: "active", "pending", "inactive"ã®ã„ãšã‚Œã‹
                - description: ãƒ†ã‚¹ãƒˆã®èª¬æ˜æ–‡ï¼ˆå¿…ãš"ç·Šæ€¥"ã¾ãŸã¯"é€šå¸¸"ã‚’å«ã‚€ï¼‰
                - is_empty: ç©ºæ–‡å­—åˆ—ã¾ãŸã¯NULL
            - id: user-setup
              role: user
              text: |
                ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›: {{#sys.query#}}
                
                ä¸Šè¨˜ã®å…¥åŠ›ã«åŸºã¥ã„ã¦ã€ãƒ†ã‚¹ãƒˆç”¨ã®å¤‰æ•°ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚
          completion_params:
            temperature: 0.3
            max_tokens: 500
          structured_output_enabled: false
          vision:
            enabled: false
          context:
            enabled: false
            variable_selector: []
          desc: "ãƒ†ã‚¹ãƒˆç”¨å¤‰æ•°ã®è¨­å®š"
          selected: false
          title: "å¤‰æ•°è¨­å®š"
          type: llm
        height: 98
        id: variable_setup_node
        position:
          x: 350
          y: 300
        positionAbsolute:
          x: 350
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          type: if-else
          cases:
            - id: high_case
              case_id: high_case
              conditions:
                - variable_selector:
                    - variable_setup_node
                    - text
                  comparison_operator: contains
                  value: "category: \"high\""
              logical_operator: and
            - id: medium_case
              case_id: medium_case
              conditions:
                - variable_selector:
                    - variable_setup_node
                    - text
                  comparison_operator: contains
                  value: "category: \"medium\""
              logical_operator: and
          desc: "åŸºæœ¬çš„ãªæ¡ä»¶åˆ†å²ï¼ˆæ–‡å­—åˆ—ï¼‰"
          selected: false
          title: "åŸºæœ¬æ¡ä»¶åˆ†å²"
        height: 198
        id: basic_condition_node
        position:
          x: 650
          y: 300
        positionAbsolute:
          x: 650
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          model:
            provider: openai
            name: gpt-4o
            mode: chat
          prompt_template:
            - id: high-msg
              role: system
              text: "ã‚«ãƒ†ã‚´ãƒªãŒHIGHã®å‡¦ç†çµæœã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚"
            - id: high-user
              role: user
              text: "HIGHã‚«ãƒ†ã‚´ãƒªãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸã€‚ã‚¹ã‚³ã‚¢ï¼š{{#variable_setup_node.text#}}"
          completion_params:
            temperature: 0.3
            max_tokens: 200
          structured_output_enabled: false
          vision:
            enabled: false
          context:
            enabled: false
            variable_selector: []
          desc: "HIGHã‚«ãƒ†ã‚´ãƒªã®å‡¦ç†"
          selected: false
          title: "HIGHçµæœ"
          type: llm
        height: 98
        id: high_result_node
        position:
          x: 950
          y: 100
        positionAbsolute:
          x: 950
          y: 100
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          model:
            provider: openai
            name: gpt-4o
            mode: chat
          prompt_template:
            - id: medium-msg
              role: system
              text: "ã‚«ãƒ†ã‚´ãƒªãŒMEDIUMã®å‡¦ç†çµæœã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚"
            - id: medium-user
              role: user
              text: "MEDIUMã‚«ãƒ†ã‚´ãƒªãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸã€‚ã‚¹ã‚³ã‚¢ï¼š{{#variable_setup_node.text#}}"
          completion_params:
            temperature: 0.3
            max_tokens: 200
          structured_output_enabled: false
          vision:
            enabled: false
          context:
            enabled: false
            variable_selector: []
          desc: "MEDIUMã‚«ãƒ†ã‚´ãƒªã®å‡¦ç†"
          selected: false
          title: "MEDIUMçµæœ"
          type: llm
        height: 98
        id: medium_result_node
        position:
          x: 950
          y: 300
        positionAbsolute:
          x: 950
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          model:
            provider: openai
            name: gpt-4o
            mode: chat
          prompt_template:
            - id: low-msg
              role: system
              text: "ã‚«ãƒ†ã‚´ãƒªãŒLOWã¾ãŸã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å‡¦ç†çµæœã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚"
            - id: low-user
              role: user
              text: "LOWã‚«ãƒ†ã‚´ãƒªã¾ãŸã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸã€‚ã‚¹ã‚³ã‚¢ï¼š{{#variable_setup_node.text#}}"
          completion_params:
            temperature: 0.3
            max_tokens: 200
          structured_output_enabled: false
          vision:
            enabled: false
          context:
            enabled: false
            variable_selector: []
          desc: "LOWã‚«ãƒ†ã‚´ãƒª/ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å‡¦ç†"
          selected: false
          title: "LOW/ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆçµæœ"
          type: llm
        height: 98
        id: low_result_node
        position:
          x: 950
          y: 500
        positionAbsolute:
          x: 950
          y: 500
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          type: if-else
          cases:
            - id: excellent_case
              case_id: excellent_case
              conditions:
                - variable_selector:
                    - variable_setup_node
                    - text
                  comparison_operator: contains
                  value: "score: "
                - variable_selector:
                    - variable_setup_node
                    - text
                  comparison_operator: contains
                  value: "9"
              logical_operator: and
            - id: good_case
              case_id: good_case
              conditions:
                - variable_selector:
                    - variable_setup_node
                    - text
                  comparison_operator: contains
                  value: "score: "
                - variable_selector:
                    - variable_setup_node
                    - text
                  comparison_operator: contains
                  value: "6"
              logical_operator: or
          desc: "æ•°å€¤æ¯”è¼ƒï¼ˆUnicodeã¯å®Ÿéš›ã®æ•°å€¤æ¯”è¼ƒã§ã¯ä½¿ç”¨å›°é›£ãªãŸã‚æ–‡å­—åˆ—ã§ä»£æ›¿ï¼‰"
          selected: false
          title: "æ•°å€¤æ¡ä»¶åˆ†å²"
        height: 220
        id: numeric_condition_node
        position:
          x: 1250
          y: 300
        positionAbsolute:
          x: 1250
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          model:
            provider: openai
            name: gpt-4o
            mode: chat
          prompt_template:
            - id: excellent-msg
              role: system
              text: "å„ªç§€ãªã‚¹ã‚³ã‚¢ã®å‡¦ç†çµæœã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚"
            - id: excellent-user
              role: user
              text: "å„ªç§€ãªã‚¹ã‚³ã‚¢ï¼ˆ90ä»¥ä¸Šï¼‰ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸã€‚"
          completion_params:
            temperature: 0.3
            max_tokens: 200
          structured_output_enabled: false
          vision:
            enabled: false
          context:
            enabled: false
            variable_selector: []
          desc: "å„ªç§€ã‚¹ã‚³ã‚¢ã®å‡¦ç†"
          selected: false
          title: "å„ªç§€çµæœ"
          type: llm
        height: 98
        id: excellent_result_node
        position:
          x: 1550
          y: 100
        positionAbsolute:
          x: 1550
          y: 100
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          model:
            provider: openai
            name: gpt-4o
            mode: chat
          prompt_template:
            - id: good-msg
              role: system
              text: "è‰¯å¥½ãªã‚¹ã‚³ã‚¢ã®å‡¦ç†çµæœã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚"
            - id: good-user
              role: user
              text: "è‰¯å¥½ãªã‚¹ã‚³ã‚¢ï¼ˆ60-89ï¼‰ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸã€‚"
          completion_params:
            temperature: 0.3
            max_tokens: 200
          structured_output_enabled: false
          vision:
            enabled: false
          context:
            enabled: false
            variable_selector: []
          desc: "è‰¯å¥½ã‚¹ã‚³ã‚¢ã®å‡¦ç†"
          selected: false
          title: "è‰¯å¥½çµæœ"
          type: llm
        height: 98
        id: good_result_node
        position:
          x: 1550
          y: 300
        positionAbsolute:
          x: 1550
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          model:
            provider: openai
            name: gpt-4o
            mode: chat
          prompt_template:
            - id: default-msg
              role: system
              text: "ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¹ã‚³ã‚¢ã®å‡¦ç†çµæœã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚"
            - id: default-user
              role: user
              text: "ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¹ã‚³ã‚¢ï¼ˆ60æœªæº€ï¼‰ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸã€‚"
          completion_params:
            temperature: 0.3
            max_tokens: 200
          structured_output_enabled: false
          vision:
            enabled: false
          context:
            enabled: false
            variable_selector: []
          desc: "ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¹ã‚³ã‚¢ã®å‡¦ç†"
          selected: false
          title: "ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆçµæœ"
          type: llm
        height: 98
        id: default_result_node
        position:
          x: 1550
          y: 500
        positionAbsolute:
          x: 1550
          y: 500
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          type: if-else
          cases:
            - id: special_case
              case_id: special_case
              conditions:
                - variable_selector:
                    - variable_setup_node
                    - text
                  comparison_operator: contains
                  value: "status: \"active\""
                - variable_selector:
                    - variable_setup_node
                    - text
                  comparison_operator: contains
                  value: "ç·Šæ€¥"
              logical_operator: and
            - id: keyword_case
              case_id: keyword_case
              conditions:
                - variable_selector:
                    - variable_setup_node
                    - text
                  comparison_operator: contains
                  value: "ç·Šæ€¥"
              logical_operator: and
          desc: "è¤‡é›‘ãªæ¡ä»¶ï¼ˆAND/ORã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼‰"
          selected: false
          title: "è¤‡é›‘ãªæ¡ä»¶åˆ†å²"
        height: 250
        id: complex_condition_node
        position:
          x: 1850
          y: 300
        positionAbsolute:
          x: 1850
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: |
            ## ç‰¹åˆ¥ãªæ¡ä»¶ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸï¼
            
            ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‹ã¤ç·Šæ€¥ãƒ•ãƒ©ã‚°ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™ã€‚
            
            ### æ¤œè¨¼çµæœï¼š
            - åŸºæœ¬æ¡ä»¶åˆ†å²: âœ… åˆæ ¼
            - æ•°å€¤æ¡ä»¶åˆ†å²: âœ… åˆæ ¼
            - è¤‡é›‘ãªæ¡ä»¶åˆ†å²ï¼ˆANDæ¡ä»¶ï¼‰: âœ… åˆæ ¼
            
            {{#excellent_result_node.text#}}
            {{#good_result_node.text#}}
            {{#default_result_node.text#}}
          desc: "ç‰¹åˆ¥æ¡ä»¶ã®æœ€çµ‚å›ç­”"
          selected: false
          title: "ç‰¹åˆ¥æ¡ä»¶å›ç­”"
          type: answer
          variables: []
        height: 374
        id: special_answer_node
        position:
          x: 2150
          y: 100
        positionAbsolute:
          x: 2150
          y: 100
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: |
            ## ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¡ä»¶ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ
            
            èª¬æ˜æ–‡ã«"ç·Šæ€¥"ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚
            
            ### æ¤œè¨¼çµæœï¼š
            - åŸºæœ¬æ¡ä»¶åˆ†å²: âœ… åˆæ ¼
            - æ•°å€¤æ¡ä»¶åˆ†å²: âœ… åˆæ ¼
            - è¤‡é›‘ãªæ¡ä»¶åˆ†å²ï¼ˆã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼‰: âœ… åˆæ ¼
            
            {{#excellent_result_node.text#}}
            {{#good_result_node.text#}}
            {{#default_result_node.text#}}
          desc: "ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¡ä»¶ã®æœ€çµ‚å›ç­”"
          selected: false
          title: "ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å›ç­”"
          type: answer
          variables: []
        height: 374
        id: keyword_answer_node
        position:
          x: 2150
          y: 300
        positionAbsolute:
          x: 2150
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: |
            ## é€šå¸¸ã®å‡¦ç†çµæœ
            
            ç‰¹åˆ¥ãªæ¡ä»¶ã«ã¯åˆè‡´ã—ã¾ã›ã‚“ã§ã—ãŸã€‚
            
            ### æ¤œè¨¼çµæœï¼š
            - åŸºæœ¬æ¡ä»¶åˆ†å²: âœ… åˆæ ¼
            - æ•°å€¤æ¡ä»¶åˆ†å²: âœ… åˆæ ¼
            - è¤‡é›‘ãªæ¡ä»¶åˆ†å²: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚±ãƒ¼ã‚¹
            
            {{#excellent_result_node.text#}}
            {{#good_result_node.text#}}
            {{#default_result_node.text#}}
          desc: "ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æœ€çµ‚å›ç­”"
          selected: false
          title: "ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå›ç­”"
          type: answer
          variables: []
        height: 374
        id: default_answer_node
        position:
          x: 2150
          y: 500
        positionAbsolute:
          x: 2150
          y: 500
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
    viewport:
      x: 0
      y: 0
      zoom: 0.5