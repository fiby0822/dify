app:
  description: "LLMã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®memoryè¨­å®šãƒ«ãƒ¼ãƒ«æ¤œè¨¼ç”¨ã‚¢ãƒ—ãƒªã€‚3ã¤ã®ç•°ãªã‚‹memoryè¨­å®šãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ç”¨ã—ã¦ãƒ«ãƒ¼ãƒ«ã®å‹•ä½œã‚’ç¢ºèªã—ã¾ã™ã€‚"
  icon: "ğŸ§ª"
  icon_background: "#FFE5CC"
  mode: advanced-chat
  name: "LLMãƒ¡ãƒ¢ãƒªè¨­å®šæ¤œè¨¼ã‚¢ãƒ—ãƒª"
  use_icon_as_answer_icon: false

dependencies: []

kind: app

version: 0.3.0

workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      enabled: false
    opening_statement: |
      LLMã®memoryè¨­å®šæ¤œè¨¼ã‚¢ãƒ—ãƒªã¸ã‚ˆã†ã“ãï¼
      
      ã“ã®ã‚¢ãƒ—ãƒªã¯3ã¤ã®ç•°ãªã‚‹memoryè¨­å®šãƒ‘ã‚¿ãƒ¼ãƒ³ã§å‹•ä½œã—ã¾ã™ï¼š
      1. memoryãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰çœç•¥ï¼ˆæ¨å¥¨ï¼‰
      2. memoryç„¡åŠ¹åŒ–ï¼ˆå®Œå…¨æ§‹é€ ï¼‰
      3. memoryæœ‰åŠ¹åŒ–ï¼ˆä¼šè©±å±¥æ­´ä¿æŒï¼‰
      
      ä½•ã‹è³ªå•ã‚’ã—ã¦ãã ã•ã„ã€‚3ã¤ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§å‡¦ç†ã—ã¦çµæœã‚’çµ±åˆã—ã¾ã™ã€‚
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions:
      - "ä»Šæ—¥ã®å¤©æ°—ã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„"
      - "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªPythonã®ç‰¹å¾´ã¯ï¼Ÿ"
      - "å¥åº·çš„ãªç”Ÿæ´»ç¿’æ…£ã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„"
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
      - data:
          isInLoop: false
          sourceType: start
          targetType: llm
        id: start-pattern1-edge
        selected: false
        source: start_node
        sourceHandle: source
        target: llm_no_memory_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: start
          targetType: llm
        id: start-pattern2-edge
        selected: false
        source: start_node
        sourceHandle: source
        target: llm_memory_disabled_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: start
          targetType: llm
        id: start-pattern3-edge
        selected: false
        source: start_node
        sourceHandle: source
        target: llm_memory_enabled_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: llm
          targetType: llm
        id: pattern1-integrator-edge
        selected: false
        source: llm_no_memory_node
        sourceHandle: source
        target: response_integrator_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: llm
          targetType: llm
        id: pattern2-integrator-edge
        selected: false
        source: llm_memory_disabled_node
        sourceHandle: source
        target: response_integrator_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: llm
          targetType: llm
        id: pattern3-integrator-edge
        selected: false
        source: llm_memory_enabled_node
        sourceHandle: source
        target: response_integrator_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: llm
          targetType: answer
        id: integrator-answer-edge
        selected: false
        source: response_integrator_node
        sourceHandle: source
        target: answer_node
        targetHandle: target
        type: custom
        zIndex: 0
    nodes:
      - data:
          desc: "ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã®é–‹å§‹ç‚¹"
          selected: false
          title: "é–‹å§‹"
          type: start
          variables: []
        height: 54
        id: start_node
        position:
          x: 50
          y: 300
        positionAbsolute:
          x: 50
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          model:
            provider: openai
            name: gpt-4o
            mode: chat
          prompt_template:
            - id: system-pattern1-1
              role: system
              text: |
                ã‚ãªãŸã¯ãƒ‘ã‚¿ãƒ¼ãƒ³1ã®ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚
                memoryãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å®Œå…¨ã«çœç•¥ã—ãŸè¨­å®šã§å‹•ä½œã—ã¦ã„ã¾ã™ã€‚
                ã“ã‚Œã¯æ¨å¥¨ã•ã‚Œã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚
                è³ªå•ã«ç°¡æ½”ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚
            - id: user-pattern1-1
              role: user
              text: |
                è³ªå•: {{#sys.query#}}
          completion_params:
            temperature: 0.7
            max_tokens: 500
          structured_output_enabled: false
          vision:
            enabled: false
          variables: []
          context:
            enabled: false
            variable_selector: []
          desc: "ãƒ‘ã‚¿ãƒ¼ãƒ³1: memoryãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰çœç•¥ï¼ˆæ¨å¥¨ï¼‰"
          selected: false
          title: "ãƒ¡ãƒ¢ãƒªè¨­å®šãªã—"
          type: llm
        height: 98
        id: llm_no_memory_node
        position:
          x: 350
          y: 100
        positionAbsolute:
          x: 350
          y: 100
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          model:
            provider: openai
            name: gpt-4o
            mode: chat
          prompt_template:
            - id: system-pattern2-1
              role: system
              text: |
                ã‚ãªãŸã¯ãƒ‘ã‚¿ãƒ¼ãƒ³2ã®ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚
                memoryè¨­å®šã‚’å®Œå…¨ãªæ§‹é€ ã§è¨˜è¿°ã—ã€ç„¡åŠ¹åŒ–ã—ã¦ã„ã¾ã™ã€‚
                windowãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å«ã‚€å®Œå…¨ãªå½¢å¼ã§ã™ã€‚
                è³ªå•ã«ç°¡æ½”ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚
            - id: user-pattern2-1
              role: user
              text: |
                è³ªå•: {{#sys.query#}}
          completion_params:
            temperature: 0.7
            max_tokens: 500
          structured_output_enabled: false
          vision:
            enabled: false
          variables: []
          context:
            enabled: false
            variable_selector: []
          memory:
            enabled: false
            window:
              enabled: false
              size: 10
            role_prefix:
              assistant: ''
              user: ''
          desc: "ãƒ‘ã‚¿ãƒ¼ãƒ³2: memoryç„¡åŠ¹åŒ–ï¼ˆå®Œå…¨æ§‹é€ ï¼‰"
          selected: false
          title: "ãƒ¡ãƒ¢ãƒªç„¡åŠ¹åŒ–"
          type: llm
        height: 98
        id: llm_memory_disabled_node
        position:
          x: 350
          y: 300
        positionAbsolute:
          x: 350
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          model:
            provider: openai
            name: gpt-4o
            mode: chat
          prompt_template:
            - id: system-pattern3-1
              role: system
              text: |
                ã‚ãªãŸã¯ãƒ‘ã‚¿ãƒ¼ãƒ³3ã®ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚
                memoryè¨­å®šã‚’æœ‰åŠ¹åŒ–ã—ã€ä¼šè©±å±¥æ­´ã‚’ä¿æŒã—ã¾ã™ã€‚
                windowã‚µã‚¤ã‚ºã¯10ã«è¨­å®šã•ã‚Œã¦ã„ã¾ã™ã€‚
                è³ªå•ã«ç°¡æ½”ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚
            - id: user-pattern3-1
              role: user
              text: |
                è³ªå•: {{#sys.query#}}
          completion_params:
            temperature: 0.7
            max_tokens: 500
          structured_output_enabled: false
          vision:
            enabled: false
          variables: []
          context:
            enabled: false
            variable_selector: []
          memory:
            enabled: true
            window:
              enabled: true
              size: 10
            role_prefix:
              assistant: 'ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ'
              user: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼'
            query_prompt_template: '{{#sys.query#}}'
          desc: "ãƒ‘ã‚¿ãƒ¼ãƒ³3: memoryæœ‰åŠ¹åŒ–ï¼ˆä¼šè©±å±¥æ­´ä¿æŒï¼‰"
          selected: false
          title: "ãƒ¡ãƒ¢ãƒªæœ‰åŠ¹åŒ–"
          type: llm
        height: 98
        id: llm_memory_enabled_node
        position:
          x: 350
          y: 500
        positionAbsolute:
          x: 350
          y: 500
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          model:
            provider: openai
            name: gpt-4o
            mode: chat
          prompt_template:
            - id: system-integrator-1
              role: system
              text: |
                ã‚ãªãŸã¯å›ç­”çµ±åˆæ‹…å½“ã§ã™ã€‚
                3ã¤ã®ç•°ãªã‚‹memoryè¨­å®šãƒ‘ã‚¿ãƒ¼ãƒ³ã‹ã‚‰ã®å›ç­”ã‚’çµ±åˆã—ã€
                æ¤œè¨¼çµæœã¨ã—ã¦é©åˆ‡ã«ã¾ã¨ã‚ã¦ãã ã•ã„ã€‚
                
                å„ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å‹•ä½œçŠ¶æ³ã‚‚å«ã‚ã¦å ±å‘Šã—ã¦ãã ã•ã„ã€‚
            - id: user-integrator-1
              role: user
              text: |
                å…ƒã®è³ªå•: {{#sys.query#}}
                
                ãƒ‘ã‚¿ãƒ¼ãƒ³1ï¼ˆmemoryçœç•¥ï¼‰ã®å›ç­”:
                {{#llm_no_memory_node.text#}}
                
                ãƒ‘ã‚¿ãƒ¼ãƒ³2ï¼ˆmemoryç„¡åŠ¹åŒ–ï¼‰ã®å›ç­”:
                {{#llm_memory_disabled_node.text#}}
                
                ãƒ‘ã‚¿ãƒ¼ãƒ³3ï¼ˆmemoryæœ‰åŠ¹åŒ–ï¼‰ã®å›ç­”:
                {{#llm_memory_enabled_node.text#}}
                
                ã“ã‚Œã‚‰ã®å›ç­”ã‚’çµ±åˆã—ã€memoryè¨­å®šã®æ¤œè¨¼çµæœã¨ã—ã¦å ±å‘Šã—ã¦ãã ã•ã„ã€‚
          completion_params:
            temperature: 0.3
            max_tokens: 1000
          structured_output_enabled: false
          vision:
            enabled: false
          context:
            enabled: false
            variable_selector: []
          desc: "3ã¤ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å›ç­”ã‚’çµ±åˆ"
          selected: false
          title: "å›ç­”çµ±åˆ"
          type: llm
        height: 98
        id: response_integrator_node
        position:
          x: 650
          y: 300
        positionAbsolute:
          x: 650
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "{{#response_integrator_node.text#}}"
          desc: "çµ±åˆã•ã‚ŒãŸæ¤œè¨¼çµæœã‚’è¡¨ç¤º"
          selected: false
          title: "æ¤œè¨¼çµæœ"
          type: answer
          variables: []
        height: 107
        id: answer_node
        position:
          x: 950
          y: 300
        positionAbsolute:
          x: 950
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
    viewport:
      x: 0
      y: 0
      zoom: 0.8