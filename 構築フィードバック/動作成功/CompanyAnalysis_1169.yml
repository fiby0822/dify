app:
  description: "ä¼æ¥­åã‚’å…¥åŠ›ã™ã‚‹ã¨ã€ãã®ä¼æ¥­ã«é–¢ã™ã‚‹æœ€æ–°æƒ…å ±ã‚’WEBæ¤œç´¢ã§å–å¾—ã—ã€åˆ†æãƒ»æ•´ç†ã—ã¦æä¾›ã™ã‚‹ä¼æ¥­æƒ…å ±åˆ†æãƒ„ãƒ¼ãƒ«"
  icon: "ğŸ¢"
  icon_background: "#E0F2FF"
  mode: advanced-chat
  name: "ä¼æ¥­æƒ…å ±åˆ†æãƒ„ãƒ¼ãƒ«"
  use_icon_as_answer_icon: false

dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/tavily:0.0.5@b60e09d9cc1c314b7f9c0a853bb006bcb40cc12c3cf1f91406771b8f088beaae

kind: app

version: 0.3.0

workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      enabled: false
    opening_statement: |
      ä¼æ¥­æƒ…å ±åˆ†æãƒ„ãƒ¼ãƒ«ã¸ã‚ˆã†ã“ãï¼
      
      åˆ†æã—ãŸã„ä¼æ¥­åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚
      æœ€æ–°ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚„å‹•å‘ã‚’æ¤œç´¢ã—ã€ä»¥ä¸‹ã®è¦³ç‚¹ã§åˆ†æã—ã¾ã™ï¼š
      
      ğŸ“Š ä¼æ¥­æ¦‚è¦
      ğŸ“ˆ æœ€æ–°å‹•å‘
      ğŸ† æ¥­ç•Œã§ã®ä½ç½®ã¥ã‘
      ğŸ”® ä»Šå¾Œã®å±•æœ›
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions:
      - "ãƒˆãƒ¨ã‚¿è‡ªå‹•è»Š"
      - "ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯ã‚°ãƒ«ãƒ¼ãƒ—"
      - "ä»»å¤©å ‚"
      - "ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒªãƒ†ã‚¤ãƒªãƒ³ã‚°"
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
      - data:
          isInLoop: false
          sourceType: start
          targetType: tool
        id: start-search-edge
        selected: false
        source: start_node
        sourceHandle: source
        target: web_search_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: tool
          targetType: llm
        id: search-summarizer-edge
        selected: false
        source: web_search_node
        sourceHandle: source
        target: summarizer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: llm
          targetType: llm
        id: summarizer-analyzer-edge
        selected: false
        source: summarizer_node
        sourceHandle: source
        target: analyzer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: llm
          targetType: answer
        id: analyzer-answer-edge
        selected: false
        source: analyzer_node
        sourceHandle: source
        target: answer_node
        targetHandle: target
        type: custom
        zIndex: 0
    nodes:
      - data:
          desc: "ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ä¼æ¥­åã‚’å—ã‘å–ã‚‹"
          selected: false
          title: "é–‹å§‹"
          type: start
          variables: []
        height: 54
        id: start_node
        position:
          x: 50
          y: 200
        positionAbsolute:
          x: 50
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          provider_id: langgenius/tavily/tavily
          provider_type: builtin
          tool_name: tavily_search
          provider_name: langgenius/tavily/tavily
          tool_label: Tavily Search
          is_team_authorization: true
          tool_parameters:
            query:
              type: mixed
              value: '{{#sys.query#}} æœ€æ–°ãƒ‹ãƒ¥ãƒ¼ã‚¹ å‹•å‘ æ¥­ç¸¾'
          tool_configurations:
            search_depth: basic
            topic: news
            time_range: week
            max_results: 3
            include_answer: 1
            include_images: 0
            include_raw_content: 0
          type: tool
          title: "ä¼æ¥­æƒ…å ±æ¤œç´¢"
          desc: "Tavily Searchã‚’ä½¿ç”¨ã—ã¦ä¼æ¥­ã®æœ€æ–°æƒ…å ±ã‚’æ¤œç´¢"
          selected: false
        height: 98
        id: web_search_node
        position:
          x: 350
          y: 200
        positionAbsolute:
          x: 350
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          context:
            enabled: false
            variable_selector: []
          desc: "æ¤œç´¢çµæœã‚’è¦ç´„ã—ã¦ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã‚’å‰Šæ¸›"
          model:
            completion_params:
              max_tokens: 1000
              temperature: 0.3
            mode: chat
            name: gpt-3.5-turbo
            provider: openai
          prompt_template:
            - id: system-1
              role: system
              text: |
                ã‚ãªãŸã¯ä¼æ¥­æƒ…å ±ã®è¦ç´„å°‚é–€å®¶ã§ã™ã€‚
                ä¸ãˆã‚‰ã‚ŒãŸæ¤œç´¢çµæœã‹ã‚‰é‡è¦ãªæƒ…å ±ã‚’æŠ½å‡ºã—ã€ç°¡æ½”ã«è¦ç´„ã—ã¦ãã ã•ã„ã€‚
                
                è¦ç´„ã®éš›ã¯ä»¥ä¸‹ã®ç‚¹ã«æ³¨ç›®ã—ã¦ãã ã•ã„ï¼š
                - æœ€æ–°ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚„ç™ºè¡¨
                - æ¥­ç¸¾ã‚„è²¡å‹™æƒ…å ±
                - æ–°è£½å“ã‚„ã‚µãƒ¼ãƒ“ã‚¹
                - çµŒå–¶æˆ¦ç•¥ã‚„æ–¹é‡
                - æ¥­ç•Œå†…ã§ã®å‹•å‘
                
                å†—é•·ãªæƒ…å ±ã¯çœãã€åˆ†æã«å¿…è¦ãªæƒ…å ±ã®ã¿ã‚’æŠ½å‡ºã—ã¦ãã ã•ã„ã€‚
            - id: user-1
              role: user
              text: |
                ä¼æ¥­åï¼š{{#sys.query#}}
                
                æ¤œç´¢çµæœï¼š
                {{#web_search_node.text#}}
                
                ä¸Šè¨˜ã®æ¤œç´¢çµæœã‹ã‚‰é‡è¦ãªæƒ…å ±ã‚’æŠ½å‡ºã—ã€500æ–‡å­—ç¨‹åº¦ã§è¦ç´„ã—ã¦ãã ã•ã„ã€‚
          selected: false
          structured_output_enabled: false
          title: "æƒ…å ±è¦ç´„"
          type: llm
          variables: []
          vision:
            enabled: false
        height: 98
        id: summarizer_node
        position:
          x: 650
          y: 200
        positionAbsolute:
          x: 650
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          context:
            enabled: false
            variable_selector: []
          desc: "è¦ç´„ã•ã‚ŒãŸæƒ…å ±ã‚’åŸºã«ä¼æ¥­åˆ†æã‚’å®Ÿæ–½"
          model:
            completion_params:
              max_tokens: 1500
              temperature: 0.4
            mode: chat
            name: gpt-4o
            provider: openai
          prompt_template:
            - id: system-2
              role: system
              text: |
                ã‚ãªãŸã¯ä¼æ¥­åˆ†æã®å°‚é–€å®¶ã§ã™ã€‚
                ä¸ãˆã‚‰ã‚ŒãŸä¼æ¥­æƒ…å ±ã‚’åŸºã«ã€åŒ…æ‹¬çš„ãªåˆ†æãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
                
                åˆ†æã¯ä»¥ä¸‹ã®4ã¤ã®è¦³ç‚¹ã‹ã‚‰è¡Œã„ã€ãã‚Œãã‚Œæ˜ç¢ºã«åŒºåˆ¥ã—ã¦è¨˜è¼‰ã—ã¦ãã ã•ã„ï¼š
                1. ä¼æ¥­æ¦‚è¦ï¼šäº‹æ¥­å†…å®¹ã€è¦æ¨¡ã€ä¸»åŠ›å•†å“ãƒ»ã‚µãƒ¼ãƒ“ã‚¹
                2. æœ€æ–°å‹•å‘ï¼šç›´è¿‘ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹ã€ç™ºè¡¨ã€å–ã‚Šçµ„ã¿ï¼ˆ3-5é …ç›®ï¼‰
                3. æ¥­ç•Œã§ã®ä½ç½®ã¥ã‘ï¼šç«¶åˆæ¯”è¼ƒã€å¸‚å ´ã‚·ã‚§ã‚¢ã€å¼·ã¿ãƒ»å¼±ã¿
                4. ä»Šå¾Œã®å±•æœ›ï¼šæˆé•·æˆ¦ç•¥ã€èª²é¡Œã€å°†æ¥æ€§
                
                å®¢è¦³çš„ã§å»ºè¨­çš„ãªåˆ†æã‚’å¿ƒãŒã‘ã€æŠ•è³‡å®¶ã‚„çµŒå–¶è€…ã«ã¨ã£ã¦æœ‰ç›Šãªæƒ…å ±ã‚’æä¾›ã—ã¦ãã ã•ã„ã€‚
            - id: user-2
              role: user
              text: |
                ä¼æ¥­åï¼š{{#sys.query#}}
                
                è¦ç´„ã•ã‚ŒãŸæƒ…å ±ï¼š
                {{#summarizer_node.text#}}
                
                ä¸Šè¨˜ã®æƒ…å ±ã‚’åŸºã«ã€ä»¥ä¸‹ã®å½¢å¼ã§ä¼æ¥­åˆ†æãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ï¼š
                
                ## ğŸ“Š ä¼æ¥­æ¦‚è¦
                [ä¼æ¥­ã®åŸºæœ¬æƒ…å ±ã¨äº‹æ¥­å†…å®¹ã‚’è¨˜è¼‰]
                
                ## ğŸ“ˆ æœ€æ–°å‹•å‘
                â€¢ [æœ€æ–°ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚„å–ã‚Šçµ„ã¿1]
                â€¢ [æœ€æ–°ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚„å–ã‚Šçµ„ã¿2]
                â€¢ [æœ€æ–°ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚„å–ã‚Šçµ„ã¿3]
                ï¼ˆ3-5é …ç›®ã‚’ç®‡æ¡æ›¸ãã§ï¼‰
                
                ## ğŸ† æ¥­ç•Œã§ã®ä½ç½®ã¥ã‘
                [ç«¶åˆä»–ç¤¾ã¨ã®æ¯”è¼ƒã€å¸‚å ´ã§ã®ç«‹ã¡ä½ç½®ã€å¼·ã¿ã¨èª²é¡Œã‚’è¨˜è¼‰]
                
                ## ğŸ”® ä»Šå¾Œã®å±•æœ›
                [æˆé•·æˆ¦ç•¥ã€å°†æ¥æ€§ã€æ³¨ç›®ã™ã¹ããƒã‚¤ãƒ³ãƒˆã‚’è¨˜è¼‰]
          selected: false
          structured_output_enabled: false
          title: "ä¼æ¥­åˆ†æ"
          type: llm
          variables: []
          vision:
            enabled: false
        height: 98
        id: analyzer_node
        position:
          x: 950
          y: 200
        positionAbsolute:
          x: 950
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: '{{#analyzer_node.text#}}'
          desc: "åˆ†æçµæœã‚’å‡ºåŠ›"
          selected: false
          title: "å›ç­”"
          type: answer
          variables: []
        height: 107
        id: answer_node
        position:
          x: 1250
          y: 200
        positionAbsolute:
          x: 1250
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
    viewport:
      x: 0
      y: 0
      zoom: 0.8