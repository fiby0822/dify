app:
  description: "IF/ELSEã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å‹•ä½œæ¤œè¨¼ç”¨YMLãƒ•ã‚¡ã‚¤ãƒ«"
  icon: "ğŸ§ª"
  icon_background: "#E0F7FA"
  mode: advanced-chat
  name: "IF_ELSEæ¤œè¨¼ãƒ†ã‚¹ãƒˆ"
  use_icon_as_answer_icon: false

dependencies: []

kind: app

version: 0.3.0

workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      enabled: false
    opening_statement: |
      IF/ELSEã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ¤œè¨¼ã‚’é–‹å§‹ã—ã¾ã™ã€‚
      
      ãƒ†ã‚¹ãƒˆå†…å®¹ï¼š
      1. æ•°å€¤ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€0-30ï¼ˆä½ï¼‰ã€31-70ï¼ˆä¸­ï¼‰ã€71-100ï¼ˆé«˜ï¼‰ã§åˆ†é¡ã—ã¾ã™
      2. ã€Œç·Šæ€¥ã€ã¨ã„ã†æ–‡å­—ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã—ã¾ã™
      3. æ•°å€¤ã¨æ–‡å­—åˆ—ã®ä¸¡æ–¹ã®æ¡ä»¶ã‚’çµ„ã¿åˆã‚ã›ã¦åˆ¤å®šã—ã¾ã™
      
      ä¾‹ãˆã°ã€Œ85 ç·Šæ€¥ã€ã¨å…¥åŠ›ã—ã¦ã¿ã¦ãã ã•ã„ã€‚
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions:
      - "25"
      - "50 ç·Šæ€¥"
      - "85"
      - "ç·Šæ€¥å¯¾å¿œãŒå¿…è¦ã§ã™"
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
      - data:
          isInLoop: false
          sourceType: start
          targetType: code
        id: start-parse-edge
        selected: false
        source: start_node
        sourceHandle: source
        target: parse_input_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: code
          targetType: if-else
        id: parse-numeric-edge
        selected: false
        source: parse_input_node
        sourceHandle: source
        target: numeric_check_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: low-answer-edge
        selected: false
        source: numeric_check_node
        sourceHandle: low_score_case
        target: low_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: medium-answer-edge
        selected: false
        source: numeric_check_node
        sourceHandle: medium_score_case
        target: medium_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: high-answer-edge
        selected: false
        source: numeric_check_node
        sourceHandle: high_score_case
        target: high_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: if-else
        id: numeric-string-edge
        selected: false
        source: numeric_check_node
        sourceHandle: false
        target: string_check_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: urgent-answer-edge
        selected: false
        source: string_check_node
        sourceHandle: contains_urgent_case
        target: urgent_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: if-else
        id: string-combined-edge
        selected: false
        source: string_check_node
        sourceHandle: false
        target: combined_check_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: combined-answer-edge
        selected: false
        source: combined_check_node
        sourceHandle: high_urgent_case
        target: combined_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: default-answer-edge
        selected: false
        source: combined_check_node
        sourceHandle: false
        target: default_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
    nodes:
      - data:
          desc: "é–‹å§‹ãƒãƒ¼ãƒ‰"
          selected: false
          title: "é–‹å§‹"
          type: start
          variables: []
        height: 54
        id: start_node
        position:
          x: 50
          y: 400
        positionAbsolute:
          x: 50
          y: 400
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          code: |
            import re
            
            user_input = str(sys.query)
            
            numeric_value = 0
            contains_urgent = False
            text_part = ""
            
            numbers = re.findall(r'\d+', user_input)
            if numbers:
                numeric_value = int(numbers[0])
            
            if 'ç·Šæ€¥' in user_input:
                contains_urgent = True
            
            text_part = re.sub(r'\d+', '', user_input).strip()
            
            result = {
                "numeric_value": numeric_value,
                "contains_urgent": contains_urgent,
                "text_part": text_part,
                "original_input": user_input
            }
          desc: "å…¥åŠ›ã‚’è§£æã—ã¦æ•°å€¤ã¨æ–‡å­—åˆ—ã‚’æŠ½å‡º"
          outputs:
            numeric_value:
              type: number
            contains_urgent:
              type: string
            text_part:
              type: string
            original_input:
              type: string
          selected: false
          title: "å…¥åŠ›è§£æ"
          type: code
          variables:
            - value_selector:
                - sys
                - query
              variable: sys.query
        height: 54
        id: parse_input_node
        position:
          x: 350
          y: 400
        positionAbsolute:
          x: 350
          y: 400
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          type: if-else
          cases:
            - id: low_score_case
              case_id: low_score_case
              conditions:
                - variable_selector:
                    - parse_input_node
                    - numeric_value
                  comparison_operator: "â‰¤"
                  value: 30
                - variable_selector:
                    - parse_input_node
                    - numeric_value
                  comparison_operator: ">"
                  value: 0
              logical_operator: and
            - id: medium_score_case
              case_id: medium_score_case
              conditions:
                - variable_selector:
                    - parse_input_node
                    - numeric_value
                  comparison_operator: "â‰¤"
                  value: 70
                - variable_selector:
                    - parse_input_node
                    - numeric_value
                  comparison_operator: ">"
                  value: 30
              logical_operator: and
            - id: high_score_case
              case_id: high_score_case
              conditions:
                - variable_selector:
                    - parse_input_node
                    - numeric_value
                  comparison_operator: "â‰¥"
                  value: 71
                - variable_selector:
                    - parse_input_node
                    - numeric_value
                  comparison_operator: "â‰¤"
                  value: 100
              logical_operator: and
          desc: "æ•°å€¤ã«ã‚ˆã‚‹åˆ†å²ï¼ˆä½ãƒ»ä¸­ãƒ»é«˜ï¼‰"
          selected: false
          title: "æ•°å€¤åˆ¤å®š"
        height: 220
        id: numeric_check_node
        position:
          x: 650
          y: 300
        positionAbsolute:
          x: 650
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: |
            ã€æ•°å€¤åˆ¤å®šçµæœï¼šä½ã€‘
            å…¥åŠ›å€¤ï¼š{{#parse_input_node.numeric_value#}}
            
            è©•ä¾¡ï¼š0-30ã®ç¯„å›²ï¼ˆä½ãƒ¬ãƒ™ãƒ«ï¼‰
            
            âœ… IF/ELSEã®æ•°å€¤æ¯”è¼ƒï¼ˆUnicodeæ¼”ç®—å­ï¼‰ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™ã€‚
          desc: "ä½ãƒ¬ãƒ™ãƒ«ã®å›ç­”"
          selected: false
          title: "ä½ãƒ¬ãƒ™ãƒ«å›ç­”"
          type: answer
          variables: []
        height: 107
        id: low_answer_node
        position:
          x: 950
          y: 100
        positionAbsolute:
          x: 950
          y: 100
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: |
            ã€æ•°å€¤åˆ¤å®šçµæœï¼šä¸­ã€‘
            å…¥åŠ›å€¤ï¼š{{#parse_input_node.numeric_value#}}
            
            è©•ä¾¡ï¼š31-70ã®ç¯„å›²ï¼ˆä¸­ãƒ¬ãƒ™ãƒ«ï¼‰
            
            âœ… IF/ELSEã®æ•°å€¤æ¯”è¼ƒï¼ˆUnicodeæ¼”ç®—å­ï¼‰ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™ã€‚
          desc: "ä¸­ãƒ¬ãƒ™ãƒ«ã®å›ç­”"
          selected: false
          title: "ä¸­ãƒ¬ãƒ™ãƒ«å›ç­”"
          type: answer
          variables: []
        height: 107
        id: medium_answer_node
        position:
          x: 950
          y: 250
        positionAbsolute:
          x: 950
          y: 250
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: |
            ã€æ•°å€¤åˆ¤å®šçµæœï¼šé«˜ã€‘
            å…¥åŠ›å€¤ï¼š{{#parse_input_node.numeric_value#}}
            
            è©•ä¾¡ï¼š71-100ã®ç¯„å›²ï¼ˆé«˜ãƒ¬ãƒ™ãƒ«ï¼‰
            
            âœ… IF/ELSEã®æ•°å€¤æ¯”è¼ƒï¼ˆUnicodeæ¼”ç®—å­ï¼‰ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™ã€‚
          desc: "é«˜ãƒ¬ãƒ™ãƒ«ã®å›ç­”"
          selected: false
          title: "é«˜ãƒ¬ãƒ™ãƒ«å›ç­”"
          type: answer
          variables: []
        height: 107
        id: high_answer_node
        position:
          x: 950
          y: 400
        positionAbsolute:
          x: 950
          y: 400
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          type: if-else
          cases:
            - id: contains_urgent_case
              case_id: contains_urgent_case
              conditions:
                - variable_selector:
                    - parse_input_node
                    - text_part
                  comparison_operator: contains
                  value: "ç·Šæ€¥"
              logical_operator: and
          desc: "æ–‡å­—åˆ—ã«ã‚ˆã‚‹åˆ†å²ï¼ˆç·Šæ€¥ã‚’å«ã‚€ï¼‰"
          selected: false
          title: "æ–‡å­—åˆ—åˆ¤å®š"
        height: 154
        id: string_check_node
        position:
          x: 950
          y: 550
        positionAbsolute:
          x: 950
          y: 550
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: |
            ã€æ–‡å­—åˆ—åˆ¤å®šçµæœï¼šç·Šæ€¥ã€‘
            å…¥åŠ›ï¼š{{#parse_input_node.original_input#}}
            
            ã€Œç·Šæ€¥ã€ã¨ã„ã†æ–‡å­—ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚
            
            âœ… IF/ELSEã®æ–‡å­—åˆ—éƒ¨åˆ†ä¸€è‡´ï¼ˆcontainsï¼‰ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™ã€‚
          desc: "ç·Šæ€¥ã‚’å«ã‚€å›ç­”"
          selected: false
          title: "ç·Šæ€¥å›ç­”"
          type: answer
          variables: []
        height: 107
        id: urgent_answer_node
        position:
          x: 1250
          y: 550
        positionAbsolute:
          x: 1250
          y: 550
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          type: if-else
          cases:
            - id: high_urgent_case
              case_id: high_urgent_case
              conditions:
                - variable_selector:
                    - parse_input_node
                    - numeric_value
                  comparison_operator: "â‰¥"
                  value: 71
                - variable_selector:
                    - parse_input_node
                    - text_part
                  comparison_operator: contains
                  value: "ç·Šæ€¥"
              logical_operator: and
          desc: "è¤‡æ•°æ¡ä»¶ã®çµ„ã¿åˆã‚ã›ï¼ˆé«˜ãƒ¬ãƒ™ãƒ«ã‹ã¤ç·Šæ€¥ï¼‰"
          selected: false
          title: "è¤‡åˆæ¡ä»¶åˆ¤å®š"
        height: 154
        id: combined_check_node
        position:
          x: 1250
          y: 700
        positionAbsolute:
          x: 1250
          y: 700
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: |
            ã€è¤‡åˆæ¡ä»¶åˆ¤å®šçµæœï¼šé«˜ãƒ¬ãƒ™ãƒ«ï¼‹ç·Šæ€¥ã€‘
            å…¥åŠ›ï¼š{{#parse_input_node.original_input#}}
            æ•°å€¤ï¼š{{#parse_input_node.numeric_value#}}
            
            é«˜ãƒ¬ãƒ™ãƒ«ï¼ˆ71ä»¥ä¸Šï¼‰ã‹ã¤ã€Œç·Šæ€¥ã€ã‚’å«ã‚€æ¡ä»¶ã«åˆè‡´ã—ã¾ã—ãŸã€‚
            
            âœ… IF/ELSEã®è¤‡æ•°æ¡ä»¶ï¼ˆANDï¼‰ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™ã€‚
            âœ… case_idãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã¾ã™ã€‚
          desc: "è¤‡åˆæ¡ä»¶ã®å›ç­”"
          selected: false
          title: "è¤‡åˆæ¡ä»¶å›ç­”"
          type: answer
          variables: []
        height: 107
        id: combined_answer_node
        position:
          x: 1550
          y: 700
        positionAbsolute:
          x: 1550
          y: 700
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: |
            ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆåˆ¤å®šã€‘
            å…¥åŠ›ï¼š{{#parse_input_node.original_input#}}
            
            æ•°å€¤ã«ã‚ˆã‚‹åˆ†é¡ã€ç·Šæ€¥åˆ¤å®šã€è¤‡åˆæ¡ä»¶ã®ã„ãšã‚Œã«ã‚‚è©²å½“ã—ã¾ã›ã‚“ã§ã—ãŸã€‚
            
            âœ… IF/ELSEã®falseã‚±ãƒ¼ã‚¹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™ã€‚
            âœ… ã‚¨ãƒ©ãƒ¼é˜²æ­¢ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆç‹¬ç«‹answerå‹ï¼‰ãŒæ­£ã—ãå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚
          desc: "ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å›ç­”"
          selected: false
          title: "ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå›ç­”"
          type: answer
          variables: []
        height: 107
        id: default_answer_node
        position:
          x: 1550
          y: 850
        positionAbsolute:
          x: 1550
          y: 850
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
    viewport:
      x: 0
      y: 0
      zoom: 0.8