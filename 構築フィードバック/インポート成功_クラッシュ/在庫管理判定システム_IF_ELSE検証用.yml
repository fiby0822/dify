app:
  description: "å•†å“åœ¨åº«ç®¡ç†ã®è‡ªå‹•åˆ¤å®šã‚·ã‚¹ãƒ†ãƒ ã€‚å•†å“åã€åœ¨åº«æ•°ã€ã‚«ãƒ†ã‚´ãƒªãƒ¼ã«åŸºã¥ã„ã¦ç™ºæ³¨ã®å¿…è¦æ€§ã‚’åˆ¤å®šã—ã¾ã™ã€‚"
  icon: "ğŸ“¦"
  icon_background: "#FFEAD5"
  mode: advanced-chat
  name: "åœ¨åº«ç®¡ç†åˆ¤å®šã‚·ã‚¹ãƒ†ãƒ "
  use_icon_as_answer_icon: false

dependencies: []

kind: app

version: 0.3.0

workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      enabled: false
    opening_statement: "å•†å“åã€åœ¨åº«æ•°ã€ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚\nä¾‹ï¼šãƒˆãƒãƒˆ 5å€‹ ç”Ÿé®®é£Ÿå“"
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions:
      - "ã‚Šã‚“ã” 8å€‹ ç”Ÿé®®é£Ÿå“"
      - "ãƒãƒ¼ãƒˆ 25å†Š æ–‡å…·"
      - "ç‰›ä¹³ 3æœ¬ ç”Ÿé®®é£Ÿå“"
      - "ãƒšãƒ³ 60æœ¬ æ–‡å…·"
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ""
      voice: ""
  graph:
    edges:
      - data:
          isInLoop: false
          sourceType: start
          targetType: code
        id: start-parse-edge
        selected: false
        source: start_node
        sourceHandle: source
        target: parse_input_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: code
          targetType: if-else
        id: parse-category-edge
        selected: false
        source: parse_input_node
        sourceHandle: source
        target: category_check_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: code
        id: category-fresh-edge
        selected: false
        source: category_check_node
        sourceHandle: fresh_food_case
        target: fresh_food_calculation_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: if-else
        id: category-other-edge
        selected: false
        source: category_check_node
        sourceHandle: "false"
        target: stock_check_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: code
          targetType: if-else
        id: fresh-check-edge
        selected: false
        source: fresh_food_calculation_node
        sourceHandle: source
        target: fresh_stock_check_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: stock-urgent-edge
        selected: false
        source: stock_check_node
        sourceHandle: urgent_order_case
        target: urgent_order_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: stock-normal-edge
        selected: false
        source: stock_check_node
        sourceHandle: normal_order_case
        target: normal_order_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: stock-consider-edge
        selected: false
        source: stock_check_node
        sourceHandle: consider_order_case
        target: consider_order_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: stock-sufficient-edge
        selected: false
        source: stock_check_node
        sourceHandle: "false"
        target: sufficient_stock_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: fresh-urgent-edge
        selected: false
        source: fresh_stock_check_node
        sourceHandle: fresh_urgent_case
        target: fresh_urgent_order_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: fresh-normal-edge
        selected: false
        source: fresh_stock_check_node
        sourceHandle: fresh_normal_case
        target: fresh_normal_order_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: fresh-consider-edge
        selected: false
        source: fresh_stock_check_node
        sourceHandle: fresh_consider_case
        target: fresh_consider_order_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: fresh-sufficient-edge
        selected: false
        source: fresh_stock_check_node
        sourceHandle: "false"
        target: fresh_sufficient_stock_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
    nodes:
      - data:
          desc: "é–‹å§‹ãƒãƒ¼ãƒ‰"
          selected: false
          title: "é–‹å§‹"
          type: start
          variables: []
        height: 54
        id: start_node
        position:
          x: 50
          y: 300
        positionAbsolute:
          x: 50
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          code: |
            import sys
            import re
            
            user_input = sys.query
            
            pattern = r'(\S+)\s+(\d+)å€‹?\s+(\S+)'
            match = re.search(pattern, user_input)
            
            if match:
                product_name = match.group(1)
                stock_count = int(match.group(2))
                category = match.group(3)
            else:
                product_name = "ä¸æ˜"
                stock_count = 0
                category = "ãã®ä»–"
            
            return {
                "product_name": product_name,
                "stock_count": stock_count,
                "category": category
            }
          desc: "ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’è§£æã—ã¦å•†å“åã€åœ¨åº«æ•°ã€ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’æŠ½å‡º"
          selected: false
          title: "å…¥åŠ›è§£æ"
          type: code
          variables: []
        height: 154
        id: parse_input_node
        position:
          x: 350
          y: 300
        positionAbsolute:
          x: 350
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          cases:
            - case_id: fresh_food_case
              conditions:
                - comparison_operator: is
                  id: fresh_food_condition
                  value: "ç”Ÿé®®é£Ÿå“"
                  variable_selector:
                    - parse_input_node
                    - category
              id: fresh_food_case
              logical_operator: and
          desc: "ã‚«ãƒ†ã‚´ãƒªãƒ¼ãŒç”Ÿé®®é£Ÿå“ã‹ã©ã†ã‹ã‚’åˆ¤å®š"
          selected: false
          title: "ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ¤å®š"
          type: if-else
        height: 154
        id: category_check_node
        position:
          x: 650
          y: 300
        positionAbsolute:
          x: 650
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          code: |
            stock_count = parse_input_node['stock_count']
            adjusted_stock = stock_count * 2
            
            return {
                "adjusted_stock": adjusted_stock,
                "original_stock": stock_count
            }
          desc: "ç”Ÿé®®é£Ÿå“ã®åœ¨åº«æ•°ã‚’2å€ã«èª¿æ•´ï¼ˆåŸºæº–å€¤ã‚’åŠåˆ†ã«ã™ã‚‹ãŸã‚ï¼‰"
          selected: false
          title: "ç”Ÿé®®é£Ÿå“åœ¨åº«èª¿æ•´"
          type: code
          variables:
            - value_selector:
                - parse_input_node
                - stock_count
              variable: parse_input_node
              value_type: object
        height: 154
        id: fresh_food_calculation_node
        position:
          x: 950
          y: 100
        positionAbsolute:
          x: 950
          y: 100
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          cases:
            - case_id: urgent_order_case
              conditions:
                - comparison_operator: "<="
                  id: urgent_condition
                  value: 10
                  variable_selector:
                    - parse_input_node
                    - stock_count
              id: urgent_order_case
              logical_operator: and
            - case_id: normal_order_case
              conditions:
                - comparison_operator: "<="
                  id: normal_condition
                  value: 30
                  variable_selector:
                    - parse_input_node
                    - stock_count
              id: normal_order_case
              logical_operator: and
            - case_id: consider_order_case
              conditions:
                - comparison_operator: "<="
                  id: consider_condition
                  value: 50
                  variable_selector:
                    - parse_input_node
                    - stock_count
              id: consider_order_case
              logical_operator: and
          desc: "é€šå¸¸å•†å“ã®åœ¨åº«æ•°ã«åŸºã¥ãç™ºæ³¨åˆ¤å®š"
          selected: false
          title: "åœ¨åº«æ•°åˆ¤å®šï¼ˆé€šå¸¸ï¼‰"
          type: if-else
        height: 198
        id: stock_check_node
        position:
          x: 950
          y: 500
        positionAbsolute:
          x: 950
          y: 500
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          cases:
            - case_id: fresh_urgent_case
              conditions:
                - comparison_operator: "<="
                  id: fresh_urgent_condition
                  value: 20
                  variable_selector:
                    - fresh_food_calculation_node
                    - adjusted_stock
              id: fresh_urgent_case
              logical_operator: and
            - case_id: fresh_normal_case
              conditions:
                - comparison_operator: "<="
                  id: fresh_normal_condition
                  value: 60
                  variable_selector:
                    - fresh_food_calculation_node
                    - adjusted_stock
              id: fresh_normal_case
              logical_operator: and
            - case_id: fresh_consider_case
              conditions:
                - comparison_operator: "<="
                  id: fresh_consider_condition
                  value: 100
                  variable_selector:
                    - fresh_food_calculation_node
                    - adjusted_stock
              id: fresh_consider_case
              logical_operator: and
          desc: "ç”Ÿé®®é£Ÿå“ã®èª¿æ•´æ¸ˆã¿åœ¨åº«æ•°ã«åŸºã¥ãç™ºæ³¨åˆ¤å®š"
          selected: false
          title: "åœ¨åº«æ•°åˆ¤å®šï¼ˆç”Ÿé®®ï¼‰"
          type: if-else
        height: 198
        id: fresh_stock_check_node
        position:
          x: 1250
          y: 100
        positionAbsolute:
          x: 1250
          y: 100
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "ã€ç·Šæ€¥ç™ºæ³¨ã€‘\nå•†å“åï¼š{{#parse_input_node.product_name#}}\nåœ¨åº«æ•°ï¼š{{#parse_input_node.stock_count#}}å€‹\nã‚«ãƒ†ã‚´ãƒªãƒ¼ï¼š{{#parse_input_node.category#}}\n\nåˆ¤å®šçµæœï¼šåœ¨åº«ãŒ10å€‹ä»¥ä¸‹ã®ãŸã‚ã€3æ—¥ä»¥å†…ã«ç™ºæ³¨ãŒå¿…è¦ã§ã™ã€‚"
          desc: "ç·Šæ€¥ç™ºæ³¨ãŒå¿…è¦ãªå ´åˆã®å›ç­”"
          selected: false
          title: "ç·Šæ€¥ç™ºæ³¨å›ç­”"
          type: answer
          variables: []
        height: 107
        id: urgent_order_answer_node
        position:
          x: 1250
          y: 400
        positionAbsolute:
          x: 1250
          y: 400
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "ã€é€šå¸¸ç™ºæ³¨ã€‘\nå•†å“åï¼š{{#parse_input_node.product_name#}}\nåœ¨åº«æ•°ï¼š{{#parse_input_node.stock_count#}}å€‹\nã‚«ãƒ†ã‚´ãƒªãƒ¼ï¼š{{#parse_input_node.category#}}\n\nåˆ¤å®šçµæœï¼šåœ¨åº«ãŒ11ï½30å€‹ã®ãŸã‚ã€1é€±é–“ä»¥å†…ã®ç™ºæ³¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚"
          desc: "é€šå¸¸ç™ºæ³¨ãŒå¿…è¦ãªå ´åˆã®å›ç­”"
          selected: false
          title: "é€šå¸¸ç™ºæ³¨å›ç­”"
          type: answer
          variables: []
        height: 107
        id: normal_order_answer_node
        position:
          x: 1250
          y: 520
        positionAbsolute:
          x: 1250
          y: 520
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "ã€ç™ºæ³¨æ¤œè¨ã€‘\nå•†å“åï¼š{{#parse_input_node.product_name#}}\nåœ¨åº«æ•°ï¼š{{#parse_input_node.stock_count#}}å€‹\nã‚«ãƒ†ã‚´ãƒªãƒ¼ï¼š{{#parse_input_node.category#}}\n\nåˆ¤å®šçµæœï¼šåœ¨åº«ãŒ31ï½50å€‹ã®ãŸã‚ã€2é€±é–“ä»¥å†…ã«ç™ºæ³¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚"
          desc: "ç™ºæ³¨æ¤œè¨ãŒå¿…è¦ãªå ´åˆã®å›ç­”"
          selected: false
          title: "ç™ºæ³¨æ¤œè¨å›ç­”"
          type: answer
          variables: []
        height: 107
        id: consider_order_answer_node
        position:
          x: 1250
          y: 640
        positionAbsolute:
          x: 1250
          y: 640
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "ã€åœ¨åº«ååˆ†ã€‘\nå•†å“åï¼š{{#parse_input_node.product_name#}}\nåœ¨åº«æ•°ï¼š{{#parse_input_node.stock_count#}}å€‹\nã‚«ãƒ†ã‚´ãƒªãƒ¼ï¼š{{#parse_input_node.category#}}\n\nåˆ¤å®šçµæœï¼šåœ¨åº«ãŒ51å€‹ä»¥ä¸Šã‚ã‚‹ãŸã‚ã€ç¾æ™‚ç‚¹ã§ã®ç™ºæ³¨ã¯ä¸è¦ã§ã™ã€‚"
          desc: "åœ¨åº«ãŒååˆ†ãªå ´åˆã®å›ç­”"
          selected: false
          title: "åœ¨åº«ååˆ†å›ç­”"
          type: answer
          variables: []
        height: 107
        id: sufficient_stock_answer_node
        position:
          x: 1250
          y: 760
        positionAbsolute:
          x: 1250
          y: 760
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "ã€ç”Ÿé®®é£Ÿå“ï¼šç·Šæ€¥ç™ºæ³¨ã€‘\nå•†å“åï¼š{{#parse_input_node.product_name#}}\nåœ¨åº«æ•°ï¼š{{#parse_input_node.stock_count#}}å€‹\nã‚«ãƒ†ã‚´ãƒªãƒ¼ï¼š{{#parse_input_node.category#}}\n\nåˆ¤å®šçµæœï¼šç”Ÿé®®é£Ÿå“ã§åœ¨åº«ãŒ5å€‹ä»¥ä¸‹ã®ãŸã‚ã€3æ—¥ä»¥å†…ã«ç™ºæ³¨ãŒå¿…è¦ã§ã™ã€‚"
          desc: "ç”Ÿé®®é£Ÿå“ã®ç·Šæ€¥ç™ºæ³¨ãŒå¿…è¦ãªå ´åˆã®å›ç­”"
          selected: false
          title: "ç”Ÿé®®ç·Šæ€¥ç™ºæ³¨å›ç­”"
          type: answer
          variables: []
        height: 107
        id: fresh_urgent_order_answer_node
        position:
          x: 1550
          y: 20
        positionAbsolute:
          x: 1550
          y: 20
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "ã€ç”Ÿé®®é£Ÿå“ï¼šé€šå¸¸ç™ºæ³¨ã€‘\nå•†å“åï¼š{{#parse_input_node.product_name#}}\nåœ¨åº«æ•°ï¼š{{#parse_input_node.stock_count#}}å€‹\nã‚«ãƒ†ã‚´ãƒªãƒ¼ï¼š{{#parse_input_node.category#}}\n\nåˆ¤å®šçµæœï¼šç”Ÿé®®é£Ÿå“ã§åœ¨åº«ãŒ6ï½15å€‹ã®ãŸã‚ã€1é€±é–“ä»¥å†…ã®ç™ºæ³¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚"
          desc: "ç”Ÿé®®é£Ÿå“ã®é€šå¸¸ç™ºæ³¨ãŒå¿…è¦ãªå ´åˆã®å›ç­”"
          selected: false
          title: "ç”Ÿé®®é€šå¸¸ç™ºæ³¨å›ç­”"
          type: answer
          variables: []
        height: 107
        id: fresh_normal_order_answer_node
        position:
          x: 1550
          y: 140
        positionAbsolute:
          x: 1550
          y: 140
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "ã€ç”Ÿé®®é£Ÿå“ï¼šç™ºæ³¨æ¤œè¨ã€‘\nå•†å“åï¼š{{#parse_input_node.product_name#}}\nåœ¨åº«æ•°ï¼š{{#parse_input_node.stock_count#}}å€‹\nã‚«ãƒ†ã‚´ãƒªãƒ¼ï¼š{{#parse_input_node.category#}}\n\nåˆ¤å®šçµæœï¼šç”Ÿé®®é£Ÿå“ã§åœ¨åº«ãŒ16ï½25å€‹ã®ãŸã‚ã€2é€±é–“ä»¥å†…ã«ç™ºæ³¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚"
          desc: "ç”Ÿé®®é£Ÿå“ã®ç™ºæ³¨æ¤œè¨ãŒå¿…è¦ãªå ´åˆã®å›ç­”"
          selected: false
          title: "ç”Ÿé®®ç™ºæ³¨æ¤œè¨å›ç­”"
          type: answer
          variables: []
        height: 107
        id: fresh_consider_order_answer_node
        position:
          x: 1550
          y: 260
        positionAbsolute:
          x: 1550
          y: 260
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "ã€ç”Ÿé®®é£Ÿå“ï¼šåœ¨åº«ååˆ†ã€‘\nå•†å“åï¼š{{#parse_input_node.product_name#}}\nåœ¨åº«æ•°ï¼š{{#parse_input_node.stock_count#}}å€‹\nã‚«ãƒ†ã‚´ãƒªãƒ¼ï¼š{{#parse_input_node.category#}}\n\nåˆ¤å®šçµæœï¼šç”Ÿé®®é£Ÿå“ã§åœ¨åº«ãŒ26å€‹ä»¥ä¸Šã‚ã‚‹ãŸã‚ã€ç¾æ™‚ç‚¹ã§ã®ç™ºæ³¨ã¯ä¸è¦ã§ã™ã€‚"
          desc: "ç”Ÿé®®é£Ÿå“ã®åœ¨åº«ãŒååˆ†ãªå ´åˆã®å›ç­”"
          selected: false
          title: "ç”Ÿé®®åœ¨åº«ååˆ†å›ç­”"
          type: answer
          variables: []
        height: 107
        id: fresh_sufficient_stock_answer_node
        position:
          x: 1550
          y: 380
        positionAbsolute:
          x: 1550
          y: 380
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
    viewport:
      x: 0
      y: 0
      zoom: 0.8