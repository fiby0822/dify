app:
  description: "æ³¨æ–‡å‡¦ç†è‡ªå‹•åˆ†é¡ã‚·ã‚¹ãƒ†ãƒ  - IF_ELSEã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å‹•ä½œæ¤œè¨¼ç”¨"
  icon: "ğŸ“¦"
  icon_background: "#E3F2FD"
  mode: advanced-chat
  name: "æ³¨æ–‡å‡¦ç†è‡ªå‹•åˆ†é¡ã‚·ã‚¹ãƒ†ãƒ "
  use_icon_as_answer_icon: false

dependencies: []

kind: app

version: 0.3.0

workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      enabled: false
    opening_statement: "æ³¨æ–‡å‡¦ç†è‡ªå‹•åˆ†é¡ã‚·ã‚¹ãƒ†ãƒ ã¸ã‚ˆã†ã“ãã€‚æ³¨æ–‡æƒ…å ±ï¼ˆé‡‘é¡ã€ä¼šå“¡ç¨®åˆ¥ã€é…é€æ–¹æ³•ï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚"
    suggested_questions:
      - "æ³¨æ–‡é‡‘é¡15000å††ã€ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ä¼šå“¡ã€expressé…é€"
      - "æ³¨æ–‡é‡‘é¡7500å††ã€é€šå¸¸ä¼šå“¡ã€standardé…é€"
      - "æ³¨æ–‡é‡‘é¡3000å††ã€éä¼šå“¡ã€é…é€æ–¹æ³•æœªæŒ‡å®š"
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
  graph:
    edges:
      - data:
          isInLoop: false
          sourceType: start
          targetType: code
        id: start-data_parser-edge
        selected: false
        source: start_node
        sourceHandle: source
        target: data_parser
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: code
          targetType: if-else
        id: data_parser-amount_check-edge
        selected: false
        source: data_parser
        sourceHandle: source
        target: amount_check
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: if-else
        id: amount_check-member_check_high-edge
        selected: false
        source: amount_check
        sourceHandle: high_amount_case
        target: member_check_high
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: if-else
        id: amount_check-member_check_medium-edge
        selected: false
        source: amount_check
        sourceHandle: medium_amount_case
        target: member_check_medium
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: if-else
        id: amount_check-member_check_low-edge
        selected: false
        source: amount_check
        sourceHandle: false
        target: member_check_low
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: if-else
        id: member_check_high-delivery_check_premium-edge
        selected: false
        source: member_check_high
        sourceHandle: premium_member_case
        target: delivery_check_premium
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: member_check_high-high_regular_answer-edge
        selected: false
        source: member_check_high
        sourceHandle: regular_member_case
        target: high_regular_answer
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: member_check_high-high_guest_answer-edge
        selected: false
        source: member_check_high
        sourceHandle: false
        target: high_guest_answer
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: member_check_medium-medium_premium_answer-edge
        selected: false
        source: member_check_medium
        sourceHandle: premium_member_case
        target: medium_premium_answer
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: member_check_medium-medium_regular_answer-edge
        selected: false
        source: member_check_medium
        sourceHandle: false
        target: medium_regular_answer
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: member_check_low-low_premium_answer-edge
        selected: false
        source: member_check_low
        sourceHandle: premium_member_case
        target: low_premium_answer
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: member_check_low-low_other_answer-edge
        selected: false
        source: member_check_low
        sourceHandle: false
        target: low_other_answer
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: delivery_check_premium-express_premium_answer-edge
        selected: false
        source: delivery_check_premium
        sourceHandle: express_delivery_case
        target: express_premium_answer
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: delivery_check_premium-standard_premium_answer-edge
        selected: false
        source: delivery_check_premium
        sourceHandle: standard_delivery_case
        target: standard_premium_answer
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: delivery_check_premium-default_premium_answer-edge
        selected: false
        source: delivery_check_premium
        sourceHandle: false
        target: default_premium_answer
        targetHandle: target
        type: custom
        zIndex: 0
    nodes:
      - data:
          desc: "ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã®å—ä»˜"
          selected: false
          title: "é–‹å§‹"
          type: start
          variables: []
        height: 54
        id: start_node
        position:
          x: 50
          y: 200
        positionAbsolute:
          x: 50
          y: 200
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          code: "def main(user_input):\n    import re\n    \n    text = user_input.lower()\n    \n    amount_match = re.search(r'(\\d+)[å††]?', text)\n    amount = int(amount_match.group(1)) if amount_match else 0\n    \n    member_type = 'guest'\n    if 'ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ' in text:\n        member_type = 'premium'\n    elif 'é€šå¸¸ä¼šå“¡' in text:\n        member_type = 'regular'\n    \n    delivery = None\n    if 'express' in text:\n        delivery = 'express'\n    elif 'standard' in text:\n        delivery = 'standard'\n    \n    return {\n        'amount': amount,\n        'member_type': member_type,\n        'delivery': delivery\n    }"
          code_language: python3
          outputs:
            amount:
              type: number
              description: "æ³¨æ–‡é‡‘é¡"
            member_type:
              type: string
              description: "ä¼šå“¡ç¨®åˆ¥"
            delivery:
              type: string
              description: "é…é€æ–¹æ³•"
          selected: false
          title: "ãƒ‡ãƒ¼ã‚¿è§£æ"
          type: code
          variables:
            - value_selector:
                - sys
                - query
              variable: user_input
        height: 98
        id: data_parser
        position:
          x: 350
          y: 200
        positionAbsolute:
          x: 350
          y: 200
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          cases:
            - id: high_amount_case
              case_id: high_amount_case
              conditions:
                - variable_selector:
                    - data_parser
                    - amount
                  comparison_operator: "â‰¥"
                  value: 10000
            - id: medium_amount_case
              case_id: medium_amount_case
              conditions:
                - variable_selector:
                    - data_parser
                    - amount
                  comparison_operator: "â‰¥"
                  value: 5000
                - variable_selector:
                    - data_parser
                    - amount
                  comparison_operator: "<"
                  value: 10000
              logical_operator: and
          selected: false
          title: "é‡‘é¡åˆ¤å®š"
          type: if-else
        height: 146
        id: amount_check
        position:
          x: 650
          y: 200
        positionAbsolute:
          x: 650
          y: 200
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          cases:
            - id: premium_member_case
              case_id: premium_member_case
              conditions:
                - variable_selector:
                    - data_parser
                    - member_type
                  comparison_operator: is
                  value: premium
            - id: regular_member_case
              case_id: regular_member_case
              conditions:
                - variable_selector:
                    - data_parser
                    - member_type
                  comparison_operator: is
                  value: regular
          selected: false
          title: "ä¼šå“¡åˆ¤å®šï¼ˆé«˜é¡ï¼‰"
          type: if-else
        height: 122
        id: member_check_high
        position:
          x: 950
          y: 50
        positionAbsolute:
          x: 950
          y: 50
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          cases:
            - id: premium_member_case
              case_id: premium_member_case
              conditions:
                - variable_selector:
                    - data_parser
                    - member_type
                  comparison_operator: is
                  value: premium
          selected: false
          title: "ä¼šå“¡åˆ¤å®šï¼ˆä¸­é¡ï¼‰"
          type: if-else
        height: 98
        id: member_check_medium
        position:
          x: 950
          y: 200
        positionAbsolute:
          x: 950
          y: 200
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          cases:
            - id: premium_member_case
              case_id: premium_member_case
              conditions:
                - variable_selector:
                    - data_parser
                    - member_type
                  comparison_operator: is
                  value: premium
          selected: false
          title: "ä¼šå“¡åˆ¤å®šï¼ˆä½é¡ï¼‰"
          type: if-else
        height: 98
        id: member_check_low
        position:
          x: 950
          y: 350
        positionAbsolute:
          x: 950
          y: 350
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          cases:
            - id: express_delivery_case
              case_id: express_delivery_case
              conditions:
                - variable_selector:
                    - data_parser
                    - delivery
                  comparison_operator: is
                  value: express
            - id: standard_delivery_case
              case_id: standard_delivery_case
              conditions:
                - variable_selector:
                    - data_parser
                    - delivery
                  comparison_operator: is
                  value: standard
          selected: false
          title: "é…é€åˆ¤å®š"
          type: if-else
        height: 122
        id: delivery_check_premium
        position:
          x: 1250
          y: 50
        positionAbsolute:
          x: 1250
          y: 50
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ä¼šå“¡æ§˜ã®é«˜é¡æ³¨æ–‡ï¼ˆ{{#data_parser.amount#}}å††ï¼‰ã‚’expressé…é€ã§æ‰¿ã‚Šã¾ã—ãŸã€‚\n\nç‰¹å…¸ï¼š\n- 20%å‰²å¼•é©ç”¨\n- å³æ—¥é…é€æ‰‹é…\n- å„ªå…ˆã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µãƒãƒ¼ãƒˆ\n- ãƒã‚¤ãƒ³ãƒˆ3å€ä»˜ä¸"
          selected: false
          title: "å„ªå…ˆå‡¦ç†ï¼ˆExpressï¼‰"
          type: answer
        height: 90
        id: express_premium_answer
        position:
          x: 1550
          y: 10
        positionAbsolute:
          x: 1550
          y: 10
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ä¼šå“¡æ§˜ã®é«˜é¡æ³¨æ–‡ï¼ˆ{{#data_parser.amount#}}å††ï¼‰ã‚’é€šå¸¸é…é€ã§æ‰¿ã‚Šã¾ã—ãŸã€‚\n\nç‰¹å…¸ï¼š\n- 20%å‰²å¼•é©ç”¨\n- 2-3å–¶æ¥­æ—¥é…é€\n- å„ªå…ˆã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µãƒãƒ¼ãƒˆ\n- ãƒã‚¤ãƒ³ãƒˆ2å€ä»˜ä¸"
          selected: false
          title: "å„ªå…ˆå‡¦ç†ï¼ˆStandardï¼‰"
          type: answer
        height: 90
        id: standard_premium_answer
        position:
          x: 1550
          y: 120
        positionAbsolute:
          x: 1550
          y: 120
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ä¼šå“¡æ§˜ã®é«˜é¡æ³¨æ–‡ï¼ˆ{{#data_parser.amount#}}å††ï¼‰ã‚’æ‰¿ã‚Šã¾ã—ãŸã€‚\n\nç‰¹å…¸ï¼š\n- 20%å‰²å¼•é©ç”¨\n- æ¨™æº–é…é€ï¼ˆ3-5å–¶æ¥­æ—¥ï¼‰\n- å„ªå…ˆã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µãƒãƒ¼ãƒˆ\n- ãƒã‚¤ãƒ³ãƒˆ2å€ä»˜ä¸"
          selected: false
          title: "å„ªå…ˆå‡¦ç†ï¼ˆDefaultï¼‰"
          type: answer
        height: 90
        id: default_premium_answer
        position:
          x: 1550
          y: 230
        positionAbsolute:
          x: 1550
          y: 230
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "é€šå¸¸ä¼šå“¡æ§˜ã®é«˜é¡æ³¨æ–‡ï¼ˆ{{#data_parser.amount#}}å††ï¼‰ã‚’æ‰¿ã‚Šã¾ã—ãŸã€‚\n\nç‰¹å…¸ï¼š\n- 10%å‰²å¼•é©ç”¨\n- æ¨™æº–é…é€\n- ãƒã‚¤ãƒ³ãƒˆ1.5å€ä»˜ä¸"
          selected: false
          title: "é€šå¸¸å‡¦ç†ï¼ˆé«˜é¡ï¼‰"
          type: answer
        height: 90
        id: high_regular_answer
        position:
          x: 1250
          y: 200
        positionAbsolute:
          x: 1250
          y: 200
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "é«˜é¡æ³¨æ–‡ï¼ˆ{{#data_parser.amount#}}å††ï¼‰ã‚’æ‰¿ã‚Šã¾ã—ãŸã€‚\n\nä¼šå“¡ç™»éŒ²ã„ãŸã ãã¨ä»¥ä¸‹ã®ç‰¹å…¸ãŒã‚ã‚Šã¾ã™ï¼š\n- 10%å‰²å¼•\n- ãƒã‚¤ãƒ³ãƒˆä»˜ä¸\n- å„ªå…ˆé…é€\n\nä»Šã™ãä¼šå“¡ç™»éŒ²ã—ã¾ã™ã‹ï¼Ÿ"
          selected: false
          title: "ã‚²ã‚¹ãƒˆå‡¦ç†ï¼ˆé«˜é¡ï¼‰"
          type: answer
        height: 90
        id: high_guest_answer
        position:
          x: 1250
          y: 310
        positionAbsolute:
          x: 1250
          y: 310
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ä¼šå“¡æ§˜ã®æ³¨æ–‡ï¼ˆ{{#data_parser.amount#}}å††ï¼‰ã‚’æ‰¿ã‚Šã¾ã—ãŸã€‚\n\nç‰¹å…¸ï¼š\n- 15%å‰²å¼•é©ç”¨\n- ãƒã‚¤ãƒ³ãƒˆ2å€ä»˜ä¸\n- æ¬¡å›ä½¿ãˆã‚‹500å††ã‚¯ãƒ¼ãƒãƒ³"
          selected: false
          title: "ãƒ—ãƒ¬ãƒŸã‚¢ãƒ å‡¦ç†ï¼ˆä¸­é¡ï¼‰"
          type: answer
        height: 90
        id: medium_premium_answer
        position:
          x: 1250
          y: 420
        positionAbsolute:
          x: 1250
          y: 420
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "æ³¨æ–‡ï¼ˆ{{#data_parser.amount#}}å††ï¼‰ã‚’æ‰¿ã‚Šã¾ã—ãŸã€‚\n\næ¨™æº–é…é€ã«ã¦3-5å–¶æ¥­æ—¥ã§ãŠå±Šã‘ã—ã¾ã™ã€‚\nãƒã‚¤ãƒ³ãƒˆã‚’ä»˜ä¸ã„ãŸã—ã¾ã—ãŸã€‚"
          selected: false
          title: "é€šå¸¸å‡¦ç†ï¼ˆä¸­é¡ï¼‰"
          type: answer
        height: 90
        id: medium_regular_answer
        position:
          x: 1250
          y: 530
        positionAbsolute:
          x: 1250
          y: 530
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ä¼šå“¡æ§˜ã®å°‘é¡æ³¨æ–‡ï¼ˆ{{#data_parser.amount#}}å††ï¼‰ã‚’æ‰¿ã‚Šã¾ã—ãŸã€‚\n\né€æ–™ç„¡æ–™ãƒ»ãƒã‚¤ãƒ³ãƒˆä»˜ä¸ã„ãŸã—ã¾ã—ãŸã€‚"
          selected: false
          title: "ãƒ—ãƒ¬ãƒŸã‚¢ãƒ å‡¦ç†ï¼ˆä½é¡ï¼‰"
          type: answer
        height: 90
        id: low_premium_answer
        position:
          x: 1250
          y: 640
        positionAbsolute:
          x: 1250
          y: 640
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "å°‘é¡æ³¨æ–‡ï¼ˆ{{#data_parser.amount#}}å††ï¼‰ã‚’æ‰¿ã‚Šã¾ã—ãŸã€‚\n\n5,000å††ä»¥ä¸Šã®ã”æ³¨æ–‡ã§é€æ–™ç„¡æ–™ã¨ãªã‚Šã¾ã™ã€‚\nä¼šå“¡ç™»éŒ²ã§æ¬¡å›ä½¿ãˆã‚‹10%OFFã‚¯ãƒ¼ãƒãƒ³ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆä¸­ï¼"
          selected: false
          title: "ç°¡æ˜“å‡¦ç†"
          type: answer
        height: 90
        id: low_other_answer
        position:
          x: 1250
          y: 750
        positionAbsolute:
          x: 1250
          y: 750
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
    viewport:
      x: 0
      y: 0
      zoom: 0.5