app:
  description: IF_ELSEã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ›´æ–°ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«ã‚’æ¤œè¨¼ã™ã‚‹ãŸã‚ã®ãƒ†ã‚¹ãƒˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€‚æ§˜ã€…ãªæ¡ä»¶åˆ†å²ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ãƒ†ã‚¹ãƒˆã—ã€å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚„ã‚¨ãƒƒã‚¸è¨­å®šã®æ­£ã—ã•ã‚’ç¢ºèªã—ã¾ã™ã€‚
  icon: ğŸ”
  icon_background: '#E6F3FF'
  mode: advanced-chat
  name: IF_ELSEæ›´æ–°ãƒ«ãƒ¼ãƒ«æ¤œè¨¼
  use_icon_as_answer_icon: false

dependencies: []

kind: app

version: 0.3.0

workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      enabled: false
    opening_statement: |
      IF_ELSEã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ›´æ–°ãƒ«ãƒ¼ãƒ«ã‚’æ¤œè¨¼ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚¢ãƒ—ãƒªã§ã™ã€‚
      
      ä»¥ä¸‹ã®æ¡ä»¶ã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ï¼š
      1. æ–‡å­—åˆ—ã®æ¡ä»¶åˆ†å²ï¼ˆcontainsã€not containsã€start withã€end withç­‰ï¼‰
      2. æ•°å€¤æ¯”è¼ƒï¼ˆUnicodeæ¼”ç®—å­ä½¿ç”¨ï¼‰
      3. NULL/å­˜åœ¨ãƒã‚§ãƒƒã‚¯
      4. è¤‡æ•°æ¡ä»¶ã®çµ„ã¿åˆã‚ã›ï¼ˆAND/ORï¼‰
      5. åˆ†å²ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®Ÿè£…
      
      ã€Œã‚¹ã‚¿ãƒ¼ãƒˆã€ã¨å…¥åŠ›ã—ã¦ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã—ã¦ãã ã•ã„ã€‚
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions:
      - ã‚¹ã‚¿ãƒ¼ãƒˆ
      - ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹
      - IF_ELSEãƒ«ãƒ¼ãƒ«ã‚’æ¤œè¨¼
    text_to_speech:
      enabled: false
      language: ""
      voice: ""
  graph:
    edges:
      - data:
          isInLoop: false
          priority: 1
          sourceType: start
          targetType: llm
        id: start_to_analysis
        selected: false
        source: start_node
        sourceHandle: source
        target: analysis_node
        targetHandle: target
        type: custom
        zIndex: 0
      
      - data:
          isInLoop: false
          priority: 1
          sourceType: llm
          targetType: if-else
        id: analysis_to_string_check
        selected: false
        source: analysis_node
        sourceHandle: source
        target: string_check_node
        targetHandle: target
        type: custom
        zIndex: 0
      
      - data:
          isInLoop: false
          priority: 1
          sourceType: if-else
          targetType: answer
        id: contains_to_answer1
        selected: false
        source: string_check_node
        sourceHandle: contains_case
        target: contains_answer
        targetHandle: target
        type: custom
        zIndex: 0
      
      - data:
          isInLoop: false
          priority: 1
          sourceType: if-else
          targetType: answer
        id: startwith_to_answer2
        selected: false
        source: string_check_node
        sourceHandle: startwith_case
        target: startwith_answer
        targetHandle: target
        type: custom
        zIndex: 0
      
      - data:
          isInLoop: false
          priority: 1
          sourceType: if-else
          targetType: answer
        id: default_to_numeric
        selected: false
        source: string_check_node
        sourceHandle: false
        target: numeric_check_node
        targetHandle: target
        type: custom
        zIndex: 0
      
      - data:
          isInLoop: false
          priority: 1
          sourceType: if-else
          targetType: answer
        id: high_score_to_answer
        selected: false
        source: numeric_check_node
        sourceHandle: high_score_case
        target: high_score_answer
        targetHandle: target
        type: custom
        zIndex: 0
      
      - data:
          isInLoop: false
          priority: 1
          sourceType: if-else
          targetType: answer
        id: medium_score_to_answer
        selected: false
        source: numeric_check_node
        sourceHandle: medium_score_case
        target: medium_score_answer
        targetHandle: target
        type: custom
        zIndex: 0
      
      - data:
          isInLoop: false
          priority: 1
          sourceType: if-else
          targetType: code
        id: low_score_to_multi_check
        selected: false
        source: numeric_check_node
        sourceHandle: false
        target: multi_condition_prep
        targetHandle: target
        type: custom
        zIndex: 0
      
      - data:
          isInLoop: false
          priority: 1
          sourceType: code
          targetType: if-else
        id: prep_to_multi_check
        selected: false
        source: multi_condition_prep
        sourceHandle: source
        target: multi_condition_check
        targetHandle: target
        type: custom
        zIndex: 0
      
      - data:
          isInLoop: false
          priority: 1
          sourceType: if-else
          targetType: answer
        id: and_success_to_answer
        selected: false
        source: multi_condition_check
        sourceHandle: and_success_case
        target: and_success_answer
        targetHandle: target
        type: custom
        zIndex: 0
      
      - data:
          isInLoop: false
          priority: 1
          sourceType: if-else
          targetType: answer
        id: or_success_to_answer
        selected: false
        source: multi_condition_check
        sourceHandle: or_success_case
        target: or_success_answer
        targetHandle: target
        type: custom
        zIndex: 0
      
      - data:
          isInLoop: false
          priority: 1
          sourceType: if-else
          targetType: answer
        id: multi_default_to_answer
        selected: false
        source: multi_condition_check
        sourceHandle: false
        target: default_answer
        targetHandle: target
        type: custom
        zIndex: 0
    
    nodes:
      - data:
          desc: é–‹å§‹ãƒãƒ¼ãƒ‰
          selected: false
          title: é–‹å§‹
          type: start
          variables: []
        height: 54
        id: start_node
        position:
          x: 50
          y: 200
        positionAbsolute:
          x: 50
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      
      - data:
          desc: ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’åˆ†æã—ã¦ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆ
          type: llm
          model:
            provider: openai
            name: gpt-4o-mini
            mode: chat
            completion_params:
              temperature: 0.7
              max_tokens: 1000
          prompt_template:
            - id: system_prompt
              role: system
              text: |
                ã‚ãªãŸã¯IF_ELSEã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚
                ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›ã«åŸºã¥ã„ã¦ã€ä»¥ä¸‹ã®å½¢å¼ã§ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ï¼š
                
                ãƒ†ã‚¹ãƒˆæ–‡å­—åˆ—: [æ–‡å­—åˆ—æ¯”è¼ƒç”¨ã®ãƒ†ã‚­ã‚¹ãƒˆ]
                æ•°å€¤ã‚¹ã‚³ã‚¢: [0-100ã®æ•°å€¤]
                ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: [approved/pending/rejected ã®ã„ãšã‚Œã‹]
                ã‚«ãƒ†ã‚´ãƒª: [ç·Šæ€¥/é€šå¸¸/ãã®ä»– ã®ã„ãšã‚Œã‹]
                å­˜åœ¨ãƒ•ãƒ©ã‚°: [true/false]
                
                æ–‡å­—åˆ—ã«ã¯ã€Œãƒ†ã‚¹ãƒˆã€ã‚„ã€Œæ¤œè¨¼ã€ãªã©ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å«ã‚ã¦ãã ã•ã„ã€‚
            - id: user_prompt
              role: user
              text: "{{#sys.query#}}"
          context:
            enabled: false
            variable_selector: []
          variables: []
          vision:
            enabled: false
          selected: false
          title: ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
        height: 98
        id: analysis_node
        position:
          x: 350
          y: 200
        positionAbsolute:
          x: 350
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      
      - data:
          desc: æ–‡å­—åˆ—æ¯”è¼ƒã®å„ç¨®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ãƒ†ã‚¹ãƒˆ
          type: if-else
          cases:
            - id: contains_case
              case_id: contains_case
              conditions:
                - id: contains_check
                  variable_selector:
                    - analysis_node
                    - text
                  comparison_operator: contains
                  value: "ãƒ†ã‚¹ãƒˆ"
              logical_operator: and
            
            - id: startwith_case
              case_id: startwith_case
              conditions:
                - id: startwith_check
                  variable_selector:
                    - analysis_node
                    - text
                  comparison_operator: start with
                  value: "æ¤œè¨¼"
              logical_operator: and
          selected: false
          title: æ–‡å­—åˆ—æ¡ä»¶ãƒã‚§ãƒƒã‚¯
        height: 154
        id: string_check_node
        position:
          x: 650
          y: 200
        positionAbsolute:
          x: 650
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      
      - data:
          desc: containsã‚±ãƒ¼ã‚¹ç”¨ã®å‡ºåŠ›
          type: answer
          answer: |
            âœ… æ–‡å­—åˆ—æ¯”è¼ƒï¼ˆcontainsï¼‰ãƒ†ã‚¹ãƒˆæˆåŠŸ
            
            å…¥åŠ›ãƒ†ã‚­ã‚¹ãƒˆã«ã€Œãƒ†ã‚¹ãƒˆã€ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚
            æ›´æ–°ãƒ«ãƒ¼ãƒ«ã®æ¤œè¨¼é …ç›®ï¼š
            - âœ“ type="custom"ï¼ˆå¤–å´ï¼‰
            - âœ“ data.type="if-else"
            - âœ“ case_idè¨­å®š
            - âœ“ æ–‡å­—åˆ—æ¯”è¼ƒæ¼”ç®—å­
          selected: false
          title: Containsã‚±ãƒ¼ã‚¹å›ç­”
        height: 107
        id: contains_answer
        position:
          x: 950
          y: 50
        positionAbsolute:
          x: 950
          y: 50
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      
      - data:
          desc: start withã‚±ãƒ¼ã‚¹ç”¨ã®å‡ºåŠ›
          type: answer
          answer: |
            âœ… æ–‡å­—åˆ—æ¯”è¼ƒï¼ˆstart withï¼‰ãƒ†ã‚¹ãƒˆæˆåŠŸ
            
            å…¥åŠ›ãƒ†ã‚­ã‚¹ãƒˆãŒã€Œæ¤œè¨¼ã€ã§å§‹ã¾ã£ã¦ã„ã¾ã™ã€‚
            æ›´æ–°ãƒ«ãƒ¼ãƒ«ã®æ¤œè¨¼é …ç›®ï¼š
            - âœ“ sourceHandleè¨­å®š
            - âœ“ targetTypeè¨­å®š
            - âœ“ isInLoopè¨­å®š
          selected: false
          title: Start Withã‚±ãƒ¼ã‚¹å›ç­”
        height: 107
        id: startwith_answer
        position:
          x: 950
          y: 200
        positionAbsolute:
          x: 950
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      
      - data:
          desc: æ•°å€¤æ¯”è¼ƒã®å„ç¨®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ãƒ†ã‚¹ãƒˆï¼ˆUnicodeæ¼”ç®—å­ä½¿ç”¨ï¼‰
          type: if-else
          cases:
            - id: high_score_case
              case_id: high_score_case
              conditions:
                - id: high_check
                  variable_selector:
                    - analysis_node
                    - text
                  comparison_operator: "â‰¥"
                  value: 80
              logical_operator: and
            
            - id: medium_score_case
              case_id: medium_score_case
              conditions:
                - id: medium_check
                  variable_selector:
                    - analysis_node
                    - text
                  comparison_operator: "â‰¥"
                  value: 50
              logical_operator: and
          selected: false
          title: æ•°å€¤æ¡ä»¶ãƒã‚§ãƒƒã‚¯
        height: 154
        id: numeric_check_node
        position:
          x: 950
          y: 350
        positionAbsolute:
          x: 950
          y: 350
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      
      - data:
          desc: é«˜ã‚¹ã‚³ã‚¢ã‚±ãƒ¼ã‚¹ç”¨ã®å‡ºåŠ›
          type: answer
          answer: |
            âœ… æ•°å€¤æ¯”è¼ƒï¼ˆâ‰¥ï¼‰ãƒ†ã‚¹ãƒˆæˆåŠŸ
            
            ã‚¹ã‚³ã‚¢ãŒ80ä»¥ä¸Šã§ã™ã€‚
            æ›´æ–°ãƒ«ãƒ¼ãƒ«ã®æ¤œè¨¼é …ç›®ï¼š
            - âœ“ Unicodeæ¼”ç®—å­ï¼ˆâ‰¥ï¼‰ä½¿ç”¨
            - âœ“ height/widthè¨­å®š
            - âœ“ positionAbsoluteè¨­å®š
          selected: false
          title: é«˜ã‚¹ã‚³ã‚¢å›ç­”
        height: 107
        id: high_score_answer
        position:
          x: 1250
          y: 250
        positionAbsolute:
          x: 1250
          y: 250
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      
      - data:
          desc: ä¸­ã‚¹ã‚³ã‚¢ã‚±ãƒ¼ã‚¹ç”¨ã®å‡ºåŠ›
          type: answer
          answer: |
            âœ… æ•°å€¤æ¯”è¼ƒï¼ˆæ¡ä»¶é †åºï¼‰ãƒ†ã‚¹ãƒˆæˆåŠŸ
            
            ã‚¹ã‚³ã‚¢ãŒ50ä»¥ä¸Š80æœªæº€ã§ã™ã€‚
            æ¡ä»¶ã¯é †ç•ªã«è©•ä¾¡ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªã€‚
          selected: false
          title: ä¸­ã‚¹ã‚³ã‚¢å›ç­”
        height: 107
        id: medium_score_answer
        position:
          x: 1250
          y: 400
        positionAbsolute:
          x: 1250
          y: 400
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      
      - data:
          desc: è¤‡æ•°æ¡ä»¶ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ‡ãƒ¼ã‚¿æº–å‚™
          type: code
          code_language: python3
          code: |
            def main(text_input):
                import json
                
                data = {
                    "status": "approved",
                    "category": "ç·Šæ€¥",
                    "priority": 1,
                    "exists": True
                }
                
                return {
                    "output": json.dumps(data, ensure_ascii=False)
                }
          variables:
            - value_selector:
                - analysis_node
                - text
              variable: text_input
          outputs:
            type: object
            properties:
              output:
                type: string
          selected: false
          title: è¤‡æ•°æ¡ä»¶ãƒ‡ãƒ¼ã‚¿æº–å‚™
        height: 54
        id: multi_condition_prep
        position:
          x: 1250
          y: 550
        positionAbsolute:
          x: 1250
          y: 550
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      
      - data:
          desc: ANDæ¡ä»¶ã¨ORæ¡ä»¶ã®çµ„ã¿åˆã‚ã›ãƒ†ã‚¹ãƒˆ
          type: if-else
          cases:
            - id: and_success_case
              case_id: and_success_case
              conditions:
                - id: status_check
                  variable_selector:
                    - multi_condition_prep
                    - output
                  comparison_operator: contains
                  value: "approved"
                - id: category_check
                  variable_selector:
                    - multi_condition_prep
                    - output
                  comparison_operator: contains
                  value: "ç·Šæ€¥"
              logical_operator: and
            
            - id: or_success_case
              case_id: or_success_case
              conditions:
                - id: priority_check
                  variable_selector:
                    - multi_condition_prep
                    - output
                  comparison_operator: contains
                  value: "priority"
                - id: exists_check
                  variable_selector:
                    - multi_condition_prep
                    - output
                  comparison_operator: contains
                  value: "false"
              logical_operator: or
          selected: false
          title: è¤‡æ•°æ¡ä»¶ãƒã‚§ãƒƒã‚¯
        height: 198
        id: multi_condition_check
        position:
          x: 1550
          y: 550
        positionAbsolute:
          x: 1550
          y: 550
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      
      - data:
          desc: ANDæ¡ä»¶æˆåŠŸæ™‚ã®å‡ºåŠ›
          type: answer
          answer: |
            âœ… è¤‡æ•°æ¡ä»¶ï¼ˆANDï¼‰ãƒ†ã‚¹ãƒˆæˆåŠŸ
            
            ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒã€Œapprovedã€ã‹ã¤ã‚«ãƒ†ã‚´ãƒªãŒã€Œç·Šæ€¥ã€ã§ã™ã€‚
            æ›´æ–°ãƒ«ãƒ¼ãƒ«ã®æ¤œè¨¼é …ç›®ï¼š
            - âœ“ è¤‡æ•°æ¡ä»¶ã®ANDçµåˆ
            - âœ“ æ¡ä»¶IDã®è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
          selected: false
          title: ANDæ¡ä»¶æˆåŠŸå›ç­”
        height: 107
        id: and_success_answer
        position:
          x: 1850
          y: 450
        positionAbsolute:
          x: 1850
          y: 450
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      
      - data:
          desc: ORæ¡ä»¶æˆåŠŸæ™‚ã®å‡ºåŠ›
          type: answer
          answer: |
            âœ… è¤‡æ•°æ¡ä»¶ï¼ˆORï¼‰ãƒ†ã‚¹ãƒˆæˆåŠŸ
            
            å„ªå…ˆåº¦æƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ã€existsãŒfalseã§ã™ã€‚
            æ›´æ–°ãƒ«ãƒ¼ãƒ«ã®æ¤œè¨¼é …ç›®ï¼š
            - âœ“ è¤‡æ•°æ¡ä»¶ã®ORçµåˆ
            - âœ“ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ³ãƒ‰ãƒ«ï¼ˆfalseï¼‰ã®å‹•ä½œ
          selected: false
          title: ORæ¡ä»¶æˆåŠŸå›ç­”
        height: 107
        id: or_success_answer
        position:
          x: 1850
          y: 600
        positionAbsolute:
          x: 1850
          y: 600
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      
      - data:
          desc: ã™ã¹ã¦ã®æ¡ä»¶ã«ä¸€è‡´ã—ãªã„å ´åˆã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‡¦ç†
          type: answer
          answer: |
            âœ… ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆæˆåŠŸ
            
            ã™ã¹ã¦ã®æ¡ä»¶åˆ†å²ãŒå®Ÿè¡Œã•ã‚Œãšã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‡¦ç†ãŒå®Ÿè¡Œã•ã‚Œã¾ã—ãŸã€‚
            æ›´æ–°ãƒ«ãƒ¼ãƒ«ã®æ¤œè¨¼é …ç›®ï¼š
            - âœ“ falseãƒãƒ³ãƒ‰ãƒ«ã®æ­£ã—ã„å‹•ä½œ
            - âœ“ ç‹¬ç«‹ã—ãŸåˆ†å²å‡¦ç†ã®å®Ÿè£…
            - âœ“ å®Ÿè¡Œã•ã‚Œãªã„åˆ†å²ã®å¤‰æ•°ã‚’å‚ç…§ã—ãªã„è¨­è¨ˆ
          selected: false
          title: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå›ç­”
        height: 107
        id: default_answer
        position:
          x: 1850
          y: 750
        positionAbsolute:
          x: 1850
          y: 750
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
    
    viewport:
      x: 0
      y: 0
      zoom: 0.8