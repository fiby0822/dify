app:
  description: 'Google Spreadsheetsã®æ—¥å ±ç®¡ç†ã‚·ãƒ¼ãƒˆã‹ã‚‰æœ¬æ—¥ã®æ—¥å ±ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€æœªæå‡ºã®ã‚‚ã®ã‚’æå‡ºæ¸ˆã¿ã«æ›´æ–°ã™ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼'
  icon: ğŸ“Š
  icon_background: '#FFEAD5'
  mode: advanced-chat
  name: æ—¥å ±ç®¡ç†ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: omluc/google_sheets:0.0.2@17f06eaa1d905595e1a76460e7249707a722142353d551cf14aed3d8517c134f
kind: app
version: 0.3.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      enabled: false
    opening_statement: 'æ—¥å ±ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã¸ã‚ˆã†ã“ãã€‚æœ¬æ—¥ã®æ—¥å ±ã®ç¢ºèªã¨æ›´æ–°ã‚’è¡Œã„ã¾ã™ã€‚'
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
  graph:
    edges:
    - data:
        isInLoop: false
        sourceType: start
        targetType: llm
      id: start-source-get_today_date-target
      source: start
      sourceHandle: source
      target: get_today_date
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: tool
      id: get_today_date-source-fetch_daily_reports-target
      source: get_today_date
      sourceHandle: source
      target: fetch_daily_reports
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: tool
        targetType: llm
      id: fetch_daily_reports-source-extract_unsubmitted-target
      source: fetch_daily_reports
      sourceHandle: source
      target: extract_unsubmitted
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: question-classifier
      id: extract_unsubmitted-source-user_selection-target
      source: extract_unsubmitted
      sourceHandle: source
      target: user_selection
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        cases:
        - false
        - true
        isInLoop: false
        sourceType: question-classifier
        targetType: llm
      id: user_selection-1-prepare_update-target
      source: user_selection
      sourceHandle: '1'
      target: prepare_update
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: tool
      id: prepare_update-source-update_status-target
      source: prepare_update
      sourceHandle: source
      target: update_status
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        cases:
        - false
        - true
        isInLoop: false
        sourceType: question-classifier
        targetType: answer
      id: user_selection-0-cancel_answer-target
      source: user_selection
      sourceHandle: '0'
      target: cancel_answer
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: tool
        targetType: answer
      id: update_status-source-success_answer-target
      source: update_status
      sourceHandle: source
      target: success_answer
      targetHandle: target
      type: custom
      zIndex: 0
    graph_dict: {}
    nodes:
    - data:
        desc: ''
        selected: false
        title: Start
        type: start
        variables: []
      height: 53
      id: start
      position:
        x: 30
        y: 282
      positionAbsolute:
        x: 30
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'æœ¬æ—¥ã®æ—¥ä»˜ã‚’å–å¾—'
        model:
          completion_params:
            temperature: 0.1
          mode: chat
          name: gpt-4o-mini
          provider: openai
        prompt_template:
        - id: d8a47b5c-8a2e-4f5e-b6c3-9d7e2a4b8c1e
          role: system
          text: 'ã‚ãªãŸã¯æ—¥ä»˜ã‚’ç®¡ç†ã™ã‚‹ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚æœ¬æ—¥ã®æ—¥ä»˜ã‚’YYYY-MM-DDå½¢å¼ã§å›ç­”ã—ã¦ãã ã•ã„ã€‚'
        - id: e9b58c6d-9a3f-4e6d-a7b4-8c2d3a5b9c1f
          role: user
          text: 'ä»Šæ—¥ã®æ—¥ä»˜ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚'
        selected: false
        structured_output_enabled: false
        title: æœ¬æ—¥ã®æ—¥ä»˜å–å¾—
        type: llm
        vision:
          enabled: false
      height: 97
      id: get_today_date
      position:
        x: 334
        y: 282
      positionAbsolute:
        x: 334
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: 'Google Sheetsã‹ã‚‰æ—¥å ±ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—'
        is_team_authorization: true
        selected: false
        title: æ—¥å ±ãƒ‡ãƒ¼ã‚¿å–å¾—
        tool_configurations:
          SheetsScopes: 1
        tool_label: Batch Get
        tool_name: batch_get
        tool_parameters:
          ranges:
            type: constant
            value: '["æ—¥å ±ç®¡ç†!A:E"]'
          spreadsheet_id:
            type: constant
            value: '1ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmno0'
        type: tool
      height: 142
      id: fetch_daily_reports
      position:
        x: 638
        y: 282
      positionAbsolute:
        x: 638
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: true
          variable_selector:
          - fetch_daily_reports
          - output
        desc: 'æœªæå‡ºã®æ—¥å ±ã‚’æŠ½å‡ºã—ã¦è¡¨ç¤º'
        model:
          completion_params:
            temperature: 0.3
          mode: chat
          name: gpt-4o
          provider: openai
        prompt_template:
        - id: f1a69d8e-1b3c-4d5f-a8e2-9c7d3b5a8e2f
          role: system
          text: |
            ã‚ãªãŸã¯æ—¥å ±ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚
            å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æœ¬æ—¥ï¼ˆ{{#get_today_date.text#}}ï¼‰ã®æ—¥å ±ã®ã¿ã‚’æŠ½å‡ºã—ã€
            ãã®ä¸­ã‹ã‚‰ã€Œæœªæå‡ºã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ã‚‚ã®ã‚’è¦‹ã¤ã‘ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«åˆ†ã‹ã‚Šã‚„ã™ãè¡¨ç¤ºã—ã¦ãã ã•ã„ã€‚

            ãƒ‡ãƒ¼ã‚¿å½¢å¼:
            - Aåˆ—: æ—¥ä»˜ï¼ˆYYYY-MM-DDå½¢å¼ï¼‰
            - Båˆ—: ç¤¾å“¡å
            - Cåˆ—: æ—¥å ±ã‚¿ã‚¤ãƒˆãƒ«  
            - Dåˆ—: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆ"æœªæå‡º"/"æå‡ºæ¸ˆã¿"ï¼‰
            - Eåˆ—: æ›´æ–°æ—¥æ™‚

            é‡è¦ï¼šå„æ—¥å ±ã«ã¯è¡Œç•ªå·ï¼ˆ2ã‹ã‚‰å§‹ã¾ã‚‹ï¼‰ã‚’è¡¨ç¤ºã—ã¦ãã ã•ã„ã€‚
            ä¾‹ï¼šã€Œè¡Œ2: ç”°ä¸­å¤ªéƒ - å–¶æ¥­æ—¥å ±ã€
        - id: g2b79e8f-2c4d-5e6g-b9f3-0d8e4c6b9d3g
          role: user
          text: 'å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿: {{#fetch_daily_reports.output#}}'
        selected: false
        structured_output_enabled: false
        title: æœªæå‡ºæ—¥å ±ã®æŠ½å‡º
        type: llm
        vision:
          enabled: false
      height: 97
      id: extract_unsubmitted
      position:
        x: 942
        y: 282
      positionAbsolute:
        x: 942
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: '0'
          logical_operator: and
          conditions:
          - comparison_operator: contains
            id: h3c80f9g-3d5e-6f7h-c0g4-1e9f5d7c0e4h
            variable_selector:
            - sys
            - query
            value: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«'
        - case_id: '1'
          logical_operator: and
          conditions: []
        desc: ''
        instruction: |
          {{#extract_unsubmitted.text#}}

          æ›´æ–°ã—ãŸã„æ—¥å ±ã®ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚
          ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã™ã‚‹å ´åˆã¯ã€Œã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€ã¨å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚
        model:
          completion_params:
            temperature: 0.1
          mode: chat
          name: gpt-4o-mini
          provider: openai
        query_variable_selector:
        - sys
        - query
        selected: false
        title: ãƒ¦ãƒ¼ã‚¶ãƒ¼é¸æŠ
        type: question-classifier
      height: 95
      id: user_selection
      position:
        x: 1246
        y: 282
      positionAbsolute:
        x: 1246
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'batch_updateç”¨ã®JSONã‚’ç”Ÿæˆ'
        model:
          completion_params:
            temperature: 0.1
          mode: chat
          name: gpt-4o-mini
          provider: openai
        prompt_template:
        - id: h3c90f8g-4d6e-7f8h-c1g5-2f0g6e8c1f5h
          role: system
          text: |
            ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸè¡Œç•ªå·ã«åŸºã¥ã„ã¦ã€Google Sheetsã®batch_updateç”¨ã®JSONãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚
            
            å‡ºåŠ›å½¢å¼ä¾‹:
            [{"range": "æ—¥å ±ç®¡ç†!D2", "values": [["æå‡ºæ¸ˆã¿"]]}, {"range": "æ—¥å ±ç®¡ç†!E2", "values": [["2024-01-01 12:00:00"]]}]
            
            æ³¨æ„:
            - Dåˆ—ã«ã¯"æå‡ºæ¸ˆã¿"ã‚’è¨­å®š
            - Eåˆ—ã«ã¯ç¾åœ¨ã®æ—¥æ™‚ã‚’è¨­å®š
            - JSONå½¢å¼ã®ã¿ã‚’å‡ºåŠ›ï¼ˆèª¬æ˜æ–‡ã¯ä¸è¦ï¼‰
        - id: i4da91g9-5e7f-8g9i-d2h6-3g1h7f9d2g6i
          role: user
          text: 'è¡Œç•ªå·: {{#user_selection.output#}}ã€æœ¬æ—¥ã®æ—¥ä»˜: {{#get_today_date.text#}}'
        selected: false
        structured_output_enabled: false
        title: æ›´æ–°JSONç”Ÿæˆ
        type: llm
        vision:
          enabled: false
      height: 97
      id: prepare_update
      position:
        x: 1550
        y: 282
      positionAbsolute:
        x: 1550
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: 'é¸æŠã•ã‚ŒãŸæ—¥å ±ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°'
        is_team_authorization: true
        selected: false
        title: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°
        tool_configurations:
          SheetsScopes: 1
        tool_label: Batch Update
        tool_name: batch_update
        tool_parameters:
          data:
            type: mixed
            value: '{{#prepare_update.text#}}'
          spreadsheet_id:
            type: constant
            value: '1ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmno0'
        type: tool
      height: 142
      id: update_status
      position:
        x: 1854
        y: 282
      positionAbsolute:
        x: 1854
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: 'æ“ä½œã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ã¾ã—ãŸã€‚'
        desc: ''
        selected: false
        title: ã‚­ãƒ£ãƒ³ã‚»ãƒ«é€šçŸ¥
        type: answer
      height: 105
      id: cancel_answer
      position:
        x: 1550
        y: 212
      positionAbsolute:
        x: 1550
        y: 212
      selected: false
      sourcePosition: right
      targetPosition: left
      type: answer
      width: 244
    - data:
        answer: |
          æ—¥å ±ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ã€Œæå‡ºæ¸ˆã¿ã€ã«æ›´æ–°ã—ã¾ã—ãŸã€‚
          
          æ›´æ–°çµæœ: {{#update_status.output#}}
        desc: ''
        selected: false
        title: æ›´æ–°å®Œäº†é€šçŸ¥
        type: answer
      height: 105
      id: success_answer
      position:
        x: 2158
        y: 282
      positionAbsolute:
        x: 2158
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: answer
      width: 244
    viewport:
      x: 0
      y: 0
      zoom: 1