app:
  description: "æ”¹å–„ç‰ˆIF/ELSEãƒ«ãƒ¼ãƒ«ã®å‹•ä½œæ¤œè¨¼ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€‚YAMLã‚³ãƒ¡ãƒ³ãƒˆæ’é™¤ã€case_idå¿…é ˆåŒ–ã€ç‹¬ç«‹answerå‹ãƒ‘ã‚¿ãƒ¼ãƒ³ãªã©æœ€æ–°ãƒ«ãƒ¼ãƒ«ã‚’å³å¯†ã«å®Ÿè£…ã€‚"
  icon: "ğŸ”"
  icon_background: "#E0F7FA"
  mode: advanced-chat
  name: "æ”¹å–„ç‰ˆIF_ELSEæ¤œè¨¼ã‚¢ãƒ—ãƒª"
  use_icon_as_answer_icon: false

dependencies: []

kind: app

version: 0.3.0

workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      enabled: false
    opening_statement: |
      æ”¹å–„ç‰ˆIF/ELSEãƒ«ãƒ¼ãƒ«æ¤œè¨¼ã‚¢ãƒ—ãƒªã¸ã‚ˆã†ã“ãï¼
      
      ã“ã®ã‚¢ãƒ—ãƒªã¯æœ€æ–°ã®æ”¹å–„ãƒ«ãƒ¼ãƒ«ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ï¼š
      1. YAMLã‚³ãƒ¡ãƒ³ãƒˆã®å®Œå…¨æ’é™¤
      2. case_idå¿…é ˆå®Ÿè£…
      3. ç‹¬ç«‹answerå‹ãƒ‘ã‚¿ãƒ¼ãƒ³
      4. æ­£ç¢ºãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åï¼ˆisInLoopï¼‰
      
      ãƒ†ã‚¹ãƒˆå…¥åŠ›ä¾‹ï¼š
      - "score:85" â†’ é«˜ã‚¹ã‚³ã‚¢åˆ¤å®š
      - "score:45" â†’ ä¸­ã‚¹ã‚³ã‚¢åˆ¤å®š
      - "ç·Šæ€¥å¯¾å¿œãŒå¿…è¦ã§ã™" â†’ ç·Šæ€¥ãƒ‘ã‚¿ãƒ¼ãƒ³
      - "é€šå¸¸ã®å‡¦ç†ã§ã™" â†’ é€šå¸¸ãƒ‘ã‚¿ãƒ¼ãƒ³
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions:
      - "score:92"
      - "score:25"
      - "ç·Šæ€¥å¯¾å¿œã‚’ãŠé¡˜ã„ã—ã¾ã™"
      - "é€šå¸¸ã®ç”³è«‹ã§ã™"
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
      - data:
          isInLoop: false
          sourceType: start
          targetType: code
        id: start-parse-edge
        selected: false
        source: start_node
        sourceHandle: source
        target: parse_input_node
        targetHandle: target
        type: custom
        zIndex: 0
      
      - data:
          isInLoop: false
          sourceType: code
          targetType: if-else
        id: parse-score-edge
        selected: false
        source: parse_input_node
        sourceHandle: source
        target: score_check_node
        targetHandle: target
        type: custom
        zIndex: 0
      
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: score-low-edge
        selected: false
        source: score_check_node
        sourceHandle: low_score_case
        target: low_score_answer
        targetHandle: target
        type: custom
        zIndex: 0
      
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: score-medium-edge
        selected: false
        source: score_check_node
        sourceHandle: medium_score_case
        target: medium_score_answer
        targetHandle: target
        type: custom
        zIndex: 0
      
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: score-high-edge
        selected: false
        source: score_check_node
        sourceHandle: high_score_case
        target: high_score_answer
        targetHandle: target
        type: custom
        zIndex: 0
      
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: if-else
        id: score-pattern-edge
        selected: false
        source: score_check_node
        sourceHandle: 'false'
        target: pattern_check_node
        targetHandle: target
        type: custom
        zIndex: 0
      
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: pattern-urgent-edge
        selected: false
        source: pattern_check_node
        sourceHandle: urgent_pattern_case
        target: urgent_pattern_answer
        targetHandle: target
        type: custom
        zIndex: 0
      
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: pattern-normal-edge
        selected: false
        source: pattern_check_node
        sourceHandle: normal_pattern_case
        target: normal_pattern_answer
        targetHandle: target
        type: custom
        zIndex: 0
      
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: pattern-default-edge
        selected: false
        source: pattern_check_node
        sourceHandle: 'false'
        target: default_answer
        targetHandle: target
        type: custom
        zIndex: 0
    
    nodes:
      - data:
          desc: "é–‹å§‹ãƒãƒ¼ãƒ‰ã€‚advanced-chatãƒ¢ãƒ¼ãƒ‰ã®ãŸã‚å¤‰æ•°ã¯ç©ºé…åˆ—"
          selected: false
          title: "é–‹å§‹"
          type: start
          variables: []
        height: 54
        id: start_node
        position:
          x: 50
          y: 300
        positionAbsolute:
          x: 50
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      
      - data:
          code: |
            import re
            
            user_input = sys.query.lower() if sys.query else ""
            
            score_match = re.search(r'score:\s*(\d+)', user_input)
            
            if score_match:
                score_value = int(score_match.group(1))
                input_type = "score"
            else:
                score_value = -1
                input_type = "text"
            
            return {
                "input_type": input_type,
                "score_value": score_value,
                "original_text": sys.query
            }
          code_language: python3
          desc: "å…¥åŠ›ã‚’è§£æã—ã¦æ•°å€¤ã‚„ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æŠ½å‡ºã€‚ã‚³ãƒ¡ãƒ³ãƒˆã¯ä½¿ç”¨ã›ãšdescã§èª¬æ˜"
          outputs:
            input_type:
              type: string
            score_value:
              type: number
            original_text:
              type: string
          selected: false
          title: "å…¥åŠ›è§£æ"
          type: code
          variables:
            - value_selector:
                - sys
                - query
              variable: sys.query
        height: 98
        id: parse_input_node
        position:
          x: 350
          y: 300
        positionAbsolute:
          x: 350
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      
      - data:
          type: if-else
          cases:
            - id: low_score_case
              case_id: low_score_case
              conditions:
                - variable_selector:
                    - parse_input_node
                    - score_value
                  comparison_operator: "â‰¤"
                  value: 30
              logical_operator: and
            
            - id: medium_score_case
              case_id: medium_score_case
              conditions:
                - variable_selector:
                    - parse_input_node
                    - score_value
                  comparison_operator: "â‰¤"
                  value: 70
              logical_operator: and
            
            - id: high_score_case
              case_id: high_score_case
              conditions:
                - variable_selector:
                    - parse_input_node
                    - score_value
                  comparison_operator: ">"
                  value: 70
              logical_operator: and
          desc: "æ•°å€¤ç¯„å›²åˆ¤å®šã€‚æ¡ä»¶ã¯é †ç•ªã«è©•ä¾¡ã•ã‚Œé‡è¤‡ãªã—"
          selected: false
          title: "ã‚¹ã‚³ã‚¢åˆ¤å®š"
        height: 198
        id: score_check_node
        position:
          x: 650
          y: 300
        positionAbsolute:
          x: 650
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      
      - data:
          type: if-else
          cases:
            - id: urgent_pattern_case
              case_id: urgent_pattern_case
              conditions:
                - variable_selector:
                    - parse_input_node
                    - original_text
                  comparison_operator: contains
                  value: "ç·Šæ€¥"
              logical_operator: and
            
            - id: normal_pattern_case
              case_id: normal_pattern_case
              conditions:
                - variable_selector:
                    - parse_input_node
                    - original_text
                  comparison_operator: contains
                  value: "é€šå¸¸"
              logical_operator: and
          desc: "æ–‡å­—åˆ—ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ¤å®šã€‚ç‹¬ç«‹answerå‹ã§å®Ÿè£…"
          selected: false
          title: "ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ¤å®š"
        height: 154
        id: pattern_check_node
        position:
          x: 650
          y: 600
        positionAbsolute:
          x: 650
          y: 600
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      
      - data:
          answer: |
            ã€ä½ã‚¹ã‚³ã‚¢åˆ¤å®šã€‘
            ã‚¹ã‚³ã‚¢: {{#parse_input_node.score_value#}}ç‚¹
            
            åˆ¤å®šçµæœï¼šä½ã‚¹ã‚³ã‚¢ï¼ˆ0-30ç‚¹ï¼‰
            æ”¹å–„ãŒå¿…è¦ãªçŠ¶æ…‹ã§ã™ã€‚åŸºç¤ã‹ã‚‰è¦‹ç›´ã—ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚
            
            âœ… æ”¹å–„ç‰ˆãƒ«ãƒ¼ãƒ«ã®å®Ÿè£…ç¢ºèªï¼š
            - case_idæ­£å¸¸è¨­å®š
            - Unicodeæ¼”ç®—å­ï¼ˆâ‰¤ï¼‰ä½¿ç”¨
            - ç‹¬ç«‹answerãƒãƒ¼ãƒ‰å®Ÿè£…
          desc: "ä½ã‚¹ã‚³ã‚¢ç”¨ã®ç‹¬ç«‹answer"
          selected: false
          title: "ä½ã‚¹ã‚³ã‚¢çµæœ"
          type: answer
          variables: []
        height: 250
        id: low_score_answer
        position:
          x: 950
          y: 100
        positionAbsolute:
          x: 950
          y: 100
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      
      - data:
          answer: |
            ã€ä¸­ã‚¹ã‚³ã‚¢åˆ¤å®šã€‘
            ã‚¹ã‚³ã‚¢: {{#parse_input_node.score_value#}}ç‚¹
            
            åˆ¤å®šçµæœï¼šä¸­ã‚¹ã‚³ã‚¢ï¼ˆ31-70ç‚¹ï¼‰
            æ¨™æº–çš„ãªçŠ¶æ…‹ã§ã™ã€‚ã•ã‚‰ãªã‚‹å‘ä¸Šã‚’ç›®æŒ‡ã—ã¾ã—ã‚‡ã†ã€‚
            
            âœ… æ”¹å–„ç‰ˆãƒ«ãƒ¼ãƒ«ã®å®Ÿè£…ç¢ºèªï¼š
            - æ¡ä»¶ã®é‡è¤‡ãªã—
            - é †æ¬¡è©•ä¾¡ã«ã‚ˆã‚‹ç¯„å›²æŒ‡å®š
            - ç‹¬ç«‹answerãƒãƒ¼ãƒ‰å®Ÿè£…
          desc: "ä¸­ã‚¹ã‚³ã‚¢ç”¨ã®ç‹¬ç«‹answer"
          selected: false
          title: "ä¸­ã‚¹ã‚³ã‚¢çµæœ"
          type: answer
          variables: []
        height: 250
        id: medium_score_answer
        position:
          x: 950
          y: 400
        positionAbsolute:
          x: 950
          y: 400
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      
      - data:
          answer: |
            ã€é«˜ã‚¹ã‚³ã‚¢åˆ¤å®šã€‘
            ã‚¹ã‚³ã‚¢: {{#parse_input_node.score_value#}}ç‚¹
            
            åˆ¤å®šçµæœï¼šé«˜ã‚¹ã‚³ã‚¢ï¼ˆ71-100ç‚¹ï¼‰
            å„ªç§€ãªçŠ¶æ…‹ã§ã™ã€‚ã“ã®èª¿å­ã‚’ç¶­æŒã—ã¦ãã ã•ã„ï¼
            
            âœ… æ”¹å–„ç‰ˆãƒ«ãƒ¼ãƒ«ã®å®Ÿè£…ç¢ºèªï¼š
            - Unicodeæ¼”ç®—å­ï¼ˆ>ï¼‰ä½¿ç”¨
            - æœ€å¾Œã®æ¡ä»¶ã¨ã—ã¦å®Ÿè£…
            - ç‹¬ç«‹answerãƒãƒ¼ãƒ‰å®Ÿè£…
          desc: "é«˜ã‚¹ã‚³ã‚¢ç”¨ã®ç‹¬ç«‹answer"
          selected: false
          title: "é«˜ã‚¹ã‚³ã‚¢çµæœ"
          type: answer
          variables: []
        height: 250
        id: high_score_answer
        position:
          x: 950
          y: 700
        positionAbsolute:
          x: 950
          y: 700
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      
      - data:
          answer: |
            ã€ç·Šæ€¥ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡ºã€‘
            å…¥åŠ›ãƒ†ã‚­ã‚¹ãƒˆ: {{#parse_input_node.original_text#}}
            
            ç·Šæ€¥å¯¾å¿œãŒå¿…è¦ãªæ¡ˆä»¶ã¨ã—ã¦å‡¦ç†ã—ã¾ã™ã€‚
            æ‹…å½“è€…ã«å³åº§ã«é€šçŸ¥ã•ã‚Œã¾ã™ã€‚
            
            âœ… æ”¹å–„ç‰ˆãƒ«ãƒ¼ãƒ«ã®å®Ÿè£…ç¢ºèªï¼š
            - æ–‡å­—åˆ—containsæ¼”ç®—å­
            - ç‹¬ç«‹answerãƒãƒ¼ãƒ‰
            - å®Ÿè¡Œãƒ‘ã‚¹ã®å¤‰æ•°ã®ã¿å‚ç…§
          desc: "ç·Šæ€¥ãƒ‘ã‚¿ãƒ¼ãƒ³ç”¨ã®ç‹¬ç«‹answer"
          selected: false
          title: "ç·Šæ€¥ãƒ‘ã‚¿ãƒ¼ãƒ³çµæœ"
          type: answer
          variables: []
        height: 250
        id: urgent_pattern_answer
        position:
          x: 950
          y: 1000
        positionAbsolute:
          x: 950
          y: 1000
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      
      - data:
          answer: |
            ã€é€šå¸¸ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡ºã€‘
            å…¥åŠ›ãƒ†ã‚­ã‚¹ãƒˆ: {{#parse_input_node.original_text#}}
            
            é€šå¸¸ã®æ¡ˆä»¶ã¨ã—ã¦å‡¦ç†ã—ã¾ã™ã€‚
            æ¨™æº–çš„ãªæ‰‹é †ã§å¯¾å¿œã„ãŸã—ã¾ã™ã€‚
            
            âœ… æ”¹å–„ç‰ˆãƒ«ãƒ¼ãƒ«ã®å®Ÿè£…ç¢ºèªï¼š
            - è¤‡æ•°æ¡ä»¶ã®å·®åˆ¥åŒ–
            - ç‹¬ç«‹answerãƒãƒ¼ãƒ‰
            - å¤‰æ•°å‚ç…§ã‚¨ãƒ©ãƒ¼å›é¿
          desc: "é€šå¸¸ãƒ‘ã‚¿ãƒ¼ãƒ³ç”¨ã®ç‹¬ç«‹answer"
          selected: false
          title: "é€šå¸¸ãƒ‘ã‚¿ãƒ¼ãƒ³çµæœ"
          type: answer
          variables: []
        height: 250
        id: normal_pattern_answer
        position:
          x: 950
          y: 1300
        positionAbsolute:
          x: 950
          y: 1300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      
      - data:
          answer: |
            ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‡¦ç†ã€‘
            å…¥åŠ›: {{#parse_input_node.original_text#}}
            
            ç‰¹å®šã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã«è©²å½“ã—ãªã„å…¥åŠ›ã§ã™ã€‚
            ä¸€èˆ¬çš„ãªå‡¦ç†ã¨ã—ã¦å¯¾å¿œã—ã¾ã™ã€‚
            
            âœ… æ”¹å–„ç‰ˆãƒ«ãƒ¼ãƒ«ã®å®Ÿè£…ç¢ºèªï¼š
            - falseãƒãƒ³ãƒ‰ãƒ«ã«ã‚ˆã‚‹ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‡¦ç†
            - YAMLã‚³ãƒ¡ãƒ³ãƒˆå®Œå…¨æ’é™¤
            - ã™ã¹ã¦ã®å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¨­å®š
          desc: "ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚±ãƒ¼ã‚¹ç”¨ã®answer"
          selected: false
          title: "ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆçµæœ"
          type: answer
          variables: []
        height: 250
        id: default_answer
        position:
          x: 950
          y: 1600
        positionAbsolute:
          x: 950
          y: 1600
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
    
    viewport:
      x: 0
      y: 0
      zoom: 0.7