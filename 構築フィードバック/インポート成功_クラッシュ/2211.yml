app:
  description: "å•†å“ã«é–¢ã™ã‚‹å•ã„åˆã‚ã›ã‚’åŠ¹ç‡çš„ã«å‡¦ç†ã—ã€é©åˆ‡ãªå›ç­”ã‚’ç”Ÿæˆã™ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼"
  icon: "ğŸ“‹"
  icon_background: "#D4E7FC"
  mode: advanced-chat
  name: "å•ã„åˆã‚ã›å‡¦ç†åŠ¹ç‡åŒ–ã‚·ã‚¹ãƒ†ãƒ "
  use_icon_as_answer_icon: false

dependencies: []

kind: app

version: 0.3.0

workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      enabled: false
    opening_statement: |
      å•†å“ã«é–¢ã™ã‚‹ãŠå•ã„åˆã‚ã›ã‚’æ‰¿ã‚Šã¾ã™ã€‚
      
      ä»¥ä¸‹ã®ã‚ˆã†ãªå†…å®¹ã«ã¤ã„ã¦ãŠç­”ãˆã§ãã¾ã™ï¼š
      â€¢ å•†å“ã®ä»•æ§˜ã‚„æ€§èƒ½ã«ã¤ã„ã¦
      â€¢ åœ¨åº«çŠ¶æ³ã«ã¤ã„ã¦
      â€¢ ãã®ä»–ã®ã”è³ªå•
      
      ã©ã®ã‚ˆã†ãªã“ã¨ã‚’ãŠçŸ¥ã‚Šã«ãªã‚ŠãŸã„ã§ã™ã‹ï¼Ÿ
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions:
      - "ã‚«ã‚·ã‚ªã®ã‚µãƒƒã‚«ãƒ¼ç”¨ãƒ¬ãƒ•ãƒªãƒ¼ã‚¦ã‚©ãƒƒãƒã¯å–ã‚Šæ‰±ã„ã§ãã¾ã™ã‹ï¼Ÿ"
      - "ã‚­ãƒ£ãƒ—ãƒ†ãƒ³ã‚¹ã‚¿ãƒƒã‚°ã®ã‚¯ãƒ¼ãƒ©ãƒ¼ãƒœãƒƒã‚¯ã‚¹UE00093ã®ä¿å†·æ™‚é–“ã‚’æ•™ãˆã¦ãã ã•ã„"
      - "TSPå“çƒå°ã®ãƒœãƒ«ãƒˆã‚»ãƒƒãƒˆã¯æ³¨æ–‡ã§ãã¾ã™ã‹ï¼Ÿ"
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
      - data:
          isInLoop: false
          sourceType: start
          targetType: llm
        id: start-classify-edge
        selected: false
        source: start_node
        sourceHandle: source
        target: classify_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: llm
          targetType: if-else
        id: classify-branch-edge
        selected: false
        source: classify_node
        sourceHandle: source
        target: branch_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: llm
        id: branch-spec-edge
        selected: false
        source: branch_node
        sourceHandle: case_1
        target: extract_spec_node
        targetHandle: target
        type: custom
        zIndex: 0
        priority: 1
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: llm
        id: branch-stock-edge
        selected: false
        source: branch_node
        sourceHandle: case_2
        target: extract_stock_node
        targetHandle: target
        type: custom
        zIndex: 0
        priority: 2
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: answer
        id: branch-other-edge
        selected: false
        source: branch_node
        sourceHandle: false
        target: other_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
        priority: 3
      - data:
          isInLoop: false
          sourceType: llm
          targetType: tool
        id: spec-search-edge
        selected: false
        source: extract_spec_node
        sourceHandle: source
        target: web_search_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: tool
          targetType: if-else
        id: search-check-edge
        selected: false
        source: web_search_node
        sourceHandle: source
        target: check_search_result_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: llm
        id: search-found-edge
        selected: false
        source: check_search_result_node
        sourceHandle: case_1
        target: generate_spec_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: template
        id: search-notfound-edge
        selected: false
        source: check_search_result_node
        sourceHandle: false
        target: spec_inquiry_template_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: llm
          targetType: answer
        id: spec-answer-edge
        selected: false
        source: generate_spec_answer_node
        sourceHandle: source
        target: spec_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: template
          targetType: answer
        id: spec-inquiry-answer-edge
        selected: false
        source: spec_inquiry_template_node
        sourceHandle: source
        target: spec_inquiry_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: llm
          targetType: tool
        id: stock-db-edge
        selected: false
        source: extract_stock_node
        sourceHandle: source
        target: check_db_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: tool
          targetType: if-else
        id: db-check-edge
        selected: false
        source: check_db_node
        sourceHandle: source
        target: check_stock_result_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: template
        id: stock-available-edge
        selected: false
        source: check_stock_result_node
        sourceHandle: case_1
        target: stock_available_template_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: if-else
          targetType: template
        id: stock-unavailable-edge
        selected: false
        source: check_stock_result_node
        sourceHandle: false
        target: stock_inquiry_template_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: template
          targetType: answer
        id: stock-available-answer-edge
        selected: false
        source: stock_available_template_node
        sourceHandle: source
        target: stock_available_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
      - data:
          isInLoop: false
          sourceType: template
          targetType: answer
        id: stock-inquiry-answer-edge
        selected: false
        source: stock_inquiry_template_node
        sourceHandle: source
        target: stock_inquiry_answer_node
        targetHandle: target
        type: custom
        zIndex: 0
    nodes:
      - data:
          desc: "é–‹å§‹ãƒãƒ¼ãƒ‰"
          selected: false
          title: "é–‹å§‹"
          type: start
          variables: []
        height: 54
        id: start_node
        position:
          x: 50
          y: 350
        positionAbsolute:
          x: 50
          y: 350
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "å•ã„åˆã‚ã›å†…å®¹ã‚’åˆ†é¡"
          selected: false
          title: "å•ã„åˆã‚ã›åˆ†é¡"
          type: llm
          model:
            provider: openai
            name: gpt-4
            mode: chat
            completion_params:
              temperature: 0.3
              max_tokens: 100
          prompt_template:
            - id: system-classify
              role: system
              text: |
                ã‚ãªãŸã¯å•ã„åˆã‚ã›å†…å®¹ã‚’åˆ†é¡ã™ã‚‹å°‚é–€å®¶ã§ã™ã€‚
                ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å•ã„åˆã‚ã›ã‚’ä»¥ä¸‹ã®3ã¤ã®ã‚«ãƒ†ã‚´ãƒªãƒ¼ã«åˆ†é¡ã—ã¦ãã ã•ã„ï¼š
                
                1. å•†å“ä»•æ§˜ï¼šä¿å†·æ™‚é–“ã€æ€§èƒ½å€¤ã€è£½å“ã‚¹ãƒšãƒƒã‚¯ã€æŠ€è¡“çš„ãªä»•æ§˜ã«é–¢ã™ã‚‹è³ªå•
                2. åœ¨åº«çŠ¶æ³ï¼šå–æ‰±æœ‰ç„¡ã€å–ã‚Šå¯„ã›å¯å¦ã€åœ¨åº«ç¢ºèªã€æ³¨æ–‡å¯èƒ½æ€§ã«é–¢ã™ã‚‹è³ªå•
                3. ãã®ä»–ï¼šä¸Šè¨˜ä»¥å¤–ã®è³ªå•
                
                å¿…ãšã€Œå•†å“ä»•æ§˜ã€ã€Œåœ¨åº«çŠ¶æ³ã€ã€Œãã®ä»–ã€ã®ã„ãšã‚Œã‹ä¸€ã¤ã‚’è¿”ã—ã¦ãã ã•ã„ã€‚
            - id: user-classify
              role: user
              text: |
                {{#sys.query#}}
          structured_output_enabled: false
          vision:
            enabled: false
          variables: []
          context:
            enabled: false
            variable_selector: []
        height: 98
        id: classify_node
        position:
          x: 350
          y: 350
        positionAbsolute:
          x: 350
          y: 350
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "åˆ†é¡çµæœã«åŸºã¥ã„ã¦åˆ†å²"
          selected: false
          title: "å‡¦ç†åˆ†å²"
          type: if-else
          cases:
            - id: case_1
              case_id: case_1
              conditions:
                - variable_selector:
                    - classify_node
                    - text
                  comparison_operator: contains
                  value: "å•†å“ä»•æ§˜"
              logical_operator: and
            - id: case_2
              case_id: case_2
              conditions:
                - variable_selector:
                    - classify_node
                    - text
                  comparison_operator: contains
                  value: "åœ¨åº«çŠ¶æ³"
              logical_operator: and
        height: 250
        id: branch_node
        position:
          x: 650
          y: 350
        positionAbsolute:
          x: 650
          y: 350
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "å•†å“ä»•æ§˜å•ã„åˆã‚ã›ã‹ã‚‰å•†å“åã¨ãƒ¡ãƒ¼ã‚«ãƒ¼ã‚’æŠ½å‡º"
          selected: false
          title: "å•†å“æƒ…å ±æŠ½å‡ºï¼ˆä»•æ§˜ï¼‰"
          type: llm
          model:
            provider: openai
            name: gpt-4
            mode: chat
            completion_params:
              temperature: 0.3
              max_tokens: 200
          prompt_template:
            - id: system-extract-spec
              role: system
              text: |
                å•ã„åˆã‚ã›ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰å•†å“åã¨ãƒ¡ãƒ¼ã‚«ãƒ¼åã‚’æŠ½å‡ºã—ã¦ãã ã•ã„ã€‚
                ä»¥ä¸‹ã®å½¢å¼ã§å›ç­”ã—ã¦ãã ã•ã„ï¼š
                
                å•†å“åï¼š[æŠ½å‡ºã—ãŸå•†å“å]
                ãƒ¡ãƒ¼ã‚«ãƒ¼ï¼š[æŠ½å‡ºã—ãŸãƒ¡ãƒ¼ã‚«ãƒ¼å]
                æ¤œç´¢URLï¼š[ãƒ¡ãƒ¼ã‚«ãƒ¼å…¬å¼ã‚µã‚¤ãƒˆã®URLï¼ˆæ¨å®šï¼‰]
                
                ãƒ¡ãƒ¼ã‚«ãƒ¼åãŒæ˜è¨˜ã•ã‚Œã¦ã„ãªã„å ´åˆã¯ã€å•†å“åã‹ã‚‰æ¨å®šã—ã¦ãã ã•ã„ã€‚
            - id: user-extract-spec
              role: user
              text: |
                {{#sys.query#}}
          structured_output_enabled: false
          vision:
            enabled: false
          variables: []
          context:
            enabled: false
            variable_selector: []
        height: 98
        id: extract_spec_node
        position:
          x: 950
          y: 100
        positionAbsolute:
          x: 950
          y: 100
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "å•†å“æƒ…å ±ã‚’WEBæ¤œç´¢"
          selected: false
          title: "WEBæ¤œç´¢"
          type: llm
          model:
            provider: openai
            name: gpt-4
            mode: chat
            completion_params:
              temperature: 0.7
              max_tokens: 1000
          prompt_template:
            - id: system-web-search
              role: system
              text: |
                ã‚ãªãŸã¯WEBæ¤œç´¢ã®çµæœã‚’æä¾›ã™ã‚‹å°‚é–€å®¶ã§ã™ã€‚
                ä¸ãˆã‚‰ã‚ŒãŸå•†å“æƒ…å ±ã«åŸºã¥ã„ã¦ã€ãã®å•†å“ã®è©³ç´°ä»•æ§˜ã‚’å›ç­”ã—ã¦ãã ã•ã„ã€‚
                
                å®Ÿéš›ã®æ¤œç´¢çµæœã®ã‚ˆã†ã«ã€ä»¥ä¸‹ã®æƒ…å ±ã‚’å«ã‚ã¦ãã ã•ã„ï¼š
                - å•†å“ã®ä¸»è¦ã‚¹ãƒšãƒƒã‚¯
                - æŠ€è¡“çš„ãªä»•æ§˜
                - æ€§èƒ½ãƒ‡ãƒ¼ã‚¿
                - ãƒ¡ãƒ¼ã‚«ãƒ¼å…¬å¼æƒ…å ±ã¸ã®ãƒªãƒ³ã‚¯ï¼ˆå®Ÿåœ¨ã™ã‚‹ã‚‚ã®ï¼‰
                
                æƒ…å ±ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯ã€Œæ¤œç´¢çµæœãªã—ã€ã¨å›ç­”ã—ã¦ãã ã•ã„ã€‚
            - id: user-web-search
              role: user
              text: |
                ä»¥ä¸‹ã®å•†å“æƒ…å ±ã«ã¤ã„ã¦æ¤œç´¢ã—ã¦ãã ã•ã„ï¼š
                {{#extract_spec_node.text#}}
          structured_output_enabled: false
          vision:
            enabled: false
          variables: []
          context:
            enabled: false
            variable_selector: []
        height: 98
        id: web_search_node
        position:
          x: 1250
          y: 100
        positionAbsolute:
          x: 1250
          y: 100
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "æ¤œç´¢çµæœã®æœ‰ç„¡ã‚’ç¢ºèª"
          selected: false
          title: "æ¤œç´¢çµæœç¢ºèª"
          type: if-else
          cases:
            - id: case_1
              case_id: case_1
              conditions:
                - variable_selector:
                    - web_search_node
                    - text
                  comparison_operator: not contains
                  value: "æ¤œç´¢çµæœãªã—"
              logical_operator: and
        height: 154
        id: check_search_result_node
        position:
          x: 1550
          y: 100
        positionAbsolute:
          x: 1550
          y: 100
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "æ¤œç´¢çµæœã‹ã‚‰å›ç­”ã‚’ç”Ÿæˆ"
          selected: false
          title: "ä»•æ§˜å›ç­”ç”Ÿæˆ"
          type: llm
          model:
            provider: openai
            name: gpt-4
            mode: chat
            completion_params:
              temperature: 0.5
              max_tokens: 500
          prompt_template:
            - id: system-generate-spec
              role: system
              text: |
                æ¤œç´¢çµæœã‚’åŸºã«ã€ãŠå®¢æ§˜ã®å•†å“ä»•æ§˜ã«é–¢ã™ã‚‹å•ã„åˆã‚ã›ã«å¯¾ã—ã¦ã€
                åˆ†ã‹ã‚Šã‚„ã™ãä¸å¯§ãªå›ç­”ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚
                
                å›ç­”ã«ã¯ä»¥ä¸‹ã‚’å«ã‚ã¦ãã ã•ã„ï¼š
                - å…·ä½“çš„ãªä»•æ§˜æƒ…å ±
                - æ•°å€¤ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹å ´åˆã¯æ˜è¨˜
                - ä¿¡é ¼ã§ãã‚‹æƒ…å ±æºã®æ˜ç¤º
            - id: user-generate-spec
              role: user
              text: |
                å•ã„åˆã‚ã›å†…å®¹ï¼š{{#sys.query#}}
                
                æ¤œç´¢çµæœï¼š
                {{#web_search_node.text#}}
          structured_output_enabled: false
          vision:
            enabled: false
          variables: []
          context:
            enabled: false
            variable_selector: []
        height: 98
        id: generate_spec_answer_node
        position:
          x: 1850
          y: 50
        positionAbsolute:
          x: 1850
          y: 50
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "ãƒ¡ãƒ¼ã‚«ãƒ¼å•ã„åˆã‚ã›æ–‡ç”Ÿæˆ"
          selected: false
          title: "ãƒ¡ãƒ¼ã‚«ãƒ¼å•ã„åˆã‚ã›æ–‡ï¼ˆä»•æ§˜ï¼‰"
          type: llm
          model:
            provider: openai
            name: gpt-4
            mode: chat
            completion_params:
              temperature: 0.5
              max_tokens: 500
          prompt_template:
            - id: system-spec-inquiry
              role: system
              text: |
                ã‚ãªãŸã¯ãƒ¡ãƒ¼ã‚«ãƒ¼ã¸ã®å•ã„åˆã‚ã›æ–‡ã‚’ä½œæˆã™ã‚‹å°‚é–€å®¶ã§ã™ã€‚
                é¡§å®¢ã‹ã‚‰ã®å•†å“ä»•æ§˜ã«é–¢ã™ã‚‹å•ã„åˆã‚ã›ã«åŸºã¥ã„ã¦ã€
                ä¸å¯§ã§åˆ†ã‹ã‚Šã‚„ã™ã„ãƒ¡ãƒ¼ã‚«ãƒ¼å•ã„åˆã‚ã›æ¡ˆå†…æ–‡ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
            - id: user-spec-inquiry
              role: user
              text: |
                ä»¥ä¸‹ã®æƒ…å ±ã‚’åŸºã«ã€ãƒ¡ãƒ¼ã‚«ãƒ¼å•ã„åˆã‚ã›æ¡ˆå†…æ–‡ã‚’ä½œæˆã—ã¦ãã ã•ã„ï¼š
                
                å•†å“æƒ…å ±ï¼š
                {{#extract_spec_node.text#}}
                
                ãŠå®¢æ§˜ã‹ã‚‰ã®å•ã„åˆã‚ã›å†…å®¹ï¼š
                {{#sys.query#}}
                
                æ¡ˆå†…æ–‡ã«ã¯ä»¥ä¸‹ã‚’å«ã‚ã¦ãã ã•ã„ï¼š
                - è©³ç´°ãªä»•æ§˜æƒ…å ±ã®ç¢ºèªãŒå¿…è¦ã§ã‚ã‚‹ã“ã¨
                - ãƒ¡ãƒ¼ã‚«ãƒ¼ã¸å•ã„åˆã‚ã›ã‚‹ã“ã¨ã®èª¬æ˜
                - å›ç­”ã«ãŠæ™‚é–“ã‚’ã„ãŸã ãã“ã¨ã¸ã®ãŠè©«ã³
                - ä¸å¯§ãªå¯¾å¿œå§¿å‹¢
          structured_output_enabled: false
          vision:
            enabled: false
          variables: []
          context:
            enabled: false
            variable_selector: []
        height: 98
        id: spec_inquiry_template_node
        position:
          x: 1850
          y: 200
        positionAbsolute:
          x: 1850
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "{{#generate_spec_answer_node.text#}}"
          desc: "ä»•æ§˜æƒ…å ±ã®å›ç­”"
          selected: false
          title: "ä»•æ§˜å›ç­”"
          type: answer
          variables: []
        height: 107
        id: spec_answer_node
        position:
          x: 2150
          y: 50
        positionAbsolute:
          x: 2150
          y: 50
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "{{#spec_inquiry_template_node.text#}}"
          desc: "ãƒ¡ãƒ¼ã‚«ãƒ¼å•ã„åˆã‚ã›æ¡ˆå†…"
          selected: false
          title: "ãƒ¡ãƒ¼ã‚«ãƒ¼å•ã„åˆã‚ã›ï¼ˆä»•æ§˜ï¼‰"
          type: answer
          variables: []
        height: 107
        id: spec_inquiry_answer_node
        position:
          x: 2150
          y: 200
        positionAbsolute:
          x: 2150
          y: 200
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "åœ¨åº«å•ã„åˆã‚ã›ã‹ã‚‰å•†å“åã¨ãƒ¡ãƒ¼ã‚«ãƒ¼ã‚’æŠ½å‡º"
          selected: false
          title: "å•†å“æƒ…å ±æŠ½å‡ºï¼ˆåœ¨åº«ï¼‰"
          type: llm
          model:
            provider: openai
            name: gpt-4
            mode: chat
            completion_params:
              temperature: 0.3
              max_tokens: 200
          prompt_template:
            - id: system-extract-stock
              role: system
              text: |
                å•ã„åˆã‚ã›ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰å•†å“åã¨ãƒ¡ãƒ¼ã‚«ãƒ¼åã‚’æŠ½å‡ºã—ã¦ãã ã•ã„ã€‚
                ä»¥ä¸‹ã®å½¢å¼ã§å›ç­”ã—ã¦ãã ã•ã„ï¼š
                
                å•†å“åï¼š[æŠ½å‡ºã—ãŸå•†å“å]
                ãƒ¡ãƒ¼ã‚«ãƒ¼ï¼š[æŠ½å‡ºã—ãŸãƒ¡ãƒ¼ã‚«ãƒ¼å]
                å‹ç•ªï¼š[ã‚‚ã—ã‚ã‚Œã°å‹ç•ª]
                
                ãƒ¡ãƒ¼ã‚«ãƒ¼åãŒæ˜è¨˜ã•ã‚Œã¦ã„ãªã„å ´åˆã¯ã€å•†å“åã‹ã‚‰æ¨å®šã—ã¦ãã ã•ã„ã€‚
            - id: user-extract-stock
              role: user
              text: |
                {{#sys.query#}}
          structured_output_enabled: false
          vision:
            enabled: false
          variables: []
          context:
            enabled: false
            variable_selector: []
        height: 98
        id: extract_stock_node
        position:
          x: 950
          y: 350
        positionAbsolute:
          x: 950
          y: 350
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "å•†å“DBã§åœ¨åº«ç¢ºèªï¼ˆãƒ€ãƒŸãƒ¼å®Ÿè£…ï¼‰"
          selected: false
          title: "åœ¨åº«DBç¢ºèª"
          type: llm
          model:
            provider: openai
            name: gpt-4
            mode: chat
            completion_params:
              temperature: 0.3
              max_tokens: 200
          prompt_template:
            - id: system-db-check
              role: system
              text: |
                ã‚ãªãŸã¯å•†å“åœ¨åº«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ç…§ä¼šçµæœã‚’è¿”ã™ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚
                å•†å“æƒ…å ±ã‚’å—ã‘å–ã‚Šã€åœ¨åº«çŠ¶æ³ã‚’å›ç­”ã—ã¦ãã ã•ã„ã€‚
                
                å›ç­”ã¯ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§è¿”ã—ã¦ãã ã•ã„ï¼š
                1. ã€Œåœ¨åº«ã‚ã‚Šã€ - å•†å“ãŒåœ¨åº«ã«ã‚ã‚‹å ´åˆ
                2. ã€Œåœ¨åº«ãªã—ã€ - å•†å“ãŒåœ¨åº«ã«ãªã„å ´åˆ
                
                ãƒ€ãƒŸãƒ¼å®Ÿè£…ã®ãŸã‚ã€å•†å“åã«ã€Œã‚µãƒƒã‚«ãƒ¼ã€ã€Œã‚¯ãƒ¼ãƒ©ãƒ¼ã€ãŒå«ã¾ã‚Œã‚‹å ´åˆã¯ã€Œåœ¨åº«ã‚ã‚Šã€ã€
                ãã‚Œä»¥å¤–ã¯ã€Œåœ¨åº«ãªã—ã€ã¨å›ç­”ã—ã¦ãã ã•ã„ã€‚
            - id: user-db-check
              role: user
              text: |
                ä»¥ä¸‹ã®å•†å“ã®åœ¨åº«ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š
                {{#extract_stock_node.text#}}
          structured_output_enabled: false
          vision:
            enabled: false
          variables: []
          context:
            enabled: false
            variable_selector: []
        height: 98
        id: check_db_node
        position:
          x: 1250
          y: 350
        positionAbsolute:
          x: 1250
          y: 350
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "åœ¨åº«ç¢ºèªçµæœã®åˆ¤å®š"
          selected: false
          title: "åœ¨åº«æœ‰ç„¡åˆ¤å®š"
          type: if-else
          cases:
            - id: case_1
              case_id: case_1
              conditions:
                - variable_selector:
                    - check_db_node
                    - text
                  comparison_operator: contains
                  value: "åœ¨åº«ã‚ã‚Š"
              logical_operator: and
        height: 154
        id: check_stock_result_node
        position:
          x: 1550
          y: 350
        positionAbsolute:
          x: 1550
          y: 350
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "åœ¨åº«ã‚ã‚Šå›ç­”ç”Ÿæˆ"
          selected: false
          title: "åœ¨åº«ã‚ã‚Šå›ç­”"
          type: llm
          model:
            provider: openai
            name: gpt-4
            mode: chat
            completion_params:
              temperature: 0.5
              max_tokens: 300
          prompt_template:
            - id: system-stock-available
              role: system
              text: |
                ã‚ãªãŸã¯åœ¨åº«ç¢ºèªçµæœã‚’é¡§å®¢ã«ä¼ãˆã‚‹å°‚é–€å®¶ã§ã™ã€‚
                åœ¨åº«ãŒã‚ã‚‹å ´åˆã®å›ç­”æ–‡ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
            - id: user-stock-available
              role: user
              text: |
                ä»¥ä¸‹ã®å•†å“ã«ã¤ã„ã¦åœ¨åº«ãŒã‚ã‚‹ã“ã¨ã‚’ãŠå®¢æ§˜ã«ä¼ãˆã¦ãã ã•ã„ï¼š
                
                å•†å“æƒ…å ±ï¼š
                {{#extract_stock_node.text#}}
                
                å›ç­”æ–‡ã«ã¯ä»¥ä¸‹ã‚’å«ã‚ã¦ãã ã•ã„ï¼š
                - åœ¨åº«ãŒã‚ã‚‹ã“ã¨ã®æ˜ç¢ºãªä¼é”
                - ã”æ³¨æ–‡å¯èƒ½ã§ã‚ã‚‹ã“ã¨
                - æ³¨æ–‡æ–¹æ³•ï¼ˆé›»è©±ã¾ãŸã¯FAXï¼‰
                - è©³ç´°ãªç´æœŸã‚„ä¾¡æ ¼ã«ã¤ã„ã¦æ¡ˆå†…ã™ã‚‹ã“ã¨
                - ä¸å¯§ãªå¯¾å¿œ
          structured_output_enabled: false
          vision:
            enabled: false
          variables: []
          context:
            enabled: false
            variable_selector: []
        height: 98
        id: stock_available_template_node
        position:
          x: 1850
          y: 300
        positionAbsolute:
          x: 1850
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          desc: "ãƒ¡ãƒ¼ã‚«ãƒ¼å•ã„åˆã‚ã›æ–‡ç”Ÿæˆ"
          selected: false
          title: "ãƒ¡ãƒ¼ã‚«ãƒ¼å•ã„åˆã‚ã›æ–‡ï¼ˆåœ¨åº«ï¼‰"
          type: llm
          model:
            provider: openai
            name: gpt-4
            mode: chat
            completion_params:
              temperature: 0.5
              max_tokens: 400
          prompt_template:
            - id: system-stock-inquiry
              role: system
              text: |
                ã‚ãªãŸã¯ãƒ¡ãƒ¼ã‚«ãƒ¼ã¸ã®åœ¨åº«å•ã„åˆã‚ã›æ–‡ã‚’ä½œæˆã™ã‚‹å°‚é–€å®¶ã§ã™ã€‚
                åœ¨åº«ãŒãªã„å ´åˆã®ãƒ¡ãƒ¼ã‚«ãƒ¼å•ã„åˆã‚ã›æ¡ˆå†…æ–‡ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
            - id: user-stock-inquiry
              role: user
              text: |
                ä»¥ä¸‹ã®å•†å“ã«ã¤ã„ã¦åœ¨åº«ãŒãªã„ãŸã‚ã€ãƒ¡ãƒ¼ã‚«ãƒ¼å•ã„åˆã‚ã›ãŒå¿…è¦ã§ã™ï¼š
                
                å•†å“æƒ…å ±ï¼š
                {{#extract_stock_node.text#}}
                
                æ¡ˆå†…æ–‡ã«ã¯ä»¥ä¸‹ã‚’å«ã‚ã¦ãã ã•ã„ï¼š
                - ç¾åœ¨åœ¨åº«ãŒãªã„ã“ã¨ã®èª¬æ˜
                - ãƒ¡ãƒ¼ã‚«ãƒ¼ã¸ç¢ºèªã™ã‚‹ã“ã¨ã®æ¡ˆå†…
                - ç¢ºèªäº‹é …ï¼ˆåœ¨åº«æœ‰ç„¡ã€ç´æœŸè¦‹è¾¼ã¿ã€æœ€å°æ³¨æ–‡æ•°é‡ï¼‰
                - å›ç­”ã¾ã§ã®ç›®å®‰æ™‚é–“ï¼ˆ2-3å–¶æ¥­æ—¥ï¼‰
                - ä¸å¯§ãªå¯¾å¿œ
          structured_output_enabled: false
          vision:
            enabled: false
          variables: []
          context:
            enabled: false
            variable_selector: []
        height: 98
        id: stock_inquiry_template_node
        position:
          x: 1850
          y: 450
        positionAbsolute:
          x: 1850
          y: 450
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "{{#stock_available_template_node.text#}}"
          desc: "åœ¨åº«ã‚ã‚Šå›ç­”"
          selected: false
          title: "åœ¨åº«ã‚ã‚Š"
          type: answer
          variables: []
        height: 107
        id: stock_available_answer_node
        position:
          x: 2150
          y: 300
        positionAbsolute:
          x: 2150
          y: 300
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "{{#stock_inquiry_template_node.text#}}"
          desc: "ãƒ¡ãƒ¼ã‚«ãƒ¼å•ã„åˆã‚ã›æ¡ˆå†…"
          selected: false
          title: "ãƒ¡ãƒ¼ã‚«ãƒ¼å•ã„åˆã‚ã›ï¼ˆåœ¨åº«ï¼‰"
          type: answer
          variables: []
        height: 107
        id: stock_inquiry_answer_node
        position:
          x: 2150
          y: 450
        positionAbsolute:
          x: 2150
          y: 450
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
      - data:
          answer: "ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€‚ãŠå•ã„åˆã‚ã›ã„ãŸã ã„ãŸå†…å®¹ã¯ã€å•†å“ã®ä»•æ§˜ã‚„åœ¨åº«ã«é–¢ã™ã‚‹ã‚‚ã®ã§ã¯ãªã„ã‚ˆã†ã§ã™ã€‚\n\nåˆ¥ã®çª“å£ã§ãŠå—ã‘ã™ã‚‹å†…å®¹ã®å¯èƒ½æ€§ãŒã”ã–ã„ã¾ã™ã€‚\næã‚Œå…¥ã‚Šã¾ã™ãŒã€ãŠå•ã„åˆã‚ã›å†…å®¹ã‚’å†åº¦ã”ç¢ºèªã„ãŸã ãã‹ã€æ‹…å½“éƒ¨ç½²ã¸ç›´æ¥ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚"
          desc: "ãã®ä»–ã®å•ã„åˆã‚ã›ã¸ã®å›ç­”"
          selected: false
          title: "ãã®ä»–å›ç­”"
          type: answer
          variables: []
        height: 107
        id: other_answer_node
        position:
          x: 950
          y: 600
        positionAbsolute:
          x: 950
          y: 600
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 244
    viewport:
      x: 0
      y: 0
      zoom: 0.6